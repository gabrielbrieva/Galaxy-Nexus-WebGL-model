function i(a){throw a;}var j=void 0,k=!0,l=null,m=!1,ba=encodeURIComponent,n=window,ca=Object,ea=Infinity,o=Error,fa=Boolean,ga=parseInt,ha=parseFloat,ia=Function,q=document,ja=decodeURIComponent,ka=isNaN,la=RegExp,ma=Array,s=Math;function na(a,b){return a.onload=b}function oa(a,b){return a.onmouseup=b}function pa(a,b){return a.show=b}function qa(a,b){return a.onreadystatechange=b}function ra(a,b){return a.width=b}function sa(a,b){return a.BYTES_PER_ELEMENT=b}function ta(a,b){return a.left=b}
function ua(a,b){return a.send=b}function ya(a,b){return a.keyCode=b}function za(a,b){return a.handleEvent=b}function Aa(a,b){return a.type=b}function Ba(a,b){return a.name=b}function Ca(a,b){return a.clientX=b}function Da(a,b){return a.clientY=b}function Ea(a,b){return a.toString=b}function Fa(a,b){return a.length=b}function Ga(a,b){return a.className=b}function Ha(a,b){return a.duration=b}function Ia(a,b){return a.target=b}function Ja(a,b){return a.onmousemove=b}
function Ka(a,b){return a.startTime=b}function La(a,b){return a.onclick=b}function Ma(a,b){return a.display=b}function Na(a,b){return a.canvas=b}function Oa(a,b){return a.height=b}function Pa(a,b){return a.zoom=b}
var Qa="onload",Ra="appendChild",t="push",Sa="uniform3f",Ta="uniform1f",Ua="show",Va="getBoundingClientRect",Wa="open",Xa="test",Ya="shift",Za="exec",$a="width",ab="round",bb="slice",cb="replace",db="nodeType",eb="data",fb="floor",gb="responseText",hb="getElementById",ib="offsetWidth",jb="concat",kb="preventDefault",lb="targetTouches",qb="button",v="indexOf",rb="capture",sb="left",tb="uniformMatrix4fv",ub="match",vb="getBoxObjectFor",wb="send",xb="readyState",yb="opera",zb="focus",Ab="createElement",
Bb="wheelDeltaX",Cb="atan2",Db="keyCode",Eb="sqrt",Fb="addEventListener",Gb="setAttribute",Hb="bindBuffer",Ib="play",Jb="handleEvent",w="type",Kb="parentWindow",Lb="home",y="rotation",Mb="defaultView",Nb="bind",z="name",Ob="getTime",Pb="frames",Qb="clientX",Rb="clientY",Sb="documentElement",Tb="substr",Ub="onchange",Vb="stop",Wb="toString",A="length",Xb="propertyIsEnumerable",Yb="uniform3fv",B="prototype",Zb="size",$b="clientWidth",E="setTimeout",ac="document",bc="split",cc="handle",dc="offsetParent",
ec="duration",fc="stack",gc="location",hc="getUniformLocation",ic="offsetLeft",F="style",jc="body",kc="removeChild",lc="sendMessage",mc="target",H="call",nc="random",oc="getAttribute",pc="clientHeight",qc="charCodeAt",rc="wheelDelta",sc="href",tc="substring",uc="console",vc="apply",wc="startTime",xc="navigator",yc="postMessage",zc="axis",Ac="parentNode",Bc="fileName",Cc="canvas",Dc="offsetTop",Ec="height",Fc="offsetHeight",Gc="join",Hc="unshift",Ic="transform",I="zoom";
function Jc(a){return function(){return a}}var K,L=this;function Kc(a){for(var a=a[bc]("."),b=L,c;c=a[Ya]();)if(b[c]!=l)b=b[c];else return l;return b}function Lc(){}
function Mc(a){var b=typeof a;if("object"==b)if(a){if(a instanceof ma)return"array";if(a instanceof ca)return b;var c=ca[B][Wb][H](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[A]&&"undefined"!=typeof a.splice&&"undefined"!=typeof a[Xb]&&!a[Xb]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[H]&&"undefined"!=typeof a[Xb]&&!a[Xb]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[H])return"object";
return b}function Nc(a){return a!==j}function Oc(a){return"array"==Mc(a)}function Pc(a){var b=Mc(a);return"array"==b||"object"==b&&"number"==typeof a[A]}function Qc(a){return"string"==typeof a}function Rc(a){return"number"==typeof a}function Sc(a){return"function"==Mc(a)}function Tc(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function Uc(a){return a[Vc]||(a[Vc]=++Wc)}var Vc="closure_uid_"+s[fb](2147483648*s[nc]())[Wb](36),Wc=0;function Xc(a,b,c){return a[H][vc](a[Nb],arguments)}
function Yc(a,b,c){a||i(o());if(2<arguments[A]){var d=ma[B][bb][H](arguments,2);return function(){var c=ma[B][bb][H](arguments);ma[B][Hc][vc](c,d);return a[vc](b,c)}}return function(){return a[vc](b,arguments)}}function N(a,b,c){N=ia[B][Nb]&&-1!=ia[B][Nb][Wb]()[v]("native code")?Xc:Yc;return N[vc](l,arguments)}function Zc(a,b){var c=ma[B][bb][H](arguments,1);return function(){var b=ma[B][bb][H](arguments);b[Hc][vc](b,c);return a[vc](this,b)}}var $c=Date.now||function(){return+new Date};
function ad(a,b){var c=a[bc]("."),d=L;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c[A]&&(e=c[Ya]());)!c[A]&&Nc(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function P(a,b){function c(){}c.prototype=b[B];a.superClass_=b[B];a.prototype=new c}ia[B].bind=ia[B][Nb]||function(a,b){if(1<arguments[A]){var c=ma[B][bb][H](arguments,1);c[Hc](this,a);return N[vc](l,c)}return N(this,a)};function bd(a){a=""+a;if(/^\s*$/[Xa](a)?0:/^[\],:{}\s\u2028\u2029]*$/[Xa](a[cb](/\\["\\\/bfnrtu]/g,"@")[cb](/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")[cb](/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}i(o("Invalid JSON string: "+a))}function cd(){this.replacer_=j}function dd(a){var b=[];ed(new cd,a,b);return b[Gc]("")}
function ed(a,b,c){switch(typeof b){case "string":fd(b,c);break;case "number":c[t](isFinite(b)&&!ka(b)?b:"null");break;case "boolean":c[t](b);break;case "undefined":c[t]("null");break;case "object":if(b==l){c[t]("null");break}if(Oc(b)){var d=b[A];c[t]("[");for(var e="",f=0;f<d;f++)c[t](e),e=b[f],ed(a,a.replacer_?a.replacer_[H](b,""+f,e):e,c),e=",";c[t]("]");break}c[t]("{");d="";for(f in b)ca[B].hasOwnProperty[H](b,f)&&(e=b[f],"function"!=typeof e&&(c[t](d),fd(f,c),c[t](":"),ed(a,a.replacer_?a.replacer_[H](b,
f,e):e,c),d=","));c[t]("}");break;case "function":break;default:i(o("Unknown type: "+typeof b))}}var gd={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},hd=/\uffff/[Xa]("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function fd(a,b){b[t]('"',a[cb](hd,function(a){if(a in gd)return gd[a];var b=a[qc](0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return gd[a]=e+b[Wb](16)}),'"')};function id(a){this.stack=o()[fc]||"";a&&(this.message=""+a)}P(id,o);Ba(id[B],"CustomError");function jd(a,b){for(var c=1;c<arguments[A];c++)var d=(""+arguments[c])[cb](/\$/g,"$$$$"),a=a[cb](/\%s/,d);return a}function kd(a){if(!ld[Xa](a))return a;-1!=a[v]("&")&&(a=a[cb](md,"&amp;"));-1!=a[v]("<")&&(a=a[cb](nd,"&lt;"));-1!=a[v](">")&&(a=a[cb](od,"&gt;"));-1!=a[v]('"')&&(a=a[cb](pd,"&quot;"));return a}var md=/&/g,nd=/</g,od=/>/g,pd=/\"/g,ld=/[&<>\"]/;function qd(a,b){b[Hc](a);id[H](this,jd[vc](l,b));b[Ya]()}P(qd,id);Ba(qd[B],"AssertionError");function rd(a,b,c){if(!a){var d=ma[B][bb][H](arguments,2),e="Assertion failed";if(b)var e=e+(": "+b),f=d;i(new qd(""+e,f||[]))}}function sd(a,b){i(new qd("Failure"+(a?": "+a:""),ma[B][bb][H](arguments,1)))};var td=ma[B],ud=td[v]?function(a,b,c){rd(a[A]!=l);return td[v][H](a,b,c)}:function(a,b,c){c=c==l?0:0>c?s.max(0,a[A]+c):c;if(Qc(a))return!Qc(b)||1!=b[A]?-1:a[v](b,c);for(;c<a[A];c++)if(c in a&&a[c]===b)return c;return-1},vd=td.forEach?function(a,b,c){rd(a[A]!=l);td.forEach[H](a,b,c)}:function(a,b,c){for(var d=a[A],e=Qc(a)?a[bc](""):a,f=0;f<d;f++)f in e&&b[H](c,e[f],f,a)},wd=td.filter?function(a,b,c){rd(a[A]!=l);return td.filter[H](a,b,c)}:function(a,b,c){for(var d=a[A],e=[],f=0,g=Qc(a)?a[bc](""):a,
h=0;h<d;h++)if(h in g){var p=g[h];b[H](c,p,h,a)&&(e[f++]=p)}return e};function xd(a,b){var c=ud(a,b);0<=c&&(rd(a[A]!=l),td.splice[H](a,c,1))}function yd(a){return td[jb][vc](td,arguments)}function zd(a){if(Oc(a))return yd(a);for(var b=[],c=0,d=a[A];c<d;c++)b[c]=a[c];return b}function Ad(a,b,c,d){rd(a[A]!=l);td.splice[vc](a,Bd(arguments,1))}function Bd(a,b,c){rd(a[A]!=l);return 2>=arguments[A]?td[bb][H](a,b):td[bb][H](a,b,c)};function Cd(a,b){this.x=Nc(a)?a:0;this.y=Nc(b)?b:0}Cd[B].clone=function(){return new Cd(this.x,this.y)};Ea(Cd[B],function(){return"("+this.x+", "+this.y+")"});function Dd(a,b){for(var c in a)b[H](j,a[c],c,a)}function Ed(){var a=Fd,b;for(b in a)return m;return k}function Gd(a){var b=Mc(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=Gd(a[c]);return b}return a}var Hd="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function Id(a,b){for(var c,d,e=1;e<arguments[A];e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Hd[A];f++)c=Hd[f],ca[B].hasOwnProperty[H](d,c)&&(a[c]=d[c])}};var Jd,Kd,Ld,Md,Nd;function Od(){return L[xc]?L[xc].userAgent:l}Md=Ld=Kd=Jd=m;var Pd;if(Pd=Od()){var Qd=L[xc];Jd=0==Pd[v]("Opera");Kd=!Jd&&-1!=Pd[v]("MSIE");Ld=!Jd&&-1!=Pd[v]("WebKit");Md=!Jd&&!Ld&&"Gecko"==Qd.product}var Rd=Jd,R=Kd,Sd=Md,S=Ld,Td=L[xc],Ud=Td&&Td.platform||"";Nd=-1!=Ud[v]("Mac");var Vd=-1!=Ud[v]("Win"),Wd;
a:{var Xd="",Yd;if(Rd&&L[yb])var Zd=L[yb].version,Xd="function"==typeof Zd?Zd():Zd;else if(Sd?Yd=/rv\:([^\);]+)(\)|;)/:R?Yd=/MSIE\s+([^\);]+)(\)|;)/:S&&(Yd=/WebKit\/(\S+)/),Yd)var $d=Yd[Za](Od()),Xd=$d?$d[1]:"";if(R){var ae,be=L[ac];ae=be?be.documentMode:j;if(ae>ha(Xd)){Wd=""+ae;break a}}Wd=Xd}var ce=Wd,de={};
function ee(a){var b;if(!(b=de[a])){b=0;for(var c=(""+ce)[cb](/^[\s\xa0]+|[\s\xa0]+$/g,"")[bc]("."),d=(""+a)[cb](/^[\s\xa0]+|[\s\xa0]+$/g,"")[bc]("."),e=s.max(c[A],d[A]),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",p=la("(\\d*)(\\D*)","g"),r=la("(\\d*)(\\D*)","g");do{var u=p[Za](g)||["","",""],x=r[Za](h)||["","",""];if(0==u[0][A]&&0==x[0][A])break;b=((0==u[1][A]?0:ga(u[1],10))<(0==x[1][A]?0:ga(x[1],10))?-1:(0==u[1][A]?0:ga(u[1],10))>(0==x[1][A]?0:ga(x[1],10))?1:0)||((0==u[2][A])<(0==x[2][A])?-1:(0==
u[2][A])>(0==x[2][A])?1:0)||(u[2]<x[2]?-1:u[2]>x[2]?1:0)}while(0==b)}b=de[a]=0<=b}return b}var fe={};function ge(a){return fe[a]||(fe[a]=R&&!!q.documentMode&&q.documentMode>=a)};var he,ie=!R||ge(9);!Sd&&!R||R&&ge(9)||Sd&&ee("1.9.1");R&&ee("9");function je(a){a=a.className;return Qc(a)&&a[ub](/\S+/g)||[]}function ke(a,b){for(var c=je(a),d=Bd(arguments,1),e=c[A]+d[A],f=c,g=0;g<d[A];g++)0<=ud(f,d[g])||f[t](d[g]);Ga(a,c[Gc](" "));return c[A]==e}function le(a,b){var c=je(a),d=Bd(arguments,1),c=me(c,d);Ga(a,c[Gc](" "))}function me(a,b){return wd(a,function(a){return!(0<=ud(b,a))})};function ne(a){return a?new oe(pe(a)):he||(he=new oe)}function qe(a,b){Dd(b,function(b,d){"style"==d?a[F].cssText=b:"class"==d?Ga(a,b):"for"==d?a.htmlFor=b:d in re?a[Gb](re[d],b):0==d.lastIndexOf("aria-",0)?a[Gb](d,b):a[d]=b})}var re={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function se(a,b,c){function d(c){c&&b[Ra](Qc(c)?a.createTextNode(c):c)}for(var e=2;e<c[A];e++){var f=c[e];Pc(f)&&!(Tc(f)&&0<f[db])?vd(te(f)?zd(f):f,d):d(f)}}function ue(a){a&&a[Ac]&&a[Ac][kc](a)}function ve(a,b){if(a.contains&&1==b[db])return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||fa(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b[Ac];return b==a}function pe(a){return 9==a[db]?a:a.ownerDocument||a[ac]}
function te(a){if(a&&"number"==typeof a[A]){if(Tc(a))return"function"==typeof a.item||"string"==typeof a.item;if(Sc(a))return"function"==typeof a.item}return m}function oe(a){this.goog_dom_DomHelper$document_=a||L[ac]||q}oe[B].getElement=function(a){return Qc(a)?this.goog_dom_DomHelper$document_[hb](a):a};
oe[B].goog_dom_DomHelper_prototype$createDom=function(a,b,c){var d=this.goog_dom_DomHelper$document_,e=arguments,f=e[0],g=e[1];if(!ie&&g&&(g[z]||g[w])){f=["<",f];g[z]&&f[t](' name="',kd(g[z]),'"');if(g[w]){f[t](' type="',kd(g[w]),'"');var h={};Id(h,g);g=h;delete g[w]}f[t](">");f=f[Gc]("")}f=d[Ab](f);g&&(Qc(g)?Ga(f,g):Oc(g)?ke[vc](l,[f][jb](g)):qe(f,g));2<e[A]&&se(d,f,e);return f};
function we(a){var b=a.goog_dom_DomHelper$document_,a=!S&&"CSS1Compat"==b.compatMode?b[Sb]:b[jc],b=b[Kb]||b[Mb];return new Cd(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}oe[B].contains=ve;function xe(a){xe[" "](a);return a}xe[" "]=Lc;function ye(a,b){try{return xe(a[b]),k}catch(c){}return m};var ze=!R||ge(9),Ae=!R||ge(9),Be=R&&!ee("8");!S||ee("528");Sd&&ee("1.9b")||R&&ee("8")||Rd&&ee("9.5")||S&&ee("528");!Sd||ee("8");function Ce(){}Ce[B].disposed_=m;Ce[B].dispose=function(){this.disposed_||(this.disposed_=k,this.disposeInternal())};Ce[B].disposeInternal=function(){this.dependentDisposables_&&De[vc](l,this.dependentDisposables_)};function Ee(a){a&&"function"==typeof a.dispose&&a.dispose()}function De(a){for(var b=0,c=arguments[A];b<c;++b){var d=arguments[b];Pc(d)?De[vc](l,d):Ee(d)}};function Fe(a,b){Aa(this,a);Ia(this,b);this.goog_events_Event$currentTarget=this[mc]}P(Fe,Ce);Fe[B].disposeInternal=function(){delete this[w];delete this[mc];delete this.goog_events_Event$currentTarget};Fe[B].propagationStopped_=m;Fe[B].returnValue_=k;Fe[B].preventDefault=function(){this.returnValue_=m};function Ge(a){a[kb]()};function He(a,b){a&&Ie(this,a,b)}P(He,Fe);var Je=[1,4,2];K=He[B];Ia(K,l);Ca(K,0);Da(K,0);K.button=0;ya(K,0);K.goog_events_BrowserEvent_prototype$ctrlKey=m;K.goog_events_BrowserEvent_prototype$altKey=m;K.goog_events_BrowserEvent_prototype$shiftKey=m;K.event_=l;
function Ie(a,b,c){var d=Aa(a,b[w]);Fe[H](a,d);Ia(a,b[mc]||b.srcElement);a.goog_events_Event$currentTarget=c;(c=b.relatedTarget)&&Sd&&ye(c,"nodeName");Ca(a,b[Qb]!==j?b[Qb]:b.pageX);Da(a,b[Rb]!==j?b[Rb]:b.pageY);a.button=b[qb];ya(a,b[Db]||0);a.goog_events_BrowserEvent_prototype$ctrlKey=b.ctrlKey;a.goog_events_BrowserEvent_prototype$altKey=b.altKey;a.goog_events_BrowserEvent_prototype$shiftKey=b.shiftKey;a.event_=b;delete a.returnValue_;delete a.propagationStopped_}
K.preventDefault=function(){He.superClass_[kb][H](this);var a=this.event_;if(a[kb])a[kb]();else if(a.returnValue=m,Be)try{(a.ctrlKey||112<=a[Db]&&123>=a[Db])&&ya(a,-1)}catch(b){}};K.getBrowserEvent=function(){return this.event_};K.disposeInternal=function(){He.superClass_.disposeInternal[H](this);this.event_=l;Ia(this,l);this.goog_events_Event$currentTarget=l};function Ke(){}var Le=0;Ke[B].key=0;Ke[B].removed=m;Ke[B].callOnce=m;za(Ke[B],function(a){return this.isFunctionListener_?this.listener[H](this.handler||this.src,a):this.listener[Jb][H](this.listener,a)});var Me={},Ne={},Oe={},Pe={};
function Qe(a,b,c,d,e){if(b){if(Oc(b)){for(var f=0;f<b[A];f++)Qe(a,b[f],c,d,e);return l}var d=!!d,g=Ne;b in g||(g[b]={count_:0,remaining_:0});g=g[b];d in g||(g[d]={count_:0,remaining_:0},g.count_++);var g=g[d],h=Uc(a),p;g.remaining_++;if(g[h]){p=g[h];for(f=0;f<p[A];f++)if(g=p[f],g.listener==c&&g.handler==e){if(g.removed)break;return p[f].key}}else p=g[h]=[],g.count_++;f=Re();f.src=a;var r=g=new Ke;Sc(c)?r.isFunctionListener_=k:c&&c[Jb]&&Sc(c[Jb])?r.isFunctionListener_=m:i(o("Invalid listener argument"));
r.listener=c;r.proxy=f;r.src=a;Aa(r,b);r.capture=!!d;r.handler=e;r.callOnce=m;r.key=++Le;r.removed=m;c=g.key;f.key=c;p[t](g);Me[c]=g;Oe[h]||(Oe[h]=[]);Oe[h][t](g);a[Fb]?(a==L||!a.customEvent_)&&a[Fb](b,f,d):a.attachEvent(b in Pe?Pe[b]:Pe[b]="on"+b,f);return c}i(o("Invalid event type"))}function Re(){var a=Se,b=Ae?function(c){return a[H](b.src,b.key,c)}:function(c){c=a[H](b.src,b.key,c);if(!c)return c};return b}
function Te(a,b,c,d,e){if(Oc(b))for(var f=0;f<b[A];f++)Te(a,b[f],c,d,e);else if(d=!!d,a=Ue(a,b,d))for(f=0;f<a[A];f++)if(a[f].listener==c&&a[f][rb]==d&&a[f].handler==e){Ve(a[f].key);break}}
function Ve(a){if(!Me[a])return m;var b=Me[a];if(b.removed)return m;var c=b.src,d=b[w],e=b.proxy,f=b[rb];c.removeEventListener?(c==L||!c.customEvent_)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Pe?Pe[d]:Pe[d]="on"+d,e);c=Uc(c);e=Ne[d][f][c];if(Oe[c]){var g=Oe[c];xd(g,b);0==g[A]&&delete Oe[c]}b.removed=k;e.needsCleanup_=k;We(d,f,c,e);delete Me[a];return k}
function We(a,b,c,d){if(!d.locked_&&d.needsCleanup_){for(var e=0,f=0;e<d[A];e++)d[e].removed?d[e].proxy.src=l:(e!=f&&(d[f]=d[e]),f++);Fa(d,f);d.needsCleanup_=m;0==f&&(delete Ne[a][b][c],Ne[a][b].count_--,0==Ne[a][b].count_&&(delete Ne[a][b],Ne[a].count_--),0==Ne[a].count_&&delete Ne[a])}}
function Xe(a){var b,c=0,d=b==l;b=!!b;if(a==l)Dd(Oe,function(a){for(var e=a[A]-1;0<=e;e--){var f=a[e];if(d||b==f[rb])Ve(f.key),c++}});else if(a=Uc(a),Oe[a])for(var a=Oe[a],e=a[A]-1;0<=e;e--){var f=a[e];if(d||b==f[rb])Ve(f.key),c++}}function Ue(a,b,c){var d=Ne;return b in d&&(d=d[b],c in d&&(d=d[c],a=Uc(a),d[a]))?d[a]:l}
function Ye(a,b,c,d,e){var f=1,b=Uc(b);if(a[b]){a.remaining_--;a=a[b];a.locked_?a.locked_++:a.locked_=1;try{for(var g=a[A],h=0;h<g;h++){var p=a[h];p&&!p.removed&&(f&=Ze(p,e)!==m)}}finally{a.locked_--,We(c,d,b,a)}}return fa(f)}function Ze(a,b){var c=a[Jb](b);a.callOnce&&Ve(a.key);return c}
function $e(a,b){var c=b[w]||b,d=Ne;if(!(c in d))return k;if(Qc(b))b=new Fe(b,a);else if(b instanceof Fe)Ia(b,b[mc]||a);else{var e=b,b=new Fe(c,a);Id(b,e)}var e=1,f,d=d[c],c=k in d,g;if(c){f=[];for(g=a;g;g=g.parentEventTarget_)f[t](g);g=d[k];g.remaining_=g.count_;for(var h=f[A]-1;!b.propagationStopped_&&0<=h&&g.remaining_;h--)b.goog_events_Event$currentTarget=f[h],e&=Ye(g,f[h],b[w],k,b)&&b.returnValue_!=m}if(m in d)if(g=d[m],g.remaining_=g.count_,c)for(h=0;!b.propagationStopped_&&h<f[A]&&g.remaining_;h++)b.goog_events_Event$currentTarget=
f[h],e&=Ye(g,f[h],b[w],m,b)&&b.returnValue_!=m;else for(d=a;!b.propagationStopped_&&d&&g.remaining_;d=d.parentEventTarget_)b.goog_events_Event$currentTarget=d,e&=Ye(g,d,b[w],m,b)&&b.returnValue_!=m;return fa(e)}
function Se(a,b){if(!Me[a])return k;var c=Me[a],d=c[w],e=Ne;if(!(d in e))return k;var e=e[d],f,g;if(!Ae){f=b||Kc("window.event");var h=k in e,p=m in e;if(h){if(0>f[Db]||f.returnValue!=j)return k;a:{var r=m;if(0==f[Db])try{ya(f,-1);break a}catch(u){r=k}if(r||f.returnValue==j)f.returnValue=k}}r=new He;Ie(r,f,this);f=k;try{if(h){for(var x=[],D=r.goog_events_Event$currentTarget;D;D=D[Ac])x[t](D);g=e[k];g.remaining_=g.count_;for(var C=x[A]-1;!r.propagationStopped_&&0<=C&&g.remaining_;C--)r.goog_events_Event$currentTarget=
x[C],f&=Ye(g,x[C],d,k,r);if(p){g=e[m];g.remaining_=g.count_;for(C=0;!r.propagationStopped_&&C<x[A]&&g.remaining_;C++)r.goog_events_Event$currentTarget=x[C],f&=Ye(g,x[C],d,m,r)}}else f=Ze(c,r)}finally{x&&Fa(x,0),r.dispose()}return f}d=new He(b,this);try{f=Ze(c,d)}finally{d.dispose()}return f};function af(){}P(af,Ce);K=af[B];K.customEvent_=k;K.parentEventTarget_=l;K.setParentEventTarget=function(a){this.parentEventTarget_=a};K.addEventListener=function(a,b,c,d){Qe(this,a,b,c,d)};K.removeEventListener=function(a,b,c,d){Te(this,a,b,c,d)};function bf(a,b){return $e(a,b)}K.disposeInternal=function(){af.superClass_.disposeInternal[H](this);Xe(this);this.parentEventTarget_=l};function cf(a,b){this.interval_=a||1;this.timerObject_=b||df;this.boundTick_=N(this.tick_,this);this.last_=$c()}P(cf,af);cf[B].goog_Timer_prototype$enabled=m;var df=L.window;K=cf[B];K.timer_=l;K.tick_=function(){if(this.goog_Timer_prototype$enabled){var a=$c()-this.last_;0<a&&a<0.8*this.interval_?this.timer_=this.timerObject_[E](this.boundTick_,this.interval_-a):($e(this,"tick"),this.goog_Timer_prototype$enabled&&(this.timer_=this.timerObject_[E](this.boundTick_,this.interval_),this.last_=$c()))}};
K.start=function(){this.goog_Timer_prototype$enabled=k;this.timer_||(this.timer_=this.timerObject_[E](this.boundTick_,this.interval_),this.last_=$c())};K.stop=function(){this.goog_Timer_prototype$enabled=m;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=l)};K.disposeInternal=function(){cf.superClass_.disposeInternal[H](this);this[Vb]();delete this.timerObject_};
function ef(a){Sc(a)||(a&&"function"==typeof a[Jb]?a=N(a[Jb],a):i(o("Invalid listener argument")));return df[E](a,20)};var Fd={},ff=l;function gf(a){a=Uc(a);delete Fd[a];Ed()&&ff&&(df.clearTimeout(ff),ff=l)}function hf(){ff||(ff=ef(function(){ff=l;jf()}))}function jf(){var a=$c();Dd(Fd,function(b){kf(b,a)});Ed()||hf()};function lf(){this.state_=0;Ka(this,l);this.endTime=l}P(lf,af);lf[B].onBegin=function(){this.dispatchAnimationEvent("begin")};lf[B].onEnd=function(){this.dispatchAnimationEvent("end")};lf[B].dispatchAnimationEvent=function(a){$e(this,a)};function mf(a,b,c,d){lf[H](this);(!Oc(a)||!Oc(b))&&i(o("Start and end parameters must be arrays"));a[A]!=b[A]&&i(o("Start and end points must be the same length"));this.startPoint=a;this.endPoint=b;Ha(this,c);this.accel_=d;this.goog_fx_Animation$coords=[]}P(mf,lf);K=mf[B];K.goog_fx_Animation_prototype$progress=0;
K.play=function(a){if(a||0==this.state_)this.goog_fx_Animation_prototype$progress=0,this.goog_fx_Animation$coords=this.startPoint;else if(1==this.state_)return m;gf(this);a=$c();Ka(this,a);-1==this.state_&&Ka(this,this[wc]-this[ec]*this.goog_fx_Animation_prototype$progress);this.endTime=this[wc]+this[ec];if(!this.goog_fx_Animation_prototype$progress)this.onBegin();this.dispatchAnimationEvent("play");-1==this.state_&&this.dispatchAnimationEvent("resume");this.state_=1;var b=Uc(this);b in Fd||(Fd[b]=
this);hf();kf(this,a);return k};K.stop=function(a){gf(this);this.state_=0;a&&(this.goog_fx_Animation_prototype$progress=1);nf(this,this.goog_fx_Animation_prototype$progress);this.dispatchAnimationEvent("stop");this.onEnd()};K.disposeInternal=function(){0==this.state_||this[Vb](m);this.dispatchAnimationEvent("destroy");mf.superClass_.disposeInternal[H](this)};K.destroy=function(){this.dispose()};
function kf(a,b){a.goog_fx_Animation_prototype$progress=(b-a[wc])/(a.endTime-a[wc]);1<=a.goog_fx_Animation_prototype$progress&&(a.goog_fx_Animation_prototype$progress=1);nf(a,a.goog_fx_Animation_prototype$progress);if(1==a.goog_fx_Animation_prototype$progress)a.state_=0,gf(a),a.dispatchAnimationEvent("finish"),a.onEnd();else if(1==a.state_)a.onAnimate()}
function nf(a,b){Sc(a.accel_)&&(b=a.accel_(b));a.goog_fx_Animation$coords=ma(a.startPoint[A]);for(var c=0;c<a.startPoint[A];c++)a.goog_fx_Animation$coords[c]=(a.endPoint[c]-a.startPoint[c])*b+a.startPoint[c]}K.onAnimate=function(){this.dispatchAnimationEvent("animate")};K.dispatchAnimationEvent=function(a){bf(this,new of(a,this))};function of(a,b){Fe[H](this,a);this.x=b.goog_fx_Animation$coords[0];this.y=b.goog_fx_Animation$coords[1];Ha(this,b[ec])}P(of,Fe);function pf(a,b,c){return s.min(s.max(a,b),c)}function qf(a){return a*s.PI/180};function rf(a,b,c,d){ta(this,a);this.top=b;ra(this,c);Oa(this,d)}rf[B].clone=function(){return new rf(this[sb],this.top,this[$a],this[Ec])};Ea(rf[B],function(){return"("+this[sb]+", "+this.top+" - "+this[$a]+"w x "+this[Ec]+"h)"});rf[B].contains=function(a){return a instanceof rf?this[sb]<=a[sb]&&this[sb]+this[$a]>=a[sb]+a[$a]&&this.top<=a.top&&this.top+this[Ec]>=a.top+a[Ec]:a.x>=this[sb]&&a.x<=this[sb]+this[$a]&&a.y>=this.top&&a.y<=this.top+this[Ec]};function sf(a){var b;a:{b=pe(a);if(b[Mb]&&b[Mb].getComputedStyle&&(b=b[Mb].getComputedStyle(a,l))){b=b.position||b.getPropertyValue("position");break a}b=""}return b||(a.currentStyle?a.currentStyle.position:l)||a[F]&&a[F].position}function tf(a){var b=a[Va]();R&&(a=a.ownerDocument,ta(b,b[sb]-(a[Sb].clientLeft+a[jc].clientLeft)),b.top-=a[Sb].clientTop+a[jc].clientTop);return b}
function uf(a){if(R&&!ge(8))return a[dc];for(var b=pe(a),c=sf(a),d="fixed"==c||"absolute"==c,a=a[Ac];a&&a!=b;a=a[Ac])if(c=sf(a),d=d&&"static"==c&&a!=b[Sb]&&a!=b[jc],!d&&(a.scrollWidth>a[$b]||a.scrollHeight>a[pc]||"fixed"==c||"absolute"==c||"relative"==c))return a;return l}
function xf(a){var b=new Cd;if(1==a[db])if(a[Va])a=tf(a),b.x=a[sb],b.y=a.top;else{var c=we(ne(a));var d,e=pe(a),f=sf(a),g=Sd&&e[vb]&&!a[Va]&&"absolute"==f&&(d=e[vb](a))&&(0>d.screenX||0>d.screenY),h=new Cd(0,0),p;d=e?9==e[db]?e:pe(e):q;if(p=R)if(p=!ge(9))p="CSS1Compat"!=ne(d).goog_dom_DomHelper$document_.compatMode;p=p?d[jc]:d[Sb];if(a!=p)if(a[Va])d=tf(a),a=we(ne(e)),h.x=d[sb]+a.x,h.y=d.top+a.y;else if(e[vb]&&!g)d=e[vb](a),a=e[vb](p),h.x=d.screenX-a.screenX,h.y=d.screenY-a.screenY;else{g=a;do{h.x+=
g[ic];h.y+=g[Dc];g!=a&&(h.x+=g.clientLeft||0,h.y+=g.clientTop||0);if(S&&"fixed"==sf(g)){h.x+=e[jc].scrollLeft;h.y+=e[jc].scrollTop;break}g=g[dc]}while(g&&g!=a);if(Rd||S&&"absolute"==f)h.y-=e[jc][Dc];for(g=a;(g=uf(g))&&g!=e[jc]&&g!=p;)if(h.x-=g.scrollLeft,!Rd||"TR"!=g.tagName)h.y-=g.scrollTop}b.x=h.x-c.x;b.y=h.y-c.y}else c=Sc(a.getBrowserEvent),h=a,a[lb]?h=a[lb][0]:c&&a.event_[lb]&&(h=a.event_[lb][0]),b.x=h[Qb],b.y=h[Rb];return b};function yf(a,b,c,d,e){mf[H](this,b,c,d,e);this.goog_fx_dom_PredefinedEffect$element=a}P(yf,mf);yf[B].updateStyle=Lc;yf[B].onAnimate=function(){this.updateStyle();yf.superClass_.onAnimate[H](this)};yf[B].onEnd=function(){this.updateStyle();yf.superClass_.onEnd[H](this)};yf[B].onBegin=function(){this.updateStyle();yf.superClass_.onBegin[H](this)};function zf(a,b,c,d,e){(2!=b[A]||2!=c[A])&&i(o("Start and end points must be 2D"));yf[vc](this,arguments)}P(zf,yf);
zf[B].updateStyle=function(){ta(this.goog_fx_dom_PredefinedEffect$element[F],s[ab](this.goog_fx_Animation$coords[0])+"px");this.goog_fx_dom_PredefinedEffect$element[F].top=s[ab](this.goog_fx_Animation$coords[1])+"px"};function Af(a,b,c,d){zf[H](this,a,[a[ic],a[Dc]],b,c,d)}P(Af,zf);Af[B].onBegin=function(){this.startPoint=[this.goog_fx_dom_PredefinedEffect$element[ic],this.goog_fx_dom_PredefinedEffect$element[Dc]];Af.superClass_.onBegin[H](this)};function Bf(a,b,c,d,e){yf[H](this,a,[b],[c],d,e)}
P(Bf,yf);Bf[B].updateStyle=function(){ra(this.goog_fx_dom_PredefinedEffect$element[F],s[ab](this.goog_fx_Animation$coords[0])+"px")};function Cf(a,b,c,d,e){yf[H](this,a,[b],[c],d,e)}P(Cf,yf);Cf[B].updateStyle=function(){Oa(this.goog_fx_dom_PredefinedEffect$element[F],s[ab](this.goog_fx_Animation$coords[0])+"px")};function Df(a,b,c,d,e){Rc(b)&&(b=[b]);Rc(c)&&(c=[c]);yf[H](this,a,b,c,d,e);(1!=b[A]||1!=c[A])&&i(o("Start and end points must be 1D"))}P(Df,yf);
Df[B].updateStyle=function(){var a=this.goog_fx_Animation$coords[0],b=this.goog_fx_dom_PredefinedEffect$element[F];"opacity"in b?b.opacity=a:"MozOpacity"in b?b.MozOpacity=a:"filter"in b&&(b.filter=""===a?"":"alpha(opacity="+100*a+")")};pa(Df[B],function(){Ma(this.goog_fx_dom_PredefinedEffect$element[F],"")});function Ef(a,b,c){Df[H](this,a,1,0,b,c)}P(Ef,Df);Ef[B].onBegin=function(){this[Ua]();Ef.superClass_.onBegin[H](this)};
Ef[B].onEnd=function(){Ma(this.goog_fx_dom_PredefinedEffect$element[F],"none");Ef.superClass_.onEnd[H](this)};function Ff(a,b,c){Df[H](this,a,0,1,b,c)}P(Ff,Df);Ff[B].onBegin=function(){this[Ua]();Ff.superClass_.onBegin[H](this)};function Gf(a,b,c,d,e){if(!R&&(!S||!ee("525")))return k;if(Nd&&e)return Hf(a);if(e&&!d||!c&&(17==b||18==b)||R&&d&&b==a)return m;switch(a){case 13:return!(R&&ge(9));case 27:return!S}return Hf(a)}function Hf(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||S&&0==a)return k;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return k;default:return m}}
function If(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Jf(a,b){a&&(this.keyUpKey_&&Kf(this),this.goog_events_KeyHandler_prototype$element_=a,this.keyPressKey_=Qe(this.goog_events_KeyHandler_prototype$element_,"keypress",this,b),this.keyDownKey_=Qe(this.goog_events_KeyHandler_prototype$element_,"keydown",this.goog_events_KeyHandler_prototype$handleKeyDown_,b,this),this.keyUpKey_=Qe(this.goog_events_KeyHandler_prototype$element_,"keyup",this.handleKeyup_,b,this))}P(Jf,af);K=Jf[B];K.goog_events_KeyHandler_prototype$element_=l;K.keyPressKey_=l;
K.keyDownKey_=l;K.keyUpKey_=l;K.lastKey_=-1;K.keyCode_=-1;
var Lf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Mf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Nf=R||S&&ee("525");K=Jf[B];
K.goog_events_KeyHandler_prototype$handleKeyDown_=function(a){if(S&&(17==this.lastKey_&&!a.goog_events_BrowserEvent_prototype$ctrlKey||18==this.lastKey_&&!a.goog_events_BrowserEvent_prototype$altKey))this.keyCode_=this.lastKey_=-1;Nf&&!Gf(a[Db],this.lastKey_,a.goog_events_BrowserEvent_prototype$shiftKey,a.goog_events_BrowserEvent_prototype$ctrlKey,a.goog_events_BrowserEvent_prototype$altKey)?this[Jb](a):this.keyCode_=Sd?If(a[Db]):a[Db]};K.handleKeyup_=function(){this.keyCode_=this.lastKey_=-1};
za(K,function(a){var b=a.event_,c,d;R&&"keypress"==a[w]?c=this.keyCode_:S&&"keypress"==a[w]?c=this.keyCode_:Rd?c=this.keyCode_:(c=b[Db]||this.keyCode_,d=b.charCode||0,Nd&&63==d&&224==c&&(c=191));d=c;var e=b.keyIdentifier;c?63232<=c&&c in Lf?d=Lf[c]:25==c&&a.goog_events_BrowserEvent_prototype$shiftKey&&(d=9):e&&e in Mf&&(d=Mf[e]);this.lastKey_=d;a=new Of(d,0,0,b);try{$e(this,a)}finally{a.dispose()}});K.getElement=function(){return this.goog_events_KeyHandler_prototype$element_};
function Kf(a){a.keyPressKey_&&(Ve(a.keyPressKey_),Ve(a.keyDownKey_),Ve(a.keyUpKey_),a.keyPressKey_=l,a.keyDownKey_=l,a.keyUpKey_=l);a.goog_events_KeyHandler_prototype$element_=l;a.lastKey_=-1;a.keyCode_=-1}K.disposeInternal=function(){Jf.superClass_.disposeInternal[H](this);Kf(this)};function Of(a,b,c,d){d&&Ie(this,d,j);Aa(this,"key");ya(this,a)}P(Of,He);function Pf(a){this.goog_events_MouseWheelHandler$element_=a;this.listenKey_=Qe(this.goog_events_MouseWheelHandler$element_,Sd?"DOMMouseScroll":"mousewheel",this)}P(Pf,af);
za(Pf[B],function(a){var b=0,c=0,d=0,a=a.event_;if("mousewheel"==a[w]){c=1;if(R||S&&(Vd||ee("532.0")))c=40;d=S&&Nd&&0!=-a[rc]%c?-a[rc]:-a[rc]/c;Nc(a[Bb])?(b=S&&Nd&&0!=-a[Bb]%c?-a[Bb]:-a[Bb]/c,c=S&&Nd&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),Nc(a[zc])&&a[zc]===a.HORIZONTAL_AXIS?b=d:c=d;Rc(this.maxDeltaX_)&&pf(b,-this.maxDeltaX_,this.maxDeltaX_);Rc(this.maxDeltaY_)&&pf(c,-this.maxDeltaY_,this.maxDeltaY_);b=new Qf(d,a);try{$e(this,b)}finally{b.dispose()}});
Pf[B].disposeInternal=function(){Pf.superClass_.disposeInternal[H](this);Ve(this.listenKey_);delete this.listenKey_};function Qf(a,b){b&&Ie(this,b,j);Aa(this,"mousewheel");this.goog_events_MouseWheelEvent$detail=a}P(Qf,He);function Rf(a){this.handler_=a;this.goog_events_EventHandler$keys_=[]}P(Rf,Ce);var Sf=[];function Tf(a,b,c,d,e){Oc(c)||(Sf[0]=c,c=Sf);for(var f=0;f<c[A];f++)a.goog_events_EventHandler$keys_[t](Qe(b,c[f],d||a,e||m,a.handler_||a));return a}
function Uf(a,b,c,d,e,f){if(Oc(c))for(var g=0;g<c[A];g++)Uf(a,b,c[g],d,e,f);else{a:{d=d||a;f=f||a.handler_||a;e=!!e;if(b=Ue(b,c,e))for(c=0;c<b[A];c++)if(!b[c].removed&&b[c].listener==d&&b[c][rb]==e&&b[c].handler==f){b=b[c];break a}b=l}b&&(b=b.key,Ve(b),xd(a.goog_events_EventHandler$keys_,b))}return a}function Vf(a){vd(a.goog_events_EventHandler$keys_,Ve);Fa(a.goog_events_EventHandler$keys_,0)}Rf[B].disposeInternal=function(){Rf.superClass_.disposeInternal[H](this);Vf(this)};za(Rf[B],function(){i(o("EventHandler.handleEvent not implemented"))});function Wf(){lf[H](this);this.queue=[]}P(Wf,lf);function Xf(a,b){rd(0==a.state_,"Not allowed to add animations to a running animation queue.");0<=ud(a.queue,b)||(a.queue[t](b),Qe(b,"finish",a.onAnimationFinish,m,a))}Wf[B].disposeInternal=function(){vd(this.queue,function(a){a.dispose()});Fa(this.queue,0);Wf.superClass_.disposeInternal[H](this)};function Yf(){Wf[H](this);this.finishedCounter_=0}P(Yf,Wf);
Yf[B].play=function(a){if(0==this.queue[A])return m;if(a||0==this.state_)this.finishedCounter_=0,this.onBegin();else if(1==this.state_)return m;this.dispatchAnimationEvent("play");-1==this.state_&&this.dispatchAnimationEvent("resume");var b=-1==this.state_&&!a;Ka(this,$c());this.endTime=l;this.state_=1;vd(this.queue,function(c){(!b||-1==c.state_)&&c[Ib](a)});return k};
Yf[B].stop=function(a){vd(this.queue,function(b){0==b.state_||b[Vb](a)});this.state_=0;this.endTime=$c();this.dispatchAnimationEvent("stop");this.onEnd()};Yf[B].onAnimationFinish=function(){this.finishedCounter_++;this.finishedCounter_==this.queue[A]&&(this.endTime=$c(),this.state_=0,this.dispatchAnimationEvent("finish"),this.onEnd())};function Zf(a,b,c){Ia(this,a);this.handle=b||a;this.limits=c||new rf(NaN,NaN,NaN,NaN);this.goog_fx_Dragger_prototype$document_=pe(a);this.eventHandler_=new Rf(this);Qe(this[cc],["touchstart","mousedown"],this.startDrag,m,this)}P(Zf,af);var $f=R||Sd&&ee("1.9.3");K=Zf[B];Ca(K,0);Da(K,0);K.startX=0;K.startY=0;K.goog_fx_Dragger_prototype$deltaX=0;K.goog_fx_Dragger_prototype$deltaY=0;K.goog_fx_Dragger_prototype$enabled_=k;K.dragging_=m;K.hysteresisDistanceSquared_=0;K.ieDragStartCancellingOn_=m;
K.disposeInternal=function(){Zf.superClass_.disposeInternal[H](this);Te(this[cc],["touchstart","mousedown"],this.startDrag,m,this);this.eventHandler_.dispose();delete this[mc];delete this[cc];delete this.eventHandler_};
K.startDrag=function(a){var b="mousedown"==a[w];if(this.goog_fx_Dragger_prototype$enabled_&&!this.dragging_&&(!b||(ze?0==a.event_[qb]:"click"==a[w]||a.event_[qb]&Je[0])&&(!S||!Nd||!a.goog_events_BrowserEvent_prototype$ctrlKey))){ag(a);if(0==this.hysteresisDistanceSquared_)if(bg(this,a),this.dragging_)a[kb]();else return;else a[kb]();var b=this.goog_fx_Dragger_prototype$document_,c=b[Sb],d=!$f;Tf(this.eventHandler_,b,["touchmove","mousemove"],this.handleMove_,d);Tf(this.eventHandler_,b,["touchend",
"mouseup"],this.endDrag,d);$f?(c.setCapture(m),Tf(this.eventHandler_,c,"losecapture",this.endDrag)):Tf(this.eventHandler_,b?b[Kb]||b[Mb]:n,"blur",this.endDrag);R&&this.ieDragStartCancellingOn_&&Tf(this.eventHandler_,b,"dragstart",Ge);this.scrollTarget_&&Tf(this.eventHandler_,this.scrollTarget_,"scroll",this.onScroll_,d);Ca(this,this.startX=a[Qb]);Da(this,this.startY=a[Rb]);this.goog_fx_Dragger_prototype$deltaX=this[mc][ic];this.goog_fx_Dragger_prototype$deltaY=this[mc][Dc];this.pageScroll=we(ne(this.goog_fx_Dragger_prototype$document_));
$c()}else $e(this,"earlycancel")};function bg(a,b){bf(a,new cg("start",a,b[Qb],b[Rb]))!==m&&(a.dragging_=k)}K.endDrag=function(a){Vf(this.eventHandler_);$f&&this.goog_fx_Dragger_prototype$document_.releaseCapture();var b=dg(this,this.goog_fx_Dragger_prototype$deltaX),c=eg(this,this.goog_fx_Dragger_prototype$deltaY);this.dragging_?(ag(a),this.dragging_=m,bf(this,new cg("end",this,a[Qb],a[Rb],0,b,c))):$e(this,"earlycancel");("touchend"==a[w]||"touchcancel"==a[w])&&a[kb]()};
function ag(a){var b=a[w];"touchstart"==b||"touchmove"==b?Ie(a,a.event_[lb][0],a.goog_events_Event$currentTarget):("touchend"==b||"touchcancel"==b)&&Ie(a,a.event_.changedTouches[0],a.goog_events_Event$currentTarget)}
K.handleMove_=function(a){if(this.goog_fx_Dragger_prototype$enabled_){ag(a);var b=a[Qb]-this[Qb],c=a[Rb]-this[Rb];Ca(this,a[Qb]);Da(this,a[Rb]);if(!this.dragging_){var d=this.startX-this[Qb],e=this.startY-this[Rb];if(d*d+e*e>this.hysteresisDistanceSquared_&&(bg(this,a),!this.dragging_)){this.endDrag(a);return}}c=fg(this,b,c);b=c.x;c=c.y;this.dragging_&&bf(this,new cg("beforedrag",this,a[Qb],a[Rb],0,b,c))!==m&&(gg(this,a,b,c),a[kb]())}};
function fg(a,b,c){var d=we(ne(a.goog_fx_Dragger_prototype$document_)),b=b+(d.x-a.pageScroll.x),c=c+(d.y-a.pageScroll.y);a.pageScroll=d;a.goog_fx_Dragger_prototype$deltaX+=b;a.goog_fx_Dragger_prototype$deltaY+=c;b=dg(a,a.goog_fx_Dragger_prototype$deltaX);a=eg(a,a.goog_fx_Dragger_prototype$deltaY);return new Cd(b,a)}K.onScroll_=function(a){var b=fg(this,0,0);Ca(a,this[Qb]);Da(a,this[Rb]);gg(this,a,b.x,b.y)};function gg(a,b,c,d){a.defaultAction(c,d);bf(a,new cg("drag",a,b[Qb],b[Rb],0,c,d))}
function dg(a,b){var c=a.limits,d=!ka(c[sb])?c[sb]:l,c=!ka(c[$a])?c[$a]:0;return s.min(d!=l?d+c:ea,s.max(d!=l?d:-ea,b))}function eg(a,b){var c=a.limits,d=!ka(c.top)?c.top:l,c=!ka(c[Ec])?c[Ec]:0;return s.min(d!=l?d+c:ea,s.max(d!=l?d:-ea,b))}K.defaultAction=function(a,b){ta(this[mc][F],a+"px");this[mc][F].top=b+"px"};function cg(a,b,c,d,e,f,g){Fe[H](this,a);Ca(this,c);Da(this,d);ta(this,Nc(f)?f:b.goog_fx_Dragger_prototype$deltaX);this.top=Nc(g)?g:b.goog_fx_Dragger_prototype$deltaY;this.dragger=b}
P(cg,Fe);function hg(){}(function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}})(hg);hg[B].nextId_=0;hg.getInstance();function ig(a){this.dom_=a||ne()}P(ig,af);K=ig[B];K.idGenerator_=hg.getInstance();K.id_=l;K.inDocument_=m;K.goog_ui_Component_prototype$element_=l;K.goog_ui_Component_prototype$parent_=l;K.goog_ui_Component_prototype$children_=l;K.childIndex_=l;K.wasDecorated_=m;K.getElement=function(){return this.goog_ui_Component_prototype$element_};function jg(a){return a.googUiComponentHandler_||(a.googUiComponentHandler_=new Rf(a))}
K.setParentEventTarget=function(a){this.goog_ui_Component_prototype$parent_&&this.goog_ui_Component_prototype$parent_!=a&&i(o("Method not supported"));ig.superClass_.setParentEventTarget[H](this,a)};function kg(a){var b=T.slider;b.inDocument_&&i(o("Component already rendered"));if(a){b.wasDecorated_=k;if(!b.dom_||b.dom_.goog_dom_DomHelper$document_!=pe(a))b.dom_=ne(a);b.decorateInternal(a);b.enterDocument()}else i(o("Invalid element to decorate"))}
K.decorateInternal=function(a){this.goog_ui_Component_prototype$element_=a};K.enterDocument=function(){this.inDocument_=k;lg(this,function(a){!a.inDocument_&&a.getElement()&&a.enterDocument()})};K.exitDocument=function(){lg(this,function(a){a.inDocument_&&a.exitDocument()});this.googUiComponentHandler_&&Vf(this.googUiComponentHandler_);this.inDocument_=m};
K.disposeInternal=function(){ig.superClass_.disposeInternal[H](this);this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);lg(this,function(a){a.dispose()});!this.wasDecorated_&&this.goog_ui_Component_prototype$element_&&ue(this.goog_ui_Component_prototype$element_);this.goog_ui_Component_prototype$parent_=this.goog_ui_Component_prototype$element_=this.childIndex_=this.goog_ui_Component_prototype$children_=
l};function lg(a,b){a.goog_ui_Component_prototype$children_&&vd(a.goog_ui_Component_prototype$children_,b,j)}
K.removeChild=function(a,b){if(a){var c=Qc(a)?a:a.id_||(a.id_=":"+(a.idGenerator_.nextId_++)[Wb](36)),a=this.childIndex_&&c?(c in this.childIndex_?this.childIndex_[c]:j)||l:l;if(c&&a){var d=this.childIndex_;c in d&&delete d[c];xd(this.goog_ui_Component_prototype$children_,a);b&&(a.exitDocument(),a.goog_ui_Component_prototype$element_&&ue(a.goog_ui_Component_prototype$element_));c=a;c==l&&i(o("Unable to set parent component"));c.goog_ui_Component_prototype$parent_=l;ig.superClass_.setParentEventTarget[H](c,
l)}}a||i(o("Child is not in parent component"));return a};function mg(){}P(mg,af);K=mg[B];K.value_=0;K.minimum_=0;K.maximum_=100;K.extent_=0;K.step_=1;K.isChanging_=m;K.mute_=m;K.setValue=function(a){a=ng(this,a);this.value_!=a&&(this.value_=a+this.extent_>this.maximum_?this.maximum_-this.extent_:a<this.minimum_?this.minimum_:a,!this.isChanging_&&!this.mute_&&$e(this,"change"))};function og(a){return ng(a,a.value_)}
function pg(a,b){b=ng(a,b);a.extent_!=b&&(a.extent_=0>b?0:a.value_+b>a.maximum_?a.maximum_-a.value_:b,!a.isChanging_&&!a.mute_&&$e(a,"change"))}function ng(a,b){return a.step_==l?b:a.minimum_+s[ab]((b-a.minimum_)/a.step_)*a.step_}function qg(a,b){return a.step_==l?b:s[ab](b/a.step_)*a.step_};function rg(a){this.dom_=a||ne();this.rangeModel=new mg;Qe(this.rangeModel,"change",this.handleRangeModelChange,m,this)}P(rg,ig);var sg={VERTICAL:"vertical",HORIZONTAL:"horizontal"};K=rg[B];K.orientation_="horizontal";K.isAnimating_=m;K.moveToPointEnabled_=m;K.blockIncrement_=10;K.minExtent_=0;K.isHandleMouseWheel_=k;
K.decorateInternal=function(a){rg.superClass_.decorateInternal[H](this,a);ke(a,tg(this.orientation_));var a=this.getElement(),b;var c,d,e;b=a||q;if(b.querySelectorAll&&b.querySelector&&(!S||"CSS1Compat"==q.compatMode||ee("528")))b=b.querySelectorAll(".goog-slider-thumb");else if(b.getElementsByClassName){var f=b.getElementsByClassName("goog-slider-thumb");b=f}else{f=b.getElementsByTagName("*");e={};for(c=d=0;b=f[c];c++){var g=b.className;"function"==typeof g[bc]&&0<=ud(g[bc](/\s+/),"goog-slider-thumb")&&
(e[d++]=b)}Fa(e,d);b=e}b=b[0];b||(b=this.dom_.goog_dom_DomHelper_prototype$createDom("div","goog-slider-thumb"),b[Gb]("role","button"),b.roleName="button",a[Ra](b));this.valueThumb=this.extentThumb=b;a=this.getElement();a[Gb]("role","slider");a.roleName="slider";ug(this)};
K.enterDocument=function(){rg.superClass_.enterDocument[H](this);this.valueDragger_=new Zf(this.valueThumb);this.extentDragger_=new Zf(this.extentThumb);this.valueDragger_.defaultAction=this.extentDragger_.defaultAction=Lc;this.keyHandler_=new Jf(this.getElement());Tf(Tf(Tf(Tf(Tf(Tf(jg(this),this.valueDragger_,"beforedrag",this.handleBeforeDrag_),this.extentDragger_,"beforedrag",this.handleBeforeDrag_),this.valueDragger_,["start","end"],this.handleThumbDragStartEnd_),this.extentDragger_,["start",
"end"],this.handleThumbDragStartEnd_),this.keyHandler_,"key",this.goog_ui_SliderBase_prototype$handleKeyDown_),this.getElement(),"mousedown",this.handleMouseDown_);this.isHandleMouseWheel_&&(this.mouseWheelHandler_||(this.mouseWheelHandler_=new Pf(this.getElement())),Tf(jg(this),this.mouseWheelHandler_,"mousewheel",this.handleMouseWheel_));this.getElement().tabIndex=0;vg(this)};
K.exitDocument=function(){rg.superClass_.exitDocument[H](this);De(this.valueDragger_,this.extentDragger_,this.keyHandler_,this.mouseWheelHandler_)};
K.handleBeforeDrag_=function(a){var b=a.dragger==this.valueDragger_?this.valueThumb:this.extentThumb,c;"vertical"==this.orientation_?(c=this.getElement()[pc]-b[Fc],c=(c-a.top)/c*(wg(this)-xg(this))+xg(this)):c=a[sb]/(this.getElement()[$b]-b[ib])*(wg(this)-xg(this))+xg(this);c=a.dragger==this.valueDragger_?s.min(s.max(c,xg(this)),og(this.rangeModel)+qg(this.rangeModel,this.rangeModel.extent_)):s.min(s.max(c,og(this.rangeModel)),wg(this));yg(this,b,c)};
K.handleThumbDragStartEnd_=function(a){var b="start"==a[w],c=this.getElement();b?ke(c,"goog-slider-dragging"):le(c,"goog-slider-dragging");a=a[mc][cc];b?ke(a,"goog-slider-thumb-dragging"):le(a,"goog-slider-thumb-dragging")};
K.goog_ui_SliderBase_prototype$handleKeyDown_=function(a){var b=k;switch(a[Db]){case 36:zg(this,xg(this));break;case 35:zg(this,wg(this));break;case 33:Ag(this,this.blockIncrement_);break;case 34:Ag(this,-this.blockIncrement_);break;case 37:case 40:Ag(this,a.goog_events_BrowserEvent_prototype$shiftKey?-this.blockIncrement_:-this.unitIncrement_);break;case 39:case 38:Ag(this,a.goog_events_BrowserEvent_prototype$shiftKey?this.blockIncrement_:this.unitIncrement_);break;default:b=m}b&&a[kb]()};
K.handleMouseDown_=function(a){this.getElement()[zb]&&this.getElement()[zb]();var b=a[mc];!ve(this.valueThumb,b)&&!ve(this.extentThumb,b)&&(this.moveToPointEnabled_?zg(this,Bg(this,a)):(this.storeMousePos_(a),this.thumbToMove_=Cg(this,Bg(this,a)),this.incrementing_="vertical"==this.orientation_?this.lastMousePosition_<this.thumbToMove_[Dc]:this.lastMousePosition_>this.thumbToMove_[ic]+this.thumbToMove_[ib],a=pe(this.getElement()),Tf(Tf(jg(this),a,"mouseup",this.stopBlockIncrementing_,k),this.getElement(),
"mousemove",this.storeMousePos_),this.incTimer_||(this.incTimer_=new cf(200),Tf(jg(this),this.incTimer_,"tick",this.handleTimerTick_)),this.handleTimerTick_(),this.incTimer_.start()))};K.handleMouseWheel_=function(a){Ag(this,(0<a.goog_events_MouseWheelEvent$detail?-1:1)*this.unitIncrement_);a[kb]()};
K.handleTimerTick_=function(){var a;if("vertical"==this.orientation_){var b=this.lastMousePosition_,c=this.thumbToMove_[Dc];this.incrementing_?b<c&&(a=Dg(this,this.thumbToMove_)+this.blockIncrement_):b>c+this.thumbToMove_[Fc]&&(a=Dg(this,this.thumbToMove_)-this.blockIncrement_)}else b=this.lastMousePosition_,c=this.thumbToMove_[ic],this.incrementing_?b>c+this.thumbToMove_[ib]&&(a=Dg(this,this.thumbToMove_)+this.blockIncrement_):b<c&&(a=Dg(this,this.thumbToMove_)-this.blockIncrement_);Nc(a)&&yg(this,
this.thumbToMove_,a)};K.stopBlockIncrementing_=function(){this.incTimer_&&this.incTimer_[Vb]();var a=pe(this.getElement());Uf(Uf(jg(this),a,"mouseup",this.stopBlockIncrementing_,k),this.getElement(),"mousemove",this.storeMousePos_)};function Eg(a,b){var c,d=a.getElement();c=xf(b);d=xf(d);c=new Cd(c.x-d.x,c.y-d.y);return"vertical"==a.orientation_?c.y:c.x}K.storeMousePos_=function(a){this.lastMousePosition_=Eg(this,a)};
function Bg(a,b){var c=xg(a),d=wg(a);if("vertical"==a.orientation_){var e=a.valueThumb[Fc],f=a.getElement()[pc]-e,e=Eg(a,b)-e/2;return(d-c)*(f-e)/f+c}e=a.valueThumb[ib];f=a.getElement()[$b]-e;e=Eg(a,b)-e/2;return(d-c)*e/f+c}function Dg(a,b){if(b==a.valueThumb)return og(a.rangeModel);if(b==a.extentThumb)return og(a.rangeModel)+qg(a.rangeModel,a.rangeModel.extent_);i(o("Illegal thumb element. Neither minThumb nor maxThumb"))}
function Ag(a,b){var c=Dg(a,a.valueThumb)+b,d=Dg(a,a.extentThumb)+b,c=pf(c,xg(a),wg(a)-a.minExtent_),d=pf(d,xg(a)+a.minExtent_,wg(a));Fg(a,c,d-c)}
function yg(a,b,c){var d=l;b==a.extentThumb&&c<=ng(a.rangeModel,a.rangeModel.maximum_)&&c>=og(a.rangeModel)+a.minExtent_&&(d=c-og(a.rangeModel));var e=d||qg(a.rangeModel,a.rangeModel.extent_);b==a.valueThumb&&c>=xg(a)&&c<=og(a.rangeModel)+e-a.minExtent_&&(b=e-(c-og(a.rangeModel)),ng(a.rangeModel,c)+ng(a.rangeModel,b)==ng(a.rangeModel,c+b)&&(Fg(a,c,b),d=l));d!=l&&pg(a.rangeModel,d)}
function Fg(a,b,c){xg(a)<=b&&b<=wg(a)-c&&a.minExtent_<=c&&c<=wg(a)-b&&!(b==og(a.rangeModel)&&c==qg(a.rangeModel,a.rangeModel.extent_))&&(a.rangeModel.mute_=k,pg(a.rangeModel,0),a.rangeModel.setValue(b),pg(a.rangeModel,c),a.rangeModel.mute_=m,vg(a),$e(a,"change"))}function xg(a){return ng(a.rangeModel,a.rangeModel.minimum_)}function wg(a){return ng(a.rangeModel,a.rangeModel.maximum_)}function Cg(a,b){return b<=og(a.rangeModel)+qg(a.rangeModel,a.rangeModel.extent_)/2?a.valueThumb:a.extentThumb}
K.handleRangeModelChange=function(){vg(this);ug(this);$e(this,"change")};
function vg(a){if(a.valueThumb&&!a.isAnimating_){var b=Gg(a,Dg(a,a.valueThumb)),c=Gg(a,Dg(a,a.extentThumb));"vertical"==a.orientation_?(a.valueThumb[F].top=b.y+"px",a.extentThumb[F].top=c.y+"px",a.rangeHighlight&&(b=Hg(c.y,b.y,a.valueThumb[Fc]),a.rangeHighlight[F].top=b.offset+"px",Oa(a.rangeHighlight[F],b[Zb]+"px"))):(ta(a.valueThumb[F],b.x+"px"),ta(a.extentThumb[F],c.x+"px"),a.rangeHighlight&&(b=Hg(b.x,c.x,a.valueThumb[ib]),ta(a.rangeHighlight[F],b.offset+"px"),ra(a.rangeHighlight[F],b[Zb]+"px")))}}
function Hg(a,b,c){var d=s.ceil(c/2);return{offset:a+d,size:s.max(b-a+c-2*d,0)}}function Gg(a,b){var c=new Cd;if(a.valueThumb){var d=xg(a),e=wg(a),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.orientation_?(d=a.getElement()[pc]-a.valueThumb[Fc],e=s[ab](e*d),c.y=d-e):(d=s[ab](e*(a.getElement()[$b]-a.valueThumb[ib])),c.x=d)}return c}
function zg(a,b){b=s.min(wg(a),s.max(b,xg(a)));a.isAnimating_&&a.currentAnimation_[Vb](k);var c=new Yf,d=Cg(a,b),e=Gg(a,b);Xf(c,new Af(d,"vertical"==a.orientation_?[d[ic],e.y]:[e.x,d[Dc]],100));if(a.rangeHighlight){var f=Gg(a,og(a.rangeModel)),g=Gg(a,og(a.rangeModel)+qg(a.rangeModel,a.rangeModel.extent_));d==a.valueThumb?f=e:g=e;"vertical"==a.orientation_?(e=Hg(g.y,f.y,a.valueThumb[Fc]),Xf(c,new Af(a.rangeHighlight,[a.rangeHighlight[ic],e.offset],100)),Xf(c,new Cf(a.rangeHighlight,a.rangeHighlight[Fc],
e[Zb],100))):(e=Hg(f.x,g.x,a.valueThumb[ib]),Xf(c,new Af(a.rangeHighlight,[e.offset,a.rangeHighlight[Dc]],100)),Xf(c,new Bf(a.rangeHighlight,a.rangeHighlight[ib],e[Zb],100)))}a.currentAnimation_=c;Tf(jg(a),c,"end",a.endAnimation_);a.isAnimating_=k;yg(a,d,b);c[Ib](m)}K.endAnimation_=function(){this.isAnimating_=m};
function Ig(){var a=T.slider,b=sg.HORIZONTAL;if(a.orientation_!=b){var c=tg(a.orientation_),d=tg(b);a.orientation_=b;if(a.getElement()){for(var b=a.getElement(),e=je(b),f=m,g=0;g<e[A];g++)e[g]==c&&(Ad(e,g--,1),f=k);f&&(e[t](d),Ga(b,e[Gc](" ")));ta(a.valueThumb[F],a.valueThumb[F].top="");ta(a.extentThumb[F],a.extentThumb[F].top="");a.rangeHighlight&&(ta(a.rangeHighlight[F],a.rangeHighlight[F].top=""),ra(a.rangeHighlight[F],Oa(a.rangeHighlight[F],"")));vg(a)}}}
K.disposeInternal=function(){rg.superClass_.disposeInternal[H](this);this.incTimer_&&this.incTimer_.dispose();delete this.incTimer_;this.currentAnimation_&&this.currentAnimation_.dispose();delete this.currentAnimation_;delete this.valueThumb;delete this.extentThumb;this.rangeHighlight&&delete this.rangeHighlight;this.rangeModel.dispose();delete this.rangeModel;this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);this.mouseWheelHandler_&&(this.mouseWheelHandler_.dispose(),delete this.mouseWheelHandler_);
this.valueDragger_&&(this.valueDragger_.dispose(),delete this.valueDragger_);this.extentDragger_&&(this.extentDragger_.dispose(),delete this.extentDragger_)};K.unitIncrement_=1;K.setValue=function(a){yg(this,this.valueThumb,a)};function ug(a){var b=a.getElement();if(b){var c=xg(a);b[Gb]("aria-valuemin",c);c=wg(a);b[Gb]("aria-valuemax",c);a=og(a.rangeModel);b[Gb]("aria-valuenow",a)}};function Jg(a){rg[H](this,a);pg(this.rangeModel,0)}P(Jg,rg);function tg(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};function Kg(a){return Lg(a||arguments.callee.caller,[])}
function Lg(a,b){var c=[];if(0<=ud(b,a))c[t]("[...circular reference...]");else if(a&&50>b[A]){c[t](Mg(a)+"(");for(var d=a.arguments,e=0;e<d[A];e++){0<e&&c[t](", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Mg(f))?f:"[fn]";break;default:f=typeof f}40<f[A]&&(f=f[Tb](0,40)+"...");c[t](f)}b[t](a);c[t](")\n");try{c[t](Lg(a.caller,b))}catch(g){c[t]("[exception trying to get caller]\n")}}else a?
c[t]("[...long stack...]"):c[t]("[end]");return c[Gc]("")}function Mg(a){if(Ng[a])return Ng[a];a=""+a;if(!Ng[a]){var b=/function ([^\(]+)/[Za](a);Ng[a]=b?b[1]:"[Anonymous]"}return Ng[a]}var Ng={};function Og(a,b,c,d,e){"number"==typeof e||Pg++;this.time_=d||$c();this.goog_debug_LogRecord_prototype$level_=a;this.msg_=b;this.loggerName_=c;delete this.exception_;delete this.exceptionText_}Og[B].exception_=l;Og[B].exceptionText_=l;var Pg=0;function Qg(a){this.name_=a}Qg[B].goog_debug_Logger_prototype$parent_=l;Qg[B].goog_debug_Logger_prototype$level_=l;Qg[B].goog_debug_Logger_prototype$children_=l;Qg[B].handlers_=l;function Rg(a,b){Ba(this,a);this.value=b}Ea(Rg[B],function(){return this[z]});var Sg=new Rg("SHOUT",1200),Tg=new Rg("SEVERE",1E3),Ug=new Rg("WARNING",900),Vg=new Rg("INFO",800),Wg=new Rg("CONFIG",700),Xg=new Rg("FINE",500),Yg=new Rg("FINEST",300);
function Zg(a){if(a.goog_debug_Logger_prototype$level_)return a.goog_debug_Logger_prototype$level_;if(a.goog_debug_Logger_prototype$parent_)return Zg(a.goog_debug_Logger_prototype$parent_);sd("Root logger has no level set.");return l}
Qg[B].log=function(a,b,c){if(a.value>=Zg(this).value){a=this.getLogRecord(a,b,c);b="log:"+a.msg_;L[uc]&&(L[uc].timeStamp?L[uc].timeStamp(b):L[uc].markTimeline&&L[uc].markTimeline(b));L.msWriteProfilerMark&&L.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.handlers_)for(var e=0,f=j;f=c.handlers_[e];e++)f(d);b=b.goog_debug_Logger_prototype$parent_}}};
Qg[B].getLogRecord=function(a,b,c){var d=new Og(a,""+b,this.name_);if(c){d.exception_=c;var e;var f=arguments.callee.caller;try{var g;var h=Kc("window.location.href");if(Qc(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var p,r,u=m;try{p=c.lineNumber||c.line||"Not available"}catch(x){p="Not available",u=k}try{r=c[Bc]||c.filename||c.sourceURL||h}catch(D){r="Not available",u=k}g=u||!c.lineNumber||!c[Bc]||!c[fc]?{message:c.message,name:c[z],lineNumber:p,
fileName:r,stack:c[fc]||"Not available"}:c}e="Message: "+kd(g.message)+'\nUrl: <a href="view-source:'+g[Bc]+'" target="_new">'+g[Bc]+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+kd(g[fc]+"-> ")+"[end]\n\nJS stack traversal:\n"+kd(Kg(f)+"-> ")}catch(C){e="Exception trying to expose exception! You win, we lose. "+C}d.exceptionText_=e}return d};function $g(a,b){ah.log(Tg,a,b)}function bh(a,b){a.log(Ug,b,j)}function ch(a,b){a.log(Vg,b,j)}function dh(a){ah.log(Xg,a,j)}
function eh(a){ah.log(Yg,a,j)}var fh={},gh=l;function hh(){gh||(gh=new Qg(""),fh[""]=gh,gh.goog_debug_Logger_prototype$level_=Wg)}function ih(a){hh();var b;if(!(b=fh[a])){b=new Qg(a);var c=a.lastIndexOf("."),d=a[Tb](c+1),c=ih(a[Tb](0,c));c.goog_debug_Logger_prototype$children_||(c.goog_debug_Logger_prototype$children_={});c.goog_debug_Logger_prototype$children_[d]=b;b.goog_debug_Logger_prototype$parent_=c;fh[a]=b}return b};function jh(){this.services_={}}P(jh,Ce);jh[B].logger=ih("goog.messaging.AbstractChannel");jh[B].connect=function(a){a&&a()};jh[B].isConnected=Jc(k);jh[B].disposeInternal=function(){jh.superClass_.disposeInternal[H](this);Ee(this.logger);delete this.logger;delete this.services_;delete this.defaultService_};var kh=la("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function lh(a){if(mh){mh=m;var b=L[gc];if(b){var c=b[sc];if(c&&(c=(c=lh(c)[3]||l)&&ja(c))&&c!=b.hostname)mh=k,i(o())}}return a[ub](kh)}var mh=S;function nh(a){var b=lh(a),a=b[1],c=b[2],d=b[3],b=b[4],e=[];a&&e[t](a,":");d&&(e[t]("//"),c&&e[t](c,"@"),e[t](d),b&&e[t](":",b));return e[Gc]("")};var oh={1:"NativeMessagingTransport",2:"FrameElementMethodTransport",3:"IframeRelayTransport",4:"IframePollingTransport",5:"FlashTransport",6:"NixTransport"},ph=["pu","lru","pru","lpu","ppu"],qh={};function rh(){for(var a=10,b=sh,c=b[A],d="";0<a--;)d+=b.charAt(s[fb](s[nc]()*c));return d}var sh="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",ah=ih("goog.net.xpc");function th(a){this.goog_net_xpc_Transport$domHelper_=a||ne()}P(th,Ce);th[B].transportType=0;function V(a){return a.goog_net_xpc_Transport$domHelper_.goog_dom_DomHelper$document_[Kb]||a.goog_net_xpc_Transport$domHelper_.goog_dom_DomHelper$document_[Mb]};function uh(a,b){this.goog_net_xpc_Transport$domHelper_=b||ne();this.channel_=a;this.queue_=[];this.deliverQueuedCb_=N(this.deliverQueued_,this)}P(uh,th);K=uh[B];K.transportType=2;K.recursive_=m;K.timer_=0;K.connect=function(){0==vh(this.channel_)?(this.iframeElm_=this.channel_.iframeElement_,this.iframeElm_.XPC_toOuter=N(this.incoming_,this)):this.attemptSetup_()};
K.attemptSetup_=function(){var a=k;try{this.iframeElm_||(this.iframeElm_=V(this).frameElement),this.iframeElm_&&this.iframeElm_.XPC_toOuter&&(this.outgoing_=this.iframeElm_.XPC_toOuter,this.iframeElm_.XPC_toOuter.XPC_toInner=N(this.incoming_,this),a=m,this[wb]("tp","SETUP_ACK"),wh(this.channel_))}catch(b){$g("exception caught while attempting setup: "+b)}a&&(this.attemptSetupCb_||(this.attemptSetupCb_=N(this.attemptSetup_,this)),V(this)[E](this.attemptSetupCb_,100))};
K.transportServiceHandler=function(a){0==vh(this.channel_)&&!this.channel_.isConnected()&&"SETUP_ACK"==a?(this.outgoing_=this.iframeElm_.XPC_toOuter.XPC_toInner,wh(this.channel_)):i(o("Got unexpected transport message."))};K.incoming_=function(a,b){!this.recursive_&&0==this.queue_[A]?this.channel_.deliver_(a,b):(this.queue_[t]({serviceName:a,payload:b}),1==this.queue_[A]&&(this.timer_=V(this)[E](this.deliverQueuedCb_,1)))};
K.deliverQueued_=function(){for(;this.queue_[A];){var a=this.queue_[Ya]();this.channel_.deliver_(a.serviceName,a.payload)}};ua(K,function(a,b){this.recursive_=k;this.outgoing_(a,b);this.recursive_=m});K.disposeInternal=function(){uh.superClass_.disposeInternal[H](this);this.iframeElm_=this.outgoing_=l};function xh(a,b){this.goog_net_xpc_Transport$domHelper_=b||ne();this.channel_=a;this.goog_net_xpc_IframePollingTransport$sendUri_=this.channel_.cfg_.ppu;this.rcvUri_=this.channel_.cfg_.lpu;this.sendQueue_=[]}var yh,zh;P(xh,th);K=xh[B];K.transportType=4;K.sequence_=0;K.waitForAck_=m;K.goog_net_xpc_IframePollingTransport_prototype$initialized_=m;function Ah(a){return"googlexpc_"+a.channel_[z]+"_msg"}function Bh(a){return"googlexpc_"+a.channel_[z]+"_ack"}
K.connect=function(){if(!this.disposed_){dh("transport connect called");if(!this.goog_net_xpc_IframePollingTransport_prototype$initialized_){dh("initializing...");var a=Ah(this);this.msgIframeElm_=Ch(this,a);this.msgWinObj_=V(this)[Pb][a];a=Bh(this);this.ackIframeElm_=Ch(this,a);this.ackWinObj_=V(this)[Pb][a];this.goog_net_xpc_IframePollingTransport_prototype$initialized_=k}if(!Dh(this,Ah(this))||!Dh(this,Bh(this))){eh("foreign frames not (yet) present");if(1==vh(this.channel_)&&!this.reconnectFrame_)eh("innerPeerReconnect called"),
Ba(this.channel_,rh()),eh("switching channels: "+this.channel_[z]),Eh(this),this.goog_net_xpc_IframePollingTransport_prototype$initialized_=m,this.reconnectFrame_=Ch(this,"googlexpc_reconnect_"+this.channel_[z]);else if(0==vh(this.channel_)){eh("outerPeerReconnect called");for(var a=this.channel_.peerWindowObject_[Pb],b=a[A],c=0;c<b;c++){var d;try{a[c]&&a[c][z]&&(d=a[c][z])}catch(e){}if(d){var f=d[bc]("_");if(3==f[A]&&"googlexpc"==f[0]&&"reconnect"==f[1]){Ba(this.channel_,f[2]);Eh(this);this.goog_net_xpc_IframePollingTransport_prototype$initialized_=
m;break}}}}V(this)[E](N(this.connect,this),100)}else dh("foreign frames present"),this.msgReceiver_=new Fh(this,this.channel_.peerWindowObject_[Pb][Ah(this)],N(this.processIncomingMsg,this)),this.ackReceiver_=new Fh(this,this.channel_.peerWindowObject_[Pb][Bh(this)],N(this.processIncomingAck,this)),this.checkLocalFramesPresent_()}};
function Ch(a,b){eh("constructing sender frame: "+b);var c=q[Ab]("iframe"),d=c[F];d.position="absolute";d.top="-10px";ta(d,"10px");ra(d,"1px");Oa(d,"1px");c.id=Ba(c,b);c.src=a.goog_net_xpc_IframePollingTransport$sendUri_+"#INITIAL";V(a)[ac][jc][Ra](c);return c}function Eh(a){eh("deconstructSenderFrames called");a.msgIframeElm_&&(a.msgIframeElm_[Ac][kc](a.msgIframeElm_),a.msgIframeElm_=l,a.msgWinObj_=l);a.ackIframeElm_&&(a.ackIframeElm_[Ac][kc](a.ackIframeElm_),a.ackIframeElm_=l,a.ackWinObj_=l)}
function Dh(a,b){eh("checking for receive frame: "+b);try{var c=a.channel_.peerWindowObject_[Pb][b];if(!c||0!=c[gc][sc][v](a.rcvUri_))return m}catch(d){return m}return k}
K.checkLocalFramesPresent_=function(){var a=this.channel_.peerWindowObject_[Pb];!a[Bh(this)]||!a[Ah(this)]?(this.checkLocalFramesPresentCb_||(this.checkLocalFramesPresentCb_=N(this.checkLocalFramesPresent_,this)),V(this)[E](this.checkLocalFramesPresentCb_,100),dh("local frames not (yet) present")):(this.msgSender_=new Gh(this.goog_net_xpc_IframePollingTransport$sendUri_,this.msgWinObj_),this.ackSender_=new Gh(this.goog_net_xpc_IframePollingTransport$sendUri_,this.ackWinObj_),dh("local frames ready"),
V(this)[E](N(function(){this.msgSender_[wb]("SETUP");this.waitForAck_=k;dh("SETUP sent")},this),100))};
function Hh(a){if(a.sentConnectionSetupAck_&&a.rcvdConnectionSetupAck_){if(wh(a.channel_),a.deliveryQueue_){dh("delivering queued messages ("+a.deliveryQueue_[A]+")");for(var b=0,c;b<a.deliveryQueue_[A];b++)c=a.deliveryQueue_[b],a.channel_.deliver_(c.service,c.payload);delete a.deliveryQueue_}}else eh("checking if connected: ack sent:"+a.sentConnectionSetupAck_+", ack rcvd: "+a.rcvdConnectionSetupAck_)}
K.processIncomingMsg=function(a){eh("msg received: "+a);if("SETUP"==a)this.ackSender_&&(this.ackSender_[wb]("SETUP_ACK"),eh("SETUP_ACK sent"),this.sentConnectionSetupAck_=k,Hh(this));else if(this.channel_.isConnected()||this.sentConnectionSetupAck_){var b=a[v]("|"),c=a[tc](0,b),a=a[tc](b+1),b=c[v](",");if(-1==b){var d;this.ackSender_[wb]("ACK:"+c);Ih(this,a)}else d=c[tc](0,b),this.ackSender_[wb]("ACK:"+d),c=c[tc](b+1)[bc]("/"),b=ga(c[0],10),c=ga(c[1],10),1==b&&(this.parts_=[]),this.parts_[t](a),b==
c&&(Ih(this,this.parts_[Gc]("")),delete this.parts_)}else bh(ah,"received msg, but channel is not connected")};K.processIncomingAck=function(a){eh("ack received: "+a);"SETUP_ACK"==a?(this.waitForAck_=m,this.rcvdConnectionSetupAck_=k,Hh(this)):this.channel_.isConnected()?this.waitForAck_?ga(a[bc](":")[1],10)==this.sequence_?(this.waitForAck_=m,Jh(this)):bh(ah,"got ack with wrong sequence"):bh(ah,"got unexpected ack"):bh(ah,"received ack, but channel not connected")};
function Jh(a){if(!a.waitForAck_&&a.sendQueue_[A]){var b=a.sendQueue_[Ya]();++a.sequence_;a.msgSender_[wb](a.sequence_+b);eh("msg sent: "+a.sequence_+b);a.waitForAck_=k}}function Ih(a,b){var c=b[v](":"),d=b[Tb](0,c),c=b[tc](c+1);a.channel_.isConnected()?a.channel_.deliver_(d,c):((a.deliveryQueue_||(a.deliveryQueue_=[]))[t]({service:d,payload:c}),eh("queued delivery"))}K.MAX_FRAME_LENGTH_=3800;
ua(K,function(a,b){var c=a+":"+b;if(!R||b[A]<=this.MAX_FRAME_LENGTH_)this.sendQueue_[t]("|"+c);else for(var d=b[A],e=s.ceil(d/this.MAX_FRAME_LENGTH_),f=0,g=1;f<d;)this.sendQueue_[t](","+g+"/"+e+"|"+c[Tb](f,this.MAX_FRAME_LENGTH_)),g++,f+=this.MAX_FRAME_LENGTH_;Jh(this)});
K.disposeInternal=function(){xh.superClass_.disposeInternal[H](this);var a=Kh;xd(a,this.msgReceiver_);xd(a,this.ackReceiver_);this.msgReceiver_=this.ackReceiver_=l;ue(this.msgIframeElm_);ue(this.ackIframeElm_);this.msgWinObj_=this.ackWinObj_=this.msgIframeElm_=this.ackIframeElm_=l};
var Kh=[],Mh=N(function(){var a=m;try{for(var b=0,c=Kh[A];b<c;b++){var d;if(!(d=a)){var e=Kh[b],f=e.rcvFrame_[gc][sc];if(f!=e.currentLoc_){e.currentLoc_=f;var g=f[bc]("#")[1];g&&(g=g[Tb](1),e.cb_(ja(g)));d=k}else d=m}a=d}}catch(h){if(ch(ah,"receive_() failed: "+h),b=Kh[b].goog_net_xpc_IframePollingTransport_Receiver$transport_.channel_,ch(ah,"Transport Error"),Lh(b),!Kh[A])return}b=$c();a&&(yh=b);zh=n[E](Mh,1E3>b-yh?10:100)},xh);
function Nh(){dh("starting receive-timer");yh=$c();zh&&n.clearTimeout(zh);zh=n[E](Mh,10)}function Gh(a,b){this.goog_net_xpc_IframePollingTransport_Sender$sendUri_=a;this.sendFrame_=b;this.cycle_=0}ua(Gh[B],function(a){this.cycle_=++this.cycle_%2;a=this.goog_net_xpc_IframePollingTransport_Sender$sendUri_+"#"+this.cycle_+ba(a);try{S?this.sendFrame_[gc].href=a:this.sendFrame_[gc][cb](a)}catch(b){$g("sending failed",b)}Nh()});
function Fh(a,b,c){this.goog_net_xpc_IframePollingTransport_Receiver$transport_=a;this.rcvFrame_=b;this.cb_=c;this.currentLoc_=this.rcvFrame_[gc][sc][bc]("#")[0]+"#INITIAL";Kh[t](this);Nh()};function Oh(a,b){this.goog_net_xpc_Transport$domHelper_=b||ne();this.channel_=a;this.peerRelayUri_=this.channel_.cfg_.pru;this.peerIframeId_=this.channel_.cfg_.ifrid;S&&Ph()}P(Oh,th);if(S)var Qh=[],Rh=0,Ph=function(){Rh||(Rh=n[E](function(){Sh()},1E3))},Sh=function(a){for(var b=$c(),a=a||3E3;Qh[A]&&b-Qh[0].timestamp>=a;){var c=Qh[Ya]().iframeElement;ue(c);eh("iframe removed")}Rh=n[E](Th,1E3)},Th=function(){Sh()};var Uh={};K=Oh[B];K.transportType=3;
K.connect=function(){V(this).xpcRelay||(V(this).xpcRelay=Vh);this[wb]("tp","SETUP")};function Vh(a,b){var c=b[v](":"),d=b[Tb](0,c),e=b[Tb](c+1);if(!R||-1==(c=d[v]("|")))var f=d;else{var f=d[Tb](0,c),d=d[Tb](c+1),c=d[v]("+"),g=d[Tb](0,c),c=ga(d[Tb](c+1),10),h=Uh[g];h||(h=Uh[g]={fragments:[],received:0,expected:0});-1!=d[v]("++")&&(h.expected=c+1);h.fragments[c]=e;h.received++;if(h.received!=h.expected)return;e=h.fragments[Gc]("");delete Uh[g]}qh[a].deliver_(f,ja(e))}
K.transportServiceHandler=function(a){"SETUP"==a?(this[wb]("tp","SETUP_ACK"),wh(this.channel_)):"SETUP_ACK"==a&&wh(this.channel_)};ua(K,function(a,b){var c=ba(b),d=c[A];if(R&&1800<d)for(var e=s[fb](2147483648*s[nc]())[Wb](36)+s.abs(s[fb](2147483648*s[nc]())^$c())[Wb](36),f=0,g=0;f<d;g++){var h=c[Tb](f,1800),f=f+1800;Wh(this,a,h,e+(f>=d?"++":"+")+g)}else Wh(this,a,c)});
function Wh(a,b,c,d){if(R){var e=V(a)[ac][Ab]("div");e.innerHTML='<iframe onload="this.xpcOnload()"></iframe>';e=e.childNodes[0];e.xpcOnload=Xh}else e=V(a)[ac][Ab]("iframe"),S?Qh[t]({timestamp:$c(),iframeElement:e}):Qe(e,"load",Xh);var f=e[F];f.visibility="hidden";ra(f,Oa(e[F],"0px"));f.position="absolute";f=a.peerRelayUri_;f+="#"+a.channel_[z];a.peerIframeId_&&(f+=","+a.peerIframeId_);f+="|"+b;d&&(f+="|"+d);f+=":"+c;e.src=f;V(a)[ac][jc][Ra](e);eh("msg sent: "+f)}
function Xh(){eh("iframe-load");ue(this)}K.disposeInternal=function(){Oh.superClass_.disposeInternal[H](this);S&&Sh(0)};function Yh(a,b,c){this.goog_net_xpc_Transport$domHelper_=c||ne();this.channel_=a;this.peerHostname_=b||"*"}P(Yh,th);Yh[B].goog_net_xpc_NativeMessagingTransport_prototype$initialized_=m;Yh[B].transportType=1;var Zh={};
function $h(a){var b=a.event_[eb];if(!Qc(b))return m;var c=b[v]("|"),d=b[v](":");if(-1==c||-1==d)return m;var e=b[tc](0,c),c=b[tc](c+1,d),b=b[tc](d+1);dh("messageReceived: channel="+e+", service="+c+", payload="+b);if(d=qh[e])return d.deliver_(c,b,a.event_.origin),k;for(var f in qh)if(a=qh[f],1==vh(a)&&!a.isConnected()&&"tp"==c&&"SETUP"==b)return dh("changing channel name to "+e),Ba(a,e),delete qh[f],qh[e]=a,a.deliver_(c,b),k;ch(ah,'channel name mismatch; message ignored"');return m}K=Yh[B];
K.transportServiceHandler=function(a){switch(a){case "SETUP":this[wb]("tp","SETUP_ACK");break;case "SETUP_ACK":wh(this.channel_)}};K.connect=function(){var a=V(this),b=Uc(a),c=Zh[b];Rc(c)||(c=0);0==c&&Qe(a[yc]?a:a[ac],"message",$h,m,Yh);Zh[b]=c+1;this.goog_net_xpc_NativeMessagingTransport_prototype$initialized_=k;this.connectWithRetries_()};K.connectWithRetries_=function(){!this.channel_.isConnected()&&!this.disposed_&&(this[wb]("tp","SETUP"),V(this)[E](N(this.connectWithRetries_,this),100))};
ua(K,function(a,b){var c=this.channel_.peerWindowObject_;if(c){var d=c[yc]?c:c[ac];ua(this,function(a,b){dh("send(): payload="+b+" to hostname="+this.peerHostname_);d[yc](this.channel_[z]+"|"+a+":"+b,this.peerHostname_)});this[wb](a,b)}else dh("send(): window not ready")});K.disposeInternal=function(){Yh.superClass_.disposeInternal[H](this);if(this.goog_net_xpc_NativeMessagingTransport_prototype$initialized_){var a=V(this),b=Uc(a),c=Zh[b];Zh[b]=c-1;1==c&&Te(a[yc]?a:a[ac],"message",$h,m,Yh)}delete this[wb]};function ai(a,b){this.goog_net_xpc_Transport$domHelper_=b||ne();this.channel_=a;this.authToken_=a.at||"";this.remoteAuthToken_=a.rat||"";var c=V(this);if(!c.nix_setup_complete)try{c.execScript("Class GCXPC____NIXVBS_wrapper\n Private m_Transport\nPrivate m_Auth\nPublic Sub SetTransport(transport)\nIf isEmpty(m_Transport) Then\nSet m_Transport = transport\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\nIf isEmpty(m_Auth) Then\nm_Auth = auth\nEnd If\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken = m_Auth\nEnd Function\nPublic Sub SendMessage(service, payload)\n Call m_Transport.GCXPC____NIXJS_handle_message(service, payload)\nEnd Sub\nPublic Sub CreateChannel(channel)\n Call m_Transport.GCXPC____NIXJS_create_channel(channel)\nEnd Sub\nPublic Sub GCXPC____NIXVBS_container()\n End Sub\nEnd Class\n Function GCXPC____NIXVBS_get_wrapper(transport, auth)\nDim wrap\nSet wrap = New GCXPC____NIXVBS_wrapper\nwrap.SetTransport transport\nwrap.SetAuth auth\nSet GCXPC____NIXVBS_get_wrapper = wrap\nEnd Function",
"vbscript"),c.nix_setup_complete=k}catch(d){$g("exception caught while attempting global setup: "+d)}this.GCXPC____NIXJS_handle_message=this.handleMessage_;this.GCXPC____NIXJS_create_channel=this.createChannel_}P(ai,th);K=ai[B];K.transportType=6;K.localSetupCompleted_=m;K.nixChannel_=l;K.connect=function(){0==vh(this.channel_)?this.attemptOuterSetup_():this.attemptInnerSetup_()};
K.attemptOuterSetup_=function(){if(!this.localSetupCompleted_){var a=this.channel_.iframeElement_;try{a.contentWindow.opener=V(this).GCXPC____NIXVBS_get_wrapper(this,this.authToken_),this.localSetupCompleted_=k}catch(b){$g("exception caught while attempting setup: "+b)}this.localSetupCompleted_||V(this)[E](N(this.attemptOuterSetup_,this),100)}};
K.attemptInnerSetup_=function(){if(!this.localSetupCompleted_){try{var a=V(this).opener;if(a&&"GCXPC____NIXVBS_container"in a){this.nixChannel_=a;if(this.nixChannel_.GetAuthToken()!=this.remoteAuthToken_){$g("Invalid auth token from other party");return}this.nixChannel_.CreateChannel(V(this).GCXPC____NIXVBS_get_wrapper(this,this.authToken_));this.localSetupCompleted_=k;wh(this.channel_)}}catch(b){$g("exception caught while attempting setup: "+b);return}this.localSetupCompleted_||V(this)[E](N(this.attemptInnerSetup_,
this),100)}};K.createChannel_=function(a){("unknown"!=typeof a||!("GCXPC____NIXVBS_container"in a))&&$g("Invalid NIX channel given to createChannel_");this.nixChannel_=a;this.nixChannel_.GetAuthToken()!=this.remoteAuthToken_?$g("Invalid auth token from other party"):wh(this.channel_)};K.handleMessage_=function(a,b){V(this)[E](N(function(){this.channel_.deliver_(a,b,j)},this),1)};
ua(K,function(a,b){"unknown"!==typeof this.nixChannel_&&$g("NIX channel not connected");this.nixChannel_.SendMessage(a,b)});K.disposeInternal=function(){ai.superClass_.disposeInternal[H](this);this.nixChannel_=l};function bi(a,b){this.services_={};for(var c=0,d;d=ph[c];c++)d in a&&!/^https?:\/\//[Xa](a[d])&&i(o("URI "+a[d]+" is invalid for field "+d));this.cfg_=a;Ba(this,this.cfg_.cn||rh());this.goog_net_xpc_CrossPageChannel$domHelper_=b||ne();this.deferredDeliveries_=[];a.lpu=a.lpu||nh((this.goog_net_xpc_CrossPageChannel$domHelper_.goog_dom_DomHelper$document_[Kb]||this.goog_net_xpc_CrossPageChannel$domHelper_.goog_dom_DomHelper$document_[Mb])[gc][sc])+"/robots.txt";a.ppu=a.ppu||nh(a.pu||"")+"/robots.txt";
qh[this[z]]=this;Qe(n,"unload",ci);ch(ah,"CrossPageChannel created: "+this[z])}P(bi,jh);var di=/^%*tp$/,ei=/^%+tp$/;K=bi[B];K.goog_net_xpc_CrossPageChannel_prototype$transport_=l;K.state_=1;K.isConnected=function(){return 2==this.state_};K.peerWindowObject_=l;K.iframeElement_=l;K.deferConnect_=m;K.connectDeferred_=m;
K.connect=function(a){this.connectCb_=a||Lc;if(this.deferConnect_)ch(ah,"connect() deferred"),this.connectDeferred_=k;else{this.connectDeferred_=m;ch(ah,"connect()");this.cfg_.ifrid&&(this.iframeElement_=this.goog_net_xpc_CrossPageChannel$domHelper_.getElement(this.cfg_.ifrid));this.iframeElement_&&((a=this.iframeElement_.contentWindow)||(a=n[Pb][this.cfg_.ifrid]),this.peerWindowObject_=a);this.peerWindowObject_||(n==top&&i(o("CrossPageChannel: Can't connect, peer window-object not set.")),this.peerWindowObject_=
n.parent);if(!this.goog_net_xpc_CrossPageChannel_prototype$transport_){if(!this.cfg_.tp){var a=this.cfg_,b;if(Sc(q[yc])||Sc(n[yc])||R&&n[yc])b=1;else if(Sd)b=2;else if(R&&this.cfg_.pru)b=3;else{var c;if(c=R){c=m;try{b=n.opener,n.opener={},c=ye(n,"opener"),n.opener=b}catch(d){}}b=c?6:4}a.tp=b}switch(this.cfg_.tp){case 1:this.goog_net_xpc_CrossPageChannel_prototype$transport_=new Yh(this,this.cfg_.ph,this.goog_net_xpc_CrossPageChannel$domHelper_);break;case 6:this.goog_net_xpc_CrossPageChannel_prototype$transport_=
new ai(this,this.goog_net_xpc_CrossPageChannel$domHelper_);break;case 2:this.goog_net_xpc_CrossPageChannel_prototype$transport_=new uh(this,this.goog_net_xpc_CrossPageChannel$domHelper_);break;case 3:this.goog_net_xpc_CrossPageChannel_prototype$transport_=new Oh(this,this.goog_net_xpc_CrossPageChannel$domHelper_);break;case 4:this.goog_net_xpc_CrossPageChannel_prototype$transport_=new xh(this,this.goog_net_xpc_CrossPageChannel$domHelper_)}this.goog_net_xpc_CrossPageChannel_prototype$transport_?ch(ah,
"Transport created: "+(oh[this.goog_net_xpc_CrossPageChannel_prototype$transport_.transportType]||"")):i(o("CrossPageChannel: No suitable transport found!"))}for(this.goog_net_xpc_CrossPageChannel_prototype$transport_.connect();0<this.deferredDeliveries_[A];)this.deferredDeliveries_[Ya]()()}};
function Lh(a){a.isConnected()&&(a.state_=3,a.goog_net_xpc_CrossPageChannel_prototype$transport_.dispose(),a.goog_net_xpc_CrossPageChannel_prototype$transport_=l,a.connectCb_=l,a.connectDeferred_=m,Fa(a.deferredDeliveries_,0),ch(ah,'Channel "'+a[z]+'" closed'))}function wh(a){a.isConnected()||(a.state_=2,ch(ah,'Channel "'+a[z]+'" connected'),a.connectCb_())}
ua(K,function(a,b){this.isConnected()?fa(this.peerWindowObject_.closed)?($g("Peer has disappeared."),Lh(this)):(Tc(b)&&(b=dd(b)),this.goog_net_xpc_CrossPageChannel_prototype$transport_[wb](fi(a),b)):$g("Can't send. Channel not connected.")});
K.deliver_=function(a,b,c){if(this.connectDeferred_)this.deferredDeliveries_[t](N(this.deliver_,this,a,b,c));else{var d=this.cfg_.ph;if(/^[\s\xa0]*$/[Xa](c==l?"":""+c)||/^[\s\xa0]*$/[Xa](d==l?"":""+d)||c==this.cfg_.ph)if(this.disposed_)bh(ah,"CrossPageChannel::deliver_(): Disposed.");else if(!a||"tp"==a)this.goog_net_xpc_CrossPageChannel_prototype$transport_.transportServiceHandler(b);else if(this.isConnected()){if(a=a[cb](/%[0-9a-f]{2}/gi,ja),a=ei[Xa](a)?a[tc](1):a,c=this.services_[a],c||(this.defaultService_?
c={callback:Zc(this.defaultService_,a),objectPayload:Tc(b)}:(bh(this.logger,'Unknown service name "'+a+'"'),c=l)),c){var e;a:{if((d=c.objectPayload)&&Qc(b))try{e=bd(b);break a}catch(f){bh(this.logger,"Expected JSON payload for "+a+', was "'+b+'"');e=l;break a}else if(!d&&!Qc(b)){e=dd(b);break a}e=b}e!=l&&c.callback(e)}}else ch(ah,"CrossPageChannel::deliver_(): Not connected.");else bh(ah,'Message received from unapproved origin "'+c+'" - rejected.')}};
function fi(a){di[Xa](a)&&(a="%"+a);return a[cb](/[%:|]/g,ba)}function vh(a){return n.parent==a.peerWindowObject_?1:0}K.disposeInternal=function(){bi.superClass_.disposeInternal[H](this);Lh(this);this.iframeElement_=this.peerWindowObject_=l;delete qh[this[z]];Fa(this.deferredDeliveries_,0)};function ci(){for(var a in qh){var b=qh[a];b&&b.dispose()}};function gi(){this.relativeTimeStart_=$c()}var hi=new gi;gi[B].set=function(a){this.relativeTimeStart_=a};gi[B].get=function(){return this.relativeTimeStart_};function ii(a){this.prefix_=a||"";this.startTimeProvider_=hi}K=ii[B];K.showAbsoluteTime=k;K.showRelativeTime=k;K.showLoggerName=k;K.showExceptionText=m;K.showSeverityLevel=m;function ji(a){return 10>a?"0"+a:""+a}function ki(a,b){var c=(a.time_-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function li(a){ii[H](this,a)}P(li,ii);function mi(){this.publishHandler_=N(this.addLogRecord,this);this.formatter_=new li;this.formatter_.showAbsoluteTime=m;this.isCapturing_=this.formatter_.showExceptionText=m;this.logBuffer_="";this.filteredLoggers_={}}
mi[B].addLogRecord=function(a){if(!this.filteredLoggers_[a.loggerName_]){var b;b=this.formatter_;var c=[];c[t](b.prefix_," ");if(b.showAbsoluteTime){var d=new Date(a.time_);c[t]("[",ji(d.getFullYear()-2E3)+ji(d.getMonth()+1)+ji(d.getDate())+" "+ji(d.getHours())+":"+ji(d.getMinutes())+":"+ji(d.getSeconds())+"."+ji(s[fb](d.getMilliseconds()/10)),"] ")}b.showRelativeTime&&c[t]("[",ki(a,b.startTimeProvider_.get()),"s] ");b.showLoggerName&&c[t]("[",a.loggerName_,"] ");b.showSeverityLevel&&c[t]("[",a.goog_debug_LogRecord_prototype$level_[z],
"] ");c[t](a.msg_,"\n");b.showExceptionText&&a.exception_&&c[t](a.exceptionText_,"\n");b=c[Gc]("");if(ni&&ni.firebug)switch(a.goog_debug_LogRecord_prototype$level_){case Sg:ni.info(b);break;case Tg:ni.error(b);break;case Ug:ni.warn(b);break;default:ni.debug(b)}else ni?ni.log(b):n[yb]?n[yb].postError(b):this.logBuffer_+=b}};var oi=l,ni=n[uc];function pi(a){Fa(this,a[A]||a);for(var b=0;b<this[A];b++)this[b]=a[b]||0}pi[B].goog_vec_Float32Array_prototype$BYTES_PER_ELEMENT=4;pi[B].set=function(a,b){for(var b=b||0,c=0;c<a[A]&&b+c<this[A];c++)this[b+c]=a[c]};Ea(pi[B],ma[B][Gc]);"undefined"==typeof Float32Array&&(sa(pi,4),sa(pi[B],pi[B].goog_vec_Float32Array_prototype$BYTES_PER_ELEMENT),pi[B].set=pi[B].set,Ea(pi[B],pi[B][Wb]),ad("Float32Array",pi));function qi(a){Fa(this,a[A]||a);for(var b=0;b<this[A];b++)this[b]=a[b]||0}qi[B].goog_vec_Float64Array_prototype$BYTES_PER_ELEMENT=8;qi[B].set=function(a,b){for(var b=b||0,c=0;c<a[A]&&b+c<this[A];c++)this[b+c]=a[c]};Ea(qi[B],ma[B][Gc]);"undefined"==typeof Float64Array&&(sa(qi,8),sa(qi[B],qi[B].goog_vec_Float64Array_prototype$BYTES_PER_ELEMENT),qi[B].set=qi[B].set,Ea(qi[B],qi[B][Wb]),ad("Float64Array",qi));function ri(a,b,c){var d=new Float32Array(3);d[0]=a;d[1]=b;d[2]=c;return d}function si(a){var b=a[0],c=a[1],a=a[2];return s[Eb](b*b+c*c+a*a)}function ti(a,b){var c=1/si(a);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function ui(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e};function vi(){return new Float32Array(16)}function wi(){var a=vi();a[0]=a[5]=a[10]=a[15]=1;return a}function xi(a,b,c,d,e,f,g,h,p,r,u,x,D,C,X,J,M){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=p;a[8]=r;a[9]=u;a[10]=x;a[11]=D;a[12]=C;a[13]=X;a[14]=J;a[15]=M}function yi(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1}
function zi(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],p=a[5],r=a[6],u=a[7],x=a[8],D=a[9],C=a[10],X=a[11],J=a[12],M=a[13],G=a[14],a=a[15],Q=b[0],O=b[1],da=b[2],Z=b[3],aa=b[4],va=b[5],wa=b[6],xa=b[7],mb=b[8],nb=b[9],ob=b[10],pb=b[11],U=b[12],vf=b[13],wf=b[14],b=b[15];c[0]=d*Q+h*O+x*da+J*Z;c[1]=e*Q+p*O+D*da+M*Z;c[2]=f*Q+r*O+C*da+G*Z;c[3]=g*Q+u*O+X*da+a*Z;c[4]=d*aa+h*va+x*wa+J*xa;c[5]=e*aa+p*va+D*wa+M*xa;c[6]=f*aa+r*va+C*wa+G*xa;c[7]=g*aa+u*va+X*wa+a*xa;c[8]=d*mb+h*nb+x*ob+J*pb;c[9]=e*mb+p*nb+D*ob+
M*pb;c[10]=f*mb+r*nb+C*ob+G*pb;c[11]=g*mb+u*nb+X*ob+a*pb;c[12]=d*U+h*vf+x*wf+J*b;c[13]=e*U+p*vf+D*wf+M*b;c[14]=f*U+r*vf+C*wf+G*b;c[15]=g*U+u*vf+X*wf+a*b}
function Ai(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],p=a[6],r=a[7],u=a[8],x=a[9],D=a[10],C=a[11],X=a[12],J=a[13],M=a[14],G=a[15],Q=c*h-d*g,O=c*p-e*g,da=c*r-f*g,Z=d*p-e*h,aa=d*r-f*h,va=e*r-f*p,wa=u*J-x*X,xa=u*M-D*X,mb=u*G-C*X,nb=x*M-D*J,ob=x*G-C*J,pb=D*G-C*M,U=Q*pb-O*ob+da*nb+Z*mb-aa*xa+va*wa;0!=U&&(U=1/U,b[0]=(h*pb-p*ob+r*nb)*U,b[1]=(-d*pb+e*ob-f*nb)*U,b[2]=(J*va-M*aa+G*Z)*U,b[3]=(-x*va+D*aa-C*Z)*U,b[4]=(-g*pb+p*mb-r*xa)*U,b[5]=(c*pb-e*mb+f*xa)*U,b[6]=(-X*va+M*da-G*O)*U,b[7]=(u*va-D*da+
C*O)*U,b[8]=(g*ob-h*mb+r*wa)*U,b[9]=(-c*ob+d*mb-f*wa)*U,b[10]=(X*aa-J*da+G*Q)*U,b[11]=(-u*aa+x*da-C*Q)*U,b[12]=(-g*nb+h*xa-p*wa)*U,b[13]=(c*nb-d*xa+e*wa)*U,b[14]=(-X*Z+J*O-M*Q)*U,b[15]=(u*Z-x*O+D*Q)*U)}function Bi(a,b,c){var d=b[0],e=b[1],b=b[2],f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}
function Ci(a,b,c,d){var e=s.cos(b),b=s.sin(b),f=s.cos(c),c=s.sin(c),g=s.cos(d),d=s.sin(d);a[0]=e*g-f*b*d;a[1]=f*e*d+g*b;a[2]=d*c;a[3]=0;a[4]=-e*d-g*f*b;a[5]=e*f*g-b*d;a[6]=g*c;a[7]=0;a[8]=c*b;a[9]=-e*c;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1}function Di(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],f=a[2]*b+a[6]*c+a[10]*d+a[14],g=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=f;a[15]=g}
function Ei(a,b,c,d,e){var f=a[0],g=a[1],h=a[2],p=a[3],r=a[4],u=a[5],x=a[6],D=a[7],C=a[8],X=a[9],J=a[10],M=a[11],G=s.cos(b),Q=s.sin(b),O=1-G,b=c*c*O+G,da=c*d*O+e*Q,Z=c*e*O-d*Q,aa=c*d*O-e*Q,va=d*d*O+G,wa=d*e*O+c*Q,xa=c*e*O+d*Q,c=d*e*O-c*Q,e=e*e*O+G;xi(a,f*b+r*da+C*Z,g*b+u*da+X*Z,h*b+x*da+J*Z,p*b+D*da+M*Z,f*aa+r*va+C*wa,g*aa+u*va+X*wa,h*aa+x*va+J*wa,p*aa+D*va+M*wa,f*xa+r*c+C*e,g*xa+u*c+X*e,h*xa+x*c+J*e,p*xa+D*c+M*e,a[12],a[13],a[14],a[15])}new Float64Array(3);new Float64Array(3);new Float64Array(4);
new Float64Array(4);new Float64Array(4);new Float64Array(16);var Fi=m;oi||(oi=new mi);if(-1!=n[gc][sc][v]("Debug=true")){var Gi=oi;if(k!=Gi.isCapturing_){hh();var Hi=gh,Ii=Gi.publishHandler_;Hi.handlers_||(Hi.handlers_=[]);Hi.handlers_[t](Ii);Gi.isCapturing_=k}}var Ji=ih("katamari.Logger");Ji.goog_debug_Logger_prototype$level_=Vg;function W(a){Fi&&ch(Ji,a)};function Ki(a,b){if(a){var c=new XMLHttpRequest;c[Wa]("GET",a);qa(c,function(){4==c[xb]&&b&&b(c[gb],a,l)});c[wb]()}}function Li(a){a=a||n.event;a[kb]&&a[kb]();a.returnValue&&(a.returnValue=m);a.stopPropogation&&a.stopPropogation();a.cancel=k;(a[mc]!=l?a[mc]:a.srcElement).ondragstart=Jc(m);return m};function Mi(){}Mi[B].onConnect_=function(){};Mi[B].onMessage=function(a){this.msgCallback_&&this.msgCallback_(a)};Mi[B].initIframeXpc=function(a){this.msgCallback_=a;this.channel_=new bi({cn:"viewer3dxpc"});this.channel_.services_.VIEWER_MESSENGER={callback:N(this.onMessage,this),objectPayload:m};this.channel_.connect(N(this.onConnect_,this))};Mi[B].sendMessage=function(a){this.channel_[wb]("VIEWER_MESSENGER",a)};function Ni(){}P(Ni,Mi);K=Ni[B];
K.onMessage=function(a){a=bd(a);"setMode"==a.msg?"portrait"==a[eb]?this.portraitCb_&&this.portraitCb_():"landscape"==a[eb]?this.landscapeCb_&&this.landscapeCb_():"invisible"==a[eb]&&this.hideCallback_&&this.hideCallback_():"onAction"==a.msg?this.onAction_&&this.onAction_():"onLoad"==a.msg?this.onLoad_&&this.onLoad_(a[eb]):"onSwitchToClassic"==a.msg?this.onSwitchToClassic_&&this.onSwitchToClassic_():"onSwitchTo3d"==a.msg?this.onSwitchTo3d_&&this.onSwitchTo3d_():"onBuyButton"==a.msg&&this.onBuyButton_&&
this.onBuyButton_()};K.initIframeXpc=function(a,b,c){this.portraitCb_=a;this.landscapeCb_=b;this.hideCallback_=c;Ni.superClass_.initIframeXpc(N(this.onMessage,this))};K.showPortraitViewer=function(){this[lc]({msg:"setMode",data:"portrait"})};K.showLandscapeViewer=function(){this[lc]({msg:"setMode",data:"landscape"})};K.hideViewer=function(){this[lc]({msg:"setMode",data:"invisible"})};function Oi(a,b,c,d){this.state_=0;this.katamari_Fader$element_=a;this.fadein_=1E3*b;this.fadeout_=1E3*c;this.waitfor_=d==l?l:1E3*d;Pi(this)}function Pi(a){a.state_=0;Qi(a)}Oi[B].signalInteraction=function(){0!=this.state_&&(2==this.state_?(Ri(this),Si(this)):3!=this.state_&&(4==this.state_||5==this.state_?Si(this):(this.animation_&&this.animation_[Vb](),Ri(this))))};function Si(a){a.timer_&&(clearTimeout(a.timer_),a.timer_=l);a.waitfor_!=l&&(a.timer_=setTimeout(function(){Ti(a,6)},a.waitfor_))}
function Ri(a){a.animation_=new Ef(a.katamari_Fader$element_,a.fadeout_);Qe(a.animation_,"begin",function(){a.state_=3});Qe(a.animation_,"end",function(){a.animation_=l;a.state_=4;Qi(a)});a.animation_[Ib]()}function Ti(a,b){a.animation_=new Ff(a.katamari_Fader$element_,a.fadein_);Qe(a.animation_,"begin",function(){a.state_=b;a[Ua](0)});Qe(a.animation_,"end",function(){a.state_=2;a.animation_=l;a[Ua](1)});a.animation_[Ib]()}
pa(Oi[B],function(a){Ma(this.katamari_Fader$element_[F],"");this.katamari_Fader$element_[F].opacity=a});function Qi(a){Ma(a.katamari_Fader$element_[F],"none")};function Ui(a){n.viewerTimeTracker&&n.viewerTimeTracker._push?(n.viewerTimeTracker._push(a),W("Google analytics: "+a)):W("Google analytics object not set up")}ad("katamari.Tracker.trackAction",Ui);function Vi(a,b,c){W("katamari.Tracker.stamp called");n.viewerTimeTracker&&n.viewerTimeTracker._stamp?(n.viewerTimeTracker._stamp(b,c),W("Recorded analytics: ["+a+", "+b+", "+c+"]")):W("Viewer analytics not set up for "+a)}ad("katamari.Tracker.stamp",Vi);n.requestAnimationFrame||(n.requestAnimationFrame=n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(a){n[E](a,1E3/30)});function Wi(a,b){Na(this,a);this.katamari_Animation$update=b;this.animating=m}Wi[B].start=function(){var a=this.animating=k,b=this.katamari_Animation$update,c=this[Cc];(function e(){a&&b()&&n.requestAnimationFrame(e,c)})()};Wi[B].constantSpeedEnvelope=function(a){return a};
Wi[B].slowInSlowOutEnvelope=function(a){if(0.5>a)return 2*a*a;a=1-a;return 1-2*a*a};function Xi(a,b,c,d){this.x0=a;this.y0=b;this.x1=c;this.y1=d}Xi[B].clone=function(){return new Xi(this.x0,this.y0,this.x1,this.y1)};function Yi(a,b,c,d,e,f,g){this.connectorWidth_=e;this.dashLen_=f;this.color_=g;this.startX_=a<c?5:a-c+5;this.endX_=a<c?c-a+5:5;this.startY_=b<d?5:b-d+5;this.endY_=b<d?d-b+5:5;this.midX_=(this.startX_+this.endX_)/2;this.midY_=(this.startY_+this.endY_)/2;e=(this.endX_-this.startX_)/2;this.cnvElem_=q[Ab]("canvas");this.cnvElem_.id="connector-"+(new Date)[Ob]();this.cnvElem_[F].position="absolute";ta(this.cnvElem_[F],s.min(a,c)-5);this.cnvElem_[F].top=s.min(b,d)-5;this.cnvElem_[F].zIndex=100;ra(this.cnvElem_,
s.abs(c-a)+10);Oa(this.cnvElem_,s.abs(d-b)+10);this.cnvElem_[F].pointerEvents="none";q[jc][Ra](this.cnvElem_);this.cnvCtx_=this.cnvElem_.getContext("2d");a=[];a[0]=new Cd(this.startX_,this.startY_);a[1]=new Cd(this.startX_+e,this.startY_);a[2]=new Cd(this.midX_,this.midY_);a[3]=new Cd(this.endX_-e,this.endY_);a[4]=new Cd(this.endX_,this.endY_);this.lines_=[];this.lines_[0]=new Xi(a[0].x,a[0].y,a[1].x,a[1].y);this.lines_[1]=new Xi(a[1].x,a[1].y,a[2].x,a[2].y);this.lines_[2]=new Xi(a[2].x,a[2].y,a[3].x,
a[3].y);this.lines_[3]=new Xi(a[3].x,a[3].y,a[4].x,a[4].y)}function Zi(a,b){a.cnvCtx_.beginPath();a.cnvCtx_.arc(b.x,b.y,4,0,2*s.PI,k);a.cnvCtx_.closePath();a.cnvCtx_.fill()}function $i(a,b){return new Cd(a.x0+b*(a.x1-a.x0),a.y0+b*(a.y1-a.y0))}function aj(a,b,c){a=$i(a,c);b=$i(b,c);return $i(new Xi(a.x,a.y,b.x,b.y),c)}
function bj(a){function b(){r.cnvCtx_.beginPath();for(var a=0;a<u&&p<d[A];a++,p++){var c=r,e=d[p][0],f=d[p][1];c.cnvCtx_.moveTo(e.x,e.y);c.cnvCtx_.lineTo(f.x,f.y)}r.cnvCtx_.stroke();p==d[A]?r.cnvCtx_.restore():n[E](b,x)}a.cnvCtx_.save();a.cnvCtx_.fillStyle=a.color_;a.cnvCtx_.strokeStyle=a.color_;a.cnvCtx_.lineWidth=a.connectorWidth_;Zi(a,new Cd(a.startX_,a.startY_));var c=l,d=[];a.dashDrawn_=k;for(var e=0;e<a.lines_[A];e+=2)for(var f=0;f<a.midX_;f++){var g=e,g=aj(a.lines_[g],a.lines_[g+1],f/a.midX_),
c=!c?g:c,h=s[Eb](s.pow(c.x-g.x,2)+s.pow(c.y-g.y,2));0==a.dashLen_?(d[t]([c,g]),c=g):h>=a.dashLen_&&(a.dashDrawn_?a.dashDrawn_=m:(d[t]([c,g]),a.dashDrawn_=k),c=g)}var p=0,r=a,u=s[fb](s.max(1,d[A]*s.pow(0.7,6))),x=s.min(300,100*(s.log(100)-s.log(70)));n[E](b,0)}Yi[B].destroy=function(){Ma(this.cnvElem_[F],"none");try{q[jc][kc](this.cnvElem_)}catch(a){}};function cj(a,b){this.calloutsFileUrl_=a;this.calloutData_={};this.calloutButtons_={};this.activeCalloutButton_=l;this.listContainer_=q[hb](b)||q[jc]}function dj(a){if(a.calloutsFileUrl_){var b=new XMLHttpRequest;b[Wa]("GET",a.calloutsFileUrl_);qa(b,function(){4==b[xb]&&(a.calloutData_=bd(b[gb]),a.onLoad_(l))});b[wb]()}}function ej(a){var b=T.calloutLoader;b.listContainer_!=q[jc]&&(fj(b),Ma(b.listContainer_[F],a?"block":"none"))}
cj[B].paintCallout=function(a,b,c){var d=this.listContainer_[ic]-5,e=this.listContainer_[Dc]+this.activeCalloutButton_[Dc]+this.activeCalloutButton_[Fc]/2;this.displayPoiCallback_?this.displayPoiCallback_(d,e,a,b,c):(this.connector_&&this.connector_.destroy(),this.connector_=new Yi(d,e,a,b,3,4,this.activeCalloutButton_[oc]("connector-color")),bj(this.connector_))};function fj(a){a.hidePoiCallback_?a.hidePoiCallback_(j,j,j):a.connector_&&a.connector_.destroy();gj(a)}
function gj(a){a.prevActiveButton_&&Ga(a.prevActiveButton_,"callout-button");a.prevActiveButton_=l}function hj(a,b,c,d){a.activateCallback_=b;a.displayPoiCallback_=c;a.hidePoiCallback_=d}cj[B].onLoad_=function(a){ij(this);a&&a(this.calloutData_)};
function ij(a){for(var b in a.calloutData_.callouts){var c=q[hb]("callout-"+b);if(c){a.calloutButtons_[b]=c;var d=a,e=function(a){a=!a?n.event:a;d.activeCalloutButton_=a.srcElement||a[mc];if(d.prevActiveButton_==d.activeCalloutButton_)fj(d);else{var a=d,b=d.activeCalloutButton_[oc]("callout");fj(a);Ga(a.activeCalloutButton_,"callout-button callout-button-active");a.activateCallback_&&a.activateCallback_(a.calloutData_.callouts[b],N(a.paintCallout,a));d.prevActiveButton_=d.activeCalloutButton_;Ui(["_trackEvent",
"Viewer Interaction","Call Out",d.activeCalloutButton_[oc]("callout")])}};a.calloutButtons_[b]&&(a.calloutButtons_[b].title=a.calloutButtons_[b].textContent||a.calloutButtons_[b].innerText,La(a.calloutButtons_[b],e),a.calloutButtons_[b].onkeypress=function(a){13==a[Db]&&e(a)})}}};function jj(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function kj(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=1/s[Eb](c*c+d*d+e*e+f*f);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c}function lj(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=2*c,h=2*d,p=2*e,r=g*f,u=h*f,f=p*f,g=g*c,x=h*c,c=p*c,h=h*d,d=p*d,e=p*e;b[0]=1-(h+e);b[1]=x+f;b[2]=c-u;b[3]=0;b[4]=x-f;b[5]=1-(g+e);b[6]=d+r;b[7]=0;b[8]=c+u;b[9]=d-r;b[10]=1-(g+h);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1};function mj(){this.onGrabListener_=l}function nj(a,b,c){a.completionListeners_||(a.completionListeners_=[]);a.completionListeners_[b]=c}function oj(a){for(var b in a.completionListeners_){var c=a.completionListeners_[b];c&&c()}}function pj(a,b){a.onGrabListener_=b}
mj[B].onmousedown=function(a,b){a.curX=b[Qb];a.curY=b[Rb];a.dragging=k;Ui(["_trackEvent","Viewer Interaction","Drag","WebGL"]);q[jc][zb]();q.onselectstart=Jc(m);var c=this;Ja(q,function(b){c.onmousemove(a,b)});oa(q,function(b){c.onmouseup(a,b)});this.onGrabListener_&&this.onGrabListener_()};oa(mj[B],function(a){a.dragging=m;Ja(q,l);oa(q,l);oj(this)});
Ja(mj[B],function(a,b){if(a.dragging){var c=b[Qb],d=b[Rb],e=a.curX-c,f=a.curY-d;a.curX=c;a.curY=d;d=3*a.pose_[I];c=3*a.pose_[I];f=qj(a)+d*f;e=(rj(a)+c*e)%360;f=pf(f,-90,90);sj(a,f);tj(a,e);uj(a)}});mj[B].wheelHandler=function(a,b){var c=1.05;b.shiftKey&&(c=1.005);vj(a,a.pose_[I]*(0<(b.detail||b[rc])?1/c:c));uj(a);wj(a,"Scroll");this.onGrabListener_&&this.onGrabListener_();oj(this)};function xj(){}P(xj,mj);function yj(){}P(yj,mj);
Ja(yj[B],function(a,b){if(a.dragging){var c=b[Qb],d=b[Rb],e=a.curX-c,f=a.curY-d;a.curX=c;a.curY=d;zj(a,e,f)}});yj[B].wheelHandler=function(a,b){var c=1.05;b.shiftKey&&(c=1.005);vj(a,a.pose_[I]*(0<(b.detail||b[rc])?1/c:c));zj(a,0,0);wj(a,"Scroll");this.onGrabListener_&&this.onGrabListener_();oj(this)};
function zj(a,b,c){var d=3*a.pose_[I],d=(rj(a)+d*b)%360;tj(a,d);var d=a.pose_.translation[1],e=qj(a),f=pf(1-(a.pose_[I]-a.minZoom)/(0.8*(a.maxZoom-a.minZoom)),0.001,1),g=-0.85*f,f=0.85*f;0==b&&0==c&&(d=pf(d,g,f),a.pose_.translation[1]=d);d>g&&d<f&&-5<e&&5>e?(d+=0.025*a.pose_[I]*c,d=pf(d,g,f),a.pose_.translation[1]=d):(e+=3*a.pose_[I]*c,e=pf(e,-90,90),d<=g&&0<=c&&0<=e?(e=0,a.pose_.translation[1]=0.99*g):d>=f&&0>=c&&0>=e&&(e=0,a.pose_.translation[1]=0.99*f),sj(a,e));uj(a)}
function Aj(a,b){this.prevVector_=ri(0,1,0);this.curVector_=ri(0,1,0);this.prevQuat_=new Float32Array(4);this.curQuat_=new Float32Array(4);new Float32Array(4);this.xCenter_=0.5*a;this.yCenter_=0.5*b;this.sphereRadius_=s.max(this.xCenter_+5,this.yCenter_+5)}P(Aj,mj);
Aj[B].onmousedown=function(a,b){a.curX=b[Qb];a.curY=b[Rb];a.dragging=k;Bj(this,a.curX,a.curY,this.prevVector_);jj(this.prevQuat_,Cj(a));Ui(["_trackEvent","Viewer Interaction","Drag","WebGL"]);q[jc][zb]();q.onselectstart=Jc(m);var c=this;Ja(q,function(b){c.onmousemove(a,b)});oa(q,function(b){c.onmouseup(a,b)});this.onGrabListener_&&this.onGrabListener_()};
oa(Aj[B],function(a){var b=this.prevVector_,c=this.curVector_;b[0]=c[0];b[1]=c[1];b[2]=c[2];jj(this.prevQuat_,this.curQuat_);a.dragging=m;Ja(q,l);oa(q,l);oj(this)});
Ja(Aj[B],function(a,b){if(a.dragging){var c=b[Qb],d=b[Rb],e=a.curX-c,f=a.curY-d;a.curX=c;a.curY=d;if(e||f){Bj(this,c,d,this.curVector_);var g=this.prevVector_,f=this.curVector_,e=pf(200*a.pose_[I]*a.pose_[I],2,10),c=this.curQuat_,h=0,d=new Float32Array(3),h=g[0]*f[0]+g[1]*f[1]+g[2]*f[2];if(1.0E-5>1-s.abs(h))0<h?ui(c,0,0,0,1):ui(c,1,1,1,0);else{var p=g[0],r=g[1],g=g[2],u=f[0],x=f[1],f=f[2];d[0]=r*f-g*x;d[1]=g*u-p*f;d[2]=p*x-r*u;h=s[Cb](si(d),h);ti(d,d);e=h*e;ti(d,d);e*=0.5;f=s.sin(e);ui(c,f*d[0],f*
d[1],f*d[2],s.cos(e));kj(c,c)}p=this.curQuat_;h=this.prevQuat_;c=this.curQuat_;d=p[0];e=p[1];f=p[2];p=p[3];r=h[0];g=h[1];u=h[2];h=h[3];c[0]=p*r+d*h+e*u-f*g;c[1]=p*g-d*u+e*h+f*r;c[2]=p*u+d*g-e*r+f*h;c[3]=p*h-d*r-e*g-f*u;kj(this.curQuat_,this.curQuat_);h=this.curQuat_;a.useQuat_||W("WARNING: CameraController not in quaternion mode.");jj(a.quat_,h);kj(a.quat_,a.quat_);c=a.pose_;d=[0,0,0];e=[0,0,0];p=vi();f=vi();Ci(p,-s.PI/2,0,0);lj(h,f);zi(p,f,f);h=s[Eb](f[2]*f[2]+f[6]*f[6]);1.0E-6<h?(e[2]=s[Cb](1*f[2],
1*f[6]),e[1]=s[Cb](1*h,f[10]),e[0]=s[Cb](1*f[8],1*-f[9])):(e[0]=0,e[1]=s[Cb](1*h,f[10]),e[2]=s[Cb](f[1],f[0]));e[0]=(e[0]+2*s.PI)%(2*s.PI);e[2]=(e[2]+2*s.PI)%(2*s.PI);e[1]=1*((1*e[1]+2*s.PI)%(2*s.PI));d[0]=180*e[0]/s.PI;d[1]=180*e[1]/s.PI;d[2]=180*e[2]/s.PI;c.rotation=d}uj(a)}});function Bj(a,b,c,d){b=(b-a.xCenter_)/a.sphereRadius_;a=-(c-a.yCenter_)/a.sphereRadius_;c=s[Eb](pf(1-(b*b+a*a),0,1));d[0]=b;d[1]=a;d[2]=c;ti(d,d)};function Dj(a){this.katamari_CameraController$element_=a;this.onchange=l;this.dragging=m;this.curY=this.curX=0;this.slaves=[];this.pose_=Gd(Ej);this.useQuat_=m;a=new Float32Array(4);ui(a,0,0,0,1);this.quat_=a;this.minZoom=0.07;this.maxZoom=0.3;this.projectionMatrix_=vi();this.viewMatrix_=vi();this.cameraFOV_=25;this.cameraNearClip_=0.01;this.cameraFarClip_=100;this.cameraOffsetY_=this.cameraOffsetX_=0;this.cameraOffsetZ_=-25;Fj(this,new xj,m)}var Ej={translation:[0,0,0],rotation:[0,0,0],zoom:0.2};
function Fj(a,b,c){var d=a.katamari_CameraController$element_;a.useQuat_=c;d.onmousedown=function(c){b.onmousedown(a,c)};d.wheelHandler=function(c){b.wheelHandler(a,c);Li(c)};d[Fb]("DOMMouseScroll",d.wheelHandler,m);d[Fb]("mousewheel",d.wheelHandler,m)}function qj(a){return a.useQuat_?(W("WARNING: getXRot() called in quaternion mode."),0):a.pose_[y][0]}function sj(a,b){a.useQuat_?W("WARNING: setXRot() called in quaternion mode."):a.pose_[y][0]=b}
function rj(a){return a.useQuat_?(W("WARNING: getYRot() called in quaternion mode."),0):a.pose_[y][1]}function tj(a,b){a.useQuat_?W("WARNING: setYRot() called in quaternion mode."):a.pose_[y][1]=b}function Cj(a){a.useQuat_||W("WARNING: CameraController not in quaternion mode.");return a.quat_}function vj(a,b){Pa(a.pose_,pf(b,a.minZoom,a.maxZoom))}function Gj(a){return(a.maxZoom-a.pose_[I])/(a.maxZoom-a.minZoom)}
function Hj(a,b){var c=b.translation[1],d=b.translation[2];a.pose_.translation[0]=b.translation[0];a.pose_.translation[1]=c;a.pose_.translation[2]=d;var c=b[y][0],d=b[y][1],e=b[y][2];if(a.useQuat_){W("WARNING: Deprecated setRotation called in quaternion mode.");var f=[qf(c),qf(d),qf(e)],g=vi(),h=vi();Ci(g,s.PI/2,0,0);Ci(h,f[0],f[1],f[2]);zi(g,h,h);var f=a.quat_,g=h[0],p=h[5],r=h[10];f[3]=s[Eb](s.max(0,1+g+p+r))/2;f[0]=s[Eb](s.max(0,1+g-p-r))/2;f[1]=s[Eb](s.max(0,1-g+p-r))/2;f[2]=s[Eb](s.max(0,1-g-
p+r))/2;f[0]=0>h[6]-h[9]!=0>f[0]?-f[0]:f[0];f[1]=0>h[8]-h[2]!=0>f[1]?-f[1]:f[1];f[2]=0>h[1]-h[4]!=0>f[2]?-f[2]:f[2]}a.pose_[y][0]=c;a.pose_[y][1]=d;a.pose_[y][2]=e;vj(a,b[I])}function uj(a){a[Ub]&&a[Ub](a.pose_[y][0],a.pose_[y][1]);for(var b in a.slaves){var c=a.slaves[b];Hj(c,a.pose_);c[Ub](a.pose_[y][0],a.pose_[y][1])}}function wj(a,b){Ui(["_trackEvent","3D Zoom",b,"Level",s[ab](10*Gj(a))])};function Ij(a,b){Na(this,a);this.renderer=b}Ij[B].SHORT_ANIMATION=750;
function Jj(a,b,c,d,e,f){var g=a.renderer,h=new Date;g.animation?(Ka(g.animation,h[Ob]()),g.animation.startPose=g.controller.pose_,g.animation.finishPose=c,Ha(g.animation,d)):(g.animation=new Wi(a[Cc],function(){var b;if(g.animation){b=new Date;g.animation.deferredStart&&(Ka(g.animation,b[Ob]()),g.animation.deferredStart=l);g.animation.animParam=(b[Ob]()-g.animation[wc])/(g.animation[ec]+1);var c=(b=1<=g.animation.animParam)?1:e(g.animation.animParam);g.animation.mixedPose={translation:[g.animation.startPose.translation[0]*
(1-c)+g.animation.finishPose.translation[0]*c,g.animation.startPose.translation[1]*(1-c)+g.animation.finishPose.translation[1]*c,g.animation.startPose.translation[2]*(1-c)+g.animation.finishPose.translation[2]*c],rotation:[g.animation.startPose[y][0]*(1-c)+g.animation.finishPose[y][0]*c,g.animation.startPose[y][1]*(1-c)+g.animation.finishPose[y][1]*c,g.animation.startPose[y][2]*(1-c)+g.animation.finishPose[y][2]*c],zoom:g.animation.startPose[I]*(1-c)+g.animation.finishPose[I]*c};Hj(a.renderer.controller,
g.animation.mixedPose);uj(g.controller);b&&(c=g.animation.finishCallback,g.animation.finishCallback=l,c&&c(),g.animation=l);b=!b}else b=m;return b}),g.animation.deferredStart=k,Ka(g.animation,l),g.animation.startPose=b,g.animation.finishPose=c,Ha(g.animation,d),g.animation.start());g.animation.finishCallback=function(){a.slider&&a.slider.setValue(99.9*Gj(g.controller));f&&f()}};var Y={LIBRARY_FRAGMENT_SOURCE:{},LIBRARY_VERTEX_SOURCE:{},CALLOUT_VERTEX_SOURCE:"attribute vec2 aSplinePoint;uniform mat4 uWorldViewProj,uPerspectiveProj;uniform vec2 uCanvasDimensions;uniform vec3 uSourcePosition,uSourceVelocity,uTargetPosition,uTargetVelocity;uniform float uTimeScale,uNumDashes,uLineWidth;uniform vec4 uLineColorSource,uLineColorTarget;varying vec2 a;varying vec4 b;void main(){float c,d,e,f,g,h,i,j,k,l,m,n,o;c=uCanvasDimensions.x/uCanvasDimensions.y;d=uLineWidth*2./uCanvasDimensions.x;const float p=.01;vec4 q,r,s,t,u,v,w,x,y;q=uWorldViewProj*vec4(uSourcePosition,1.);r=vec4(uSourcePosition+uSourceVelocity*p,1.);s=(uWorldViewProj*r-q)/p;t=uPerspectiveProj*vec4(uTargetPosition,1.);u=vec4(uTargetPosition+uTargetVelocity*p,1.);v=(uPerspectiveProj*u-t)/p;e=clamp(aSplinePoint.x*uTimeScale,0.,1.);f=e*e;g=f*e;h=2.*g-3.*f+1.;i=1.*g-2.*f+e;j=-2.*g+3.*f;k=1.*g-1.*f;l=6.*f-6.*e;m=3.*f-4.*e+1.;n=-6.*f+6.*e;o=3.*f-2.*e;w=h*q+i*s+j*t+k*v;x=l*q+m*s+n*t+o*v;vec2 z=normalize(vec2(x.x,x.y/c));y=vec4(-z.y,z.x,0,0);y.y*=c;w/=w.w;w+=aSplinePoint.y*d*y;gl_Position=w;a=vec2(e*uNumDashes,aSplinePoint.y);b=uLineColorSource*(1.-e)+uLineColorTarget*e;}"};
Y.LIBRARY_VERTEX_SOURCE.callout=Y.CALLOUT_VERTEX_SOURCE;Y.CALLOUT_FRAGMENT_SOURCE="precision highp float;varying vec2 a;varying vec4 b;void main(){const float c=2.*3.14159265359;float d,e,f,g;d=sin(a.x*c);e=clamp(d*4.+.5,0.,1.);f=clamp(2.*(1.-abs(a.y)),0.,1.);g=b.a*f*e;if(g<.001)discard;gl_FragColor=vec4(b.rgb,g);}";Y.LIBRARY_FRAGMENT_SOURCE.callout=Y.CALLOUT_FRAGMENT_SOURCE;Y.COLORED_MESH_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexColor;uniform mat4 uWorldViewProj;uniform float pointSize;varying lowp vec4 a;void main(){gl_PointSize=pointSize;gl_Position=uWorldViewProj*vec4(aVertexPosition.xyz,1.);a=vec4(aVertexColor.xyz,1.);}";
Y.LIBRARY_VERTEX_SOURCE.colored_mesh=Y.COLORED_MESH_VERTEX_SOURCE;Y.COLORED_MESH_FRAGMENT_SOURCE="precision highp float;varying lowp vec4 a;void main(){gl_FragColor=a;}";Y.LIBRARY_FRAGMENT_SOURCE.colored_mesh=Y.COLORED_MESH_FRAGMENT_SOURCE;Y.PANASONIC_CAMERA_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;c=aTextureCoord;b=(uModelInverseTranspose*vec4(aVertexNormal,0.)).xyz;}";
Y.LIBRARY_VERTEX_SOURCE.panasonic_camera=Y.PANASONIC_CAMERA_VERTEX_SOURCE;Y.PANASONIC_CAMERA_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture;uniform vec3 uLightColor,uAmbientColor,uEyePosition;varying vec3 a,b;varying vec2 c;const float d=.622;const float e=.352;const float f=6.884;const float g=1.2;const float h=1.2;const float i=1.2;const float j=1.2;const float k=1.;const float l=1.2;const float m=1.;const float n=1.;const vec3 o=vec3(-.641,.132,1.072);const vec3 p=vec3(.875,.132,0.);const vec3 q=vec3(-.641,1.061,-.536);const vec3 r=vec3(-.641,-.796,-.536);float C(vec3 s,vec3 t){return max(dot(s,t),0.);}float D(vec3 s,vec3 t){return pow(max(dot(s,t),0.),f);}vec3 E(vec3 s){vec3 t,u,v,w,x,y,z,A,B;t=normalize(b);u=normalize(uEyePosition-a);v=reflect(-u,t);w=normalize(o);x=normalize(p);y=normalize(q);z=normalize(r);A=s*(g*C(w,t)+h*C(x,t)+i*C(y,t)+j*C(z,t));B=uLightColor*(k*D(w,v)+l*D(x,v)+m*D(y,v)+n*D(z,v));return d*A+e*B;}void main(){vec3 s,t;s=texture2D(uDiffuseTexture,c).rgb;t=clamp(E(s),0.,1.);gl_FragColor=vec4(t,1.);}";
Y.LIBRARY_FRAGMENT_SOURCE.panasonic_camera=Y.PANASONIC_CAMERA_FRAGMENT_SOURCE;Y.PLATFORM_VERTEX_SOURCE="attribute vec3 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj;uniform vec3 uEyePosition;uniform float uEntityAlpha;varying vec2 a;varying float b;void main(){const float c=.4;const float d=2.;gl_Position=uWorldViewProj*vec4(aVertexPosition.xyz,1.);a=aTextureCoord;float e=d*(uEyePosition.y+c);b=min(e,1.)*uEntityAlpha;}";Y.LIBRARY_VERTEX_SOURCE.platform=Y.PLATFORM_VERTEX_SOURCE;
Y.PLATFORM_FRAGMENT_SOURCE="precision highp float;uniform sampler2D uDiffuseTexture;varying vec2 a;varying float b;void main(){if(b<0.)discard;vec3 c=vec4(texture2D(uDiffuseTexture,a)).rgb;gl_FragColor=vec4(c,b);}";Y.LIBRARY_FRAGMENT_SOURCE.platform=Y.PLATFORM_FRAGMENT_SOURCE;Y.TEXTURED_MESH_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexColor,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj;uniform vec3 uEyePosition;uniform bool uEnableVerticalFade;varying vec2 a;varying vec3 b,c,d;varying float e;void main(){const vec3 f=vec3(-1,1,1);const vec2 g=vec2(2.,1.);const vec2 h=vec2(1.,.4);const float i=.4;gl_Position=uWorldViewProj*vec4(aVertexPosition.xyz,1.);a=aTextureCoord;b=normalize(uEyePosition-aVertexPosition.xyz);c=normalize(f);d=normalize(uEyePosition-aVertexPosition.xyz);float j,k,l;j=g.x*(aVertexPosition.y+g.y);k=clamp(1.-j,0.,1.);l=min(h.x*(uEyePosition.y+h.y),1.);e=1.-float(uEnableVerticalFade)*pow(1.-l*k,i);}";
Y.LIBRARY_VERTEX_SOURCE.textured_mesh=Y.TEXTURED_MESH_VERTEX_SOURCE;Y.TEXTURED_MESH_FRAGMENT_SOURCE="precision highp float;uniform sampler2D uDiffuseTexture,uNormalMap,uAmbientOccMap,uSpecularityMap;varying vec2 a;varying vec3 b,c,d;varying float e;void main(){const float f=.2;const float g=.55;const float h=.17;const float i=.1;const float j=.5;const float k=.08;const float l=10.;const float m=22.;const vec4 n=vec4(1,1,1,1);const vec4 o=vec4(1,1,1,1);vec4 p,q,r;p=texture2D(uDiffuseTexture,a);float s,t,u,v,w,x,y,z,A,B;s=texture2D(uAmbientOccMap,a).r;t=texture2D(uSpecularityMap,a).r;q=texture2D(uNormalMap,a);vec3 C,D,E,F;C=normalize(2.*q.xyz-1.);D=normalize(b);E=normalize(c);F=normalize(d);u=dot(C,E);v=max(u,0.);w=0.;if(u>0.){vec3 G=D+E;float H=max(dot(C,normalize(G)),0.);w=t*pow(H,l);}x=dot(C,F);y=max(x,0.);z=0.;if(x>0.){vec3 G=D+F;float H=max(dot(C,normalize(G)),0.);z=t*pow(H,m);}A=f+g*s+h*v+i*y;B=j*w+k*z;r=vec4(A,A,A,1)*p+vec4(B,B,B,0)*n;gl_FragColor=r*e+o*(1.-e);}";
Y.LIBRARY_FRAGMENT_SOURCE.textured_mesh=Y.TEXTURED_MESH_FRAGMENT_SOURCE;Y.WIREFRAME_VERTEX_SOURCE="attribute vec3 aVertexPosition;uniform mat4 uWorldViewProj;void main(){gl_Position=uWorldViewProj*vec4(aVertexPosition.xyz,1.);}";Y.LIBRARY_VERTEX_SOURCE.wireframe=Y.WIREFRAME_VERTEX_SOURCE;Y.WIREFRAME_FRAGMENT_SOURCE="precision highp float;void main(){gl_FragColor=vec4(.5,.5,1.,1.);}";Y.LIBRARY_FRAGMENT_SOURCE.wireframe=Y.WIREFRAME_FRAGMENT_SOURCE;function Kj(a){this.gl_=a;this.katamari_Shaders$shaders_=[];this.shaderLib_={};this.shaderLib_.LIBRARY_VERTEX_SOURCE={};this.shaderLib_.LIBRARY_FRAGMENT_SOURCE={}}ad("goog.sourceCopyRight","Copyright 2011 Google Inc. All Rights Reserved.");
function Lj(a,b){for(var c in b.LIBRARY_VERTEX_SOURCE){W("-- Adding Shader:"+c);var d=b.LIBRARY_VERTEX_SOURCE[c],e=b.LIBRARY_FRAGMENT_SOURCE[c];a.shaderLib_.LIBRARY_VERTEX_SOURCE[c]=d;a.shaderLib_.LIBRARY_FRAGMENT_SOURCE[c]=e;a.katamari_Shaders$shaders_[c]={vertex_source:d,fragment_source:e}}}function Mj(a,b){var c;c="shader"[cb](/[\[]/,"\\[")[cb](/[\]]/,"\\]");c=la("[\\?&]"+c+"=([^&#]*)")[Za](n[gc][sc]);"dynamic"==(c==l?l:c[1])?Nj(a,b):Oj(a,b)}
function Nj(a,b){var c=0;Ki("shaders.json",function(d){var d=bd(d),e;for(e in d)for(var f in d[e])c++,Ki(d[e][f],function(d){var e=d[tc](d[v]("\n")+1),d=d[tc](0,d[v]("\n"))[bc](" ");"VERTEX_SOURCE"==d[1]?this.shaderLib_.LIBRARY_VERTEX_SOURCE[d[2]]=e:"FRAGMENT_SOURCE"==d[1]&&(this.shaderLib_.LIBRARY_FRAGMENT_SOURCE[d[2]]=e);c--;0==c&&Oj(a,b)})})}
function Oj(a,b){for(var c in a.shaderLib_.LIBRARY_VERTEX_SOURCE)a.katamari_Shaders$shaders_[c]={vertex_source:a.shaderLib_.LIBRARY_VERTEX_SOURCE[c],fragment_source:a.shaderLib_.LIBRARY_FRAGMENT_SOURCE[c]};b&&b()}function Pj(a,b){var c=a.katamari_Shaders$shaders_[b];return!c?(W("ERROR getting shader definition: "+b),l):c}
function Qj(a,b){var c=a.gl_,d=Rj(a,35633,b.vertex_source),e=Rj(a,35632,b.fragment_source),f=c.createProgram();if(f==l)return W("Creating program failed"),l;c.attachShader(f,d);c.attachShader(f,e);c.linkProgram(f);if(!c.getProgramParameter(f,35714))return d=c.getProgramInfoLog(f),W("Error linking program:\n"+d),c.deleteProgram(f),l;var c=a.gl_,g=c.getProgramParameter(f,35721);W("shader program attributes:"+g);f.attributes=[];f.attribLocation={};for(d=0;d<Number(g);++d){var h=c.getActiveAttrib(f,d),
e=c.getAttribLocation(f,h[z]);f.attributes[e]=h;f.attribLocation[h[z]]=e;W("-- "+h[z]+": "+e)}g=c.getProgramParameter(f,35718);W("shader program uniforms:"+g);f.uniforms=[];f.uniformLocation={};for(d=0;d<Number(g);++d)h=c.getActiveUniform(f,d),e=c[hc](f,h[z]),f.uniforms[d]=h,f.uniformLocation[h[z]]=e,W("-- "+h[z]+": "+e);return f}
function Rj(a,b,c){a=a.gl_;b=a.createShader(b);if(b==l)return l;a.shaderSource(b,c);a.compileShader(b);return!a.getShaderParameter(b,35713)?(c=a.getShaderInfoLog(b),W("createShader_: ERROR compiling shader:\n"+c),a.deleteShader(b),l):b};function Sj(a,b){this.gl_=a;this.katamari_MeshModel$shaders_=b;this.visible_=k;this.drawStyle=0;this.pointSize=3;this.katamari_MeshModel$alpha_=1;this.enableVerticalFade_=m;this.specularityMapTexture=this.ambientOccTexture=this.normalMapTexture=this.diffuseTexture=this.katamari_MeshModel$shaderProgram=l;this.transform=wi();this.elementBuffer=this.textureCoordBuffer=this.normalBuffer=this.colorBuffer=this.vertexBuffer=l}
function Tj(a,b,c,d){return!c||0>=c[A]?(W("createArrayBuffer: No data for "+b),l):a.katamari_MeshModel_prototype$createBuffer_(a.gl_.ARRAY_BUFFER,c,d)}Sj[B].katamari_MeshModel_prototype$createBuffer_=function(a,b,c){var d=this.gl_,e=d.createBuffer();d[Hb](a,e);d.bufferData(a,b,35044);e.itemSize=c;e.numItems=b[A]/e.itemSize;W("Created WebGL buffer: "+e.numItems);return e};
Sj[B].draw=function(a,b,c){if(this.visible_){var d=this.gl_;d.useProgram(this.katamari_MeshModel$shaderProgram);this.katamari_MeshModel_prototype$checkGLError_("useShader useProgram");var e=this.katamari_MeshModel$shaderProgram.uniformLocation,f=this[Ic];e.uModel!==j&&(d[tb](e.uModel,m,f),this.katamari_MeshModel_prototype$checkGLError_("useShader uniformLoc"));var g=wi();zi(g,b,g);zi(g,a,g);zi(g,f,g);e.uWorldViewProj!==j&&(d[tb](e.uWorldViewProj,m,g),this.katamari_MeshModel_prototype$checkGLError_("useShader uWorldViewProj"));
if(e.uModelInverseTranspose!==j){b=vi();g=vi();Ai(f,b);if(g==b){var f=b[1],h=b[2],p=b[3],r=b[6],u=b[7],x=b[11];g[1]=b[4];g[2]=b[8];g[3]=b[12];g[4]=f;g[6]=b[9];g[7]=b[13];g[8]=h;g[9]=r;g[11]=b[14];g[12]=p;g[13]=u;g[14]=x}else g[0]=b[0],g[1]=b[4],g[2]=b[8],g[3]=b[12],g[4]=b[1],g[5]=b[5],g[6]=b[9],g[7]=b[13],g[8]=b[2],g[9]=b[6],g[10]=b[10],g[11]=b[14],g[12]=b[3],g[13]=b[7],g[14]=b[11],g[15]=b[15];d[tb](e.uModelInverseTranspose,m,g);this.katamari_MeshModel_prototype$checkGLError_("useShader uModelInverseTranspose")}e.uLightDirection!==
j&&(b=ri(3,1,-10),d[Sa](e.uLightDirection,b[0],b[1],b[2]));e.uLightColor!==j&&(b=ri(1,1,1),d[Sa](e.uLightColor,b[0],b[1],b[2]));e.uAmbientColor!==j&&(b=ri(0.2,0.2,0.2),d[Sa](e.uAmbientColor,b[0],b[1],b[2]));e.uEyePosition!==j&&(b=wi(),Ai(a,b),a=new Float32Array(4),a[0]=b[12],a[1]=b[13],a[2]=b[14],a[3]=b[15],d[Sa](e.uEyePosition,a[0],a[1],a[2]),this.katamari_MeshModel_prototype$checkGLError_("useShader uEyePosition"));e.uRotateEnvironmentMap!==j&&(d.uniform1i(e.uRotateEnvironmentMap,c?1:0),this.katamari_MeshModel_prototype$checkGLError_("useShader uRotateEnvironmentMap"));
e.uEntityAlpha!==j&&(d[Ta](e.uEntityAlpha,this.katamari_MeshModel$alpha_),this.katamari_MeshModel_prototype$checkGLError_("useShader uEntityAlpha"));e.uEnableVerticalFade!==j&&(d.uniform1i(e.uEnableVerticalFade,this.enableVerticalFade_?1:0),this.katamari_MeshModel_prototype$checkGLError_("useShader uEnableVerticalFade"));c=this.gl_;switch(this.drawStyle){case 0:Uj(this,this.vertexBuffer,this.colorBuffer,l,l);Vj(this,1,this.elementBuffer);return;case 1:Uj(this,this.vertexBuffer,this.colorBuffer,l,
l);c[Ta](this.katamari_MeshModel$shaderProgram.attribLocation.pointSize,this.pointSize);c.drawArrays(0,0,this.vertexBuffer.numItems);return;case 2:Uj(this,this.vertexBuffer,this.colorBuffer,this.normalBuffer,this.textureCoordBuffer);Vj(this,4,this.elementBuffer);return;case 3:Uj(this,this.vertexBuffer,l,this.normalBuffer,this.textureCoordBuffer);Vj(this,4,this.elementBuffer);return}i("katamari.MeshModel: Invalid drawStyle = "+this.drawStyle)}};
Sj[B].katamari_MeshModel_prototype$checkGLError_=function(a){var b=this.gl_.getError();0!=b&&(a=(a?a+" ":"")+"GL Error: "+b,W(a),i(a))};function Wj(a,b,c){var d=a.gl_,e=a.katamari_MeshModel$shaderProgram.attribLocation;e[b]!==j&&c&&0<c.numItems&&(d[Hb](34962,c),d.vertexAttribPointer(e[b],c.itemSize,5126,m,0,0),d.enableVertexAttribArray(e[b]),a.katamari_MeshModel_prototype$checkGLError_("bindVertexAttribute "+b))}
function Xj(a,b,c,d,e){var f=a.gl_,g=a.katamari_MeshModel$shaderProgram.uniformLocation;g[b]!==j&&e&&(f.activeTexture(c),f.bindTexture(3553,e),a.katamari_MeshModel_prototype$checkGLError_("bindTexture "+b),f.uniform1i(g[b],d))}
function Uj(a,b,c,d,e){Wj(a,"aVertexPosition",b);Wj(a,"aVertexColor",c);Wj(a,"aVertexNormal",d);Wj(a,"aTextureCoord",e);a.katamari_MeshModel$shaderProgram.attribLocation.aTextureCoord!==j&&e&&0<e.numItems&&(Xj(a,"uDiffuseTexture",33984,0,a.diffuseTexture),Xj(a,"uNormalMap",33985,1,a.normalMapTexture),Xj(a,"uAmbientOccMap",33986,2,a.ambientOccTexture),Xj(a,"uSpecularityMap",33987,3,a.specularityMapTexture));Xj(a,"uEnvironmentMap",33988,4,a.environmentMapTexture)}
function Vj(a,b,c){var d=a.gl_;d[Hb](34963,c);a.katamari_MeshModel_prototype$checkGLError_("drawElements bindBuffer");d.drawElements(b,c.numItems,5123,0);a.katamari_MeshModel_prototype$checkGLError_("drawElements drawElements")};function Yj(a,b,c,d,e,f,g,h,p){Sj[H](this,a,b);this.vertexBuffer=Tj(this,"vertices",d,3);this.colorBuffer=Tj(this,"colors",e,3);this.normalBuffer=Tj(this,"normals",f,3);this.textureCoordBuffer=Tj(this,"texture coords",g,2);!h||0>=h[A]?(W("createElementBuffer_: No data for indices."),a=l):a=this.katamari_MeshModel_prototype$createBuffer_(this.gl_.ELEMENT_ARRAY_BUFFER,h,1);this.elementBuffer=a;this.drawStyle=c;W("Initializing mesh shader program: "+p);(c=Pj(this.katamari_MeshModel$shaders_,p))?(this.katamari_MeshModel$shaderProgram=
Qj(this.katamari_MeshModel$shaders_,c))||W("initShader: ERROR creating mesh shader program."):W("initShader: Unable to retrieve shader: "+p)}P(Yj,Sj);function Zj(a,b){this.transform=wi();this.metadata_=l;pa(this,m);this.numDisplaySamples_=0;this.numDashes_=this.timeScale_=1;this.canonicalView_=this.targetVelocity_=this.targetPosition_=this.sourceVelocity_=this.sourcePosition_=l;this.katamari_Callouts3d$alpha_=0;this.hideCallback_=l;this.gl_=a;this.katamari_Callouts3d$shaders_=b;for(var c=[],d=0;200>d;d++)c[t][vc](c,[0.005*(d-0.5),-1,0.005*(d+0),1]);this.splinePointBuffer=this.katamari_Callouts3d_prototype$createBuffer_(34962,new Float32Array(c),
2);(c=Pj(this.katamari_Callouts3d$shaders_,"callout"))?(this.katamari_Callouts3d$shaderProgram=Qj(this.katamari_Callouts3d$shaders_,c))?(c=this.gl_,this.katamari_Callouts3d$shaderProgram.splinePointAttribute=c.getAttribLocation(this.katamari_Callouts3d$shaderProgram,"aSplinePoint"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParamas splinePointAttribute"),this.katamari_Callouts3d$shaderProgram.viewMatrixUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uWorldViewProj"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams viewMatrixUniform"),
this.katamari_Callouts3d$shaderProgram.perspectiveMatrixUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uPerspectiveProj"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams perspectiveMatrixUniform"),this.katamari_Callouts3d$shaderProgram.canvasDimensionsUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uCanvasDimensions"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams canvasDimensionsUniform"),this.katamari_Callouts3d$shaderProgram.sourcePositionUniform=
c[hc](this.katamari_Callouts3d$shaderProgram,"uSourcePosition"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams sourcePositionUniform"),this.katamari_Callouts3d$shaderProgram.sourceVelocityUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uSourceVelocity"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams sourceVelocityUniform"),this.katamari_Callouts3d$shaderProgram.targetPositionUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uTargetPosition"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams targetPositionUniform"),
this.katamari_Callouts3d$shaderProgram.targetVelocityUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uTargetVelocity"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams targetVelocityUniform"),this.katamari_Callouts3d$shaderProgram.timeScaleUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uTimeScale"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams timeScaleUniform"),this.katamari_Callouts3d$shaderProgram.numDashesUniform=c[hc](this.katamari_Callouts3d$shaderProgram,
"uNumDashes"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams numDashesUniform"),this.katamari_Callouts3d$shaderProgram.lineWidthUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uLineWidth"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams lineWidthUniform"),this.katamari_Callouts3d$shaderProgram.lineColorSourceUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uLineColorSource"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams lineColorSourceUniform"),
this.katamari_Callouts3d$shaderProgram.lineColorTargetUniform=c[hc](this.katamari_Callouts3d$shaderProgram,"uLineColorTarget"),this.katamari_Callouts3d_prototype$checkGLError_("initShaderParams lineColorTargetUniform")):W("Callouts3d: ERROR compiling shader program."):W("Callouts3d: ERROR getting callout shader source.")}
function $j(a,b){if(!a.metadata_){var c=b.d3;if(c){var d={};d.textPositionOffset=c.textPositionOffset;d.defaultTextDepth=c.defaultTextDepth;d.dashDensity=c.dashDensity;var e=c.calloutLineColorAtModel;d.calloutLineColorSource=[e[0]/255,e[1]/255,e[2]/255];e=c.calloutLineColorAtText;d.calloutLineColorTarget=[e[0]/255,e[1]/255,e[2]/255];d.calloutLineWidth=c.calloutLineWidth;d.fadeOutFraction=c.fadeOutFraction;d.fadeOutTranslation=c.fadeOutTranslation;d.fadeOutAngle=c.fadeOutAngle;d.fadeOutZoomFactor=
c.fadeOutZoomFactor;a.metadata_=d}}}
Zj[B].draw=function(a,b,c){if(this[Ua]){var d=this.gl_,e=new Float32Array(this.metadata_.calloutLineColorSource[jb]([this.katamari_Callouts3d$alpha_])),f=new Float32Array(this.metadata_.calloutLineColorTarget[jb]([this.katamari_Callouts3d$alpha_]));new Float32Array([0,0,0,1]);d.useProgram(this.katamari_Callouts3d$shaderProgram);this.katamari_Callouts3d_prototype$checkGLError_("draw useProgram");var g=this.gl_,h=wi();zi(h,b,h);zi(h,a,h);zi(h,this[Ic],h);g[tb](this.katamari_Callouts3d$shaderProgram.viewMatrixUniform,m,
h);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms viewMatrixUniform");g[tb](this.katamari_Callouts3d$shaderProgram.perspectiveMatrixUniform,m,b);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms projectionMatrix");g.uniform2fv(this.katamari_Callouts3d$shaderProgram.canvasDimensionsUniform,c);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms canvasDimensions");g[Yb](this.katamari_Callouts3d$shaderProgram.sourcePositionUniform,this.sourcePosition_);
this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms sourcePosition");g[Yb](this.katamari_Callouts3d$shaderProgram.sourceVelocityUniform,this.sourceVelocity_);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms sourceVelocity");g[Yb](this.katamari_Callouts3d$shaderProgram.targetPositionUniform,this.targetPosition_);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms targetPosition");g[Yb](this.katamari_Callouts3d$shaderProgram.targetVelocityUniform,
this.targetVelocity_);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms targetVelocity");g[Ta](this.katamari_Callouts3d$shaderProgram.timeScaleUniform,this.timeScale_);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms timeScale");g[Ta](this.katamari_Callouts3d$shaderProgram.numDashesUniform,this.numDashes_);this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms numDashes");g[Ta](this.katamari_Callouts3d$shaderProgram.lineWidthUniform,this.metadata_.calloutLineWidth);
this.katamari_Callouts3d_prototype$checkGLError_("bindShaderUniforms lineWidth");d.enable(3042);d.blendFunc(770,771);d.uniform4fv(this.katamari_Callouts3d$shaderProgram.lineColorSourceUniform,e);this.katamari_Callouts3d_prototype$checkGLError_("draw uniform4fv lineColorSource");d.uniform4fv(this.katamari_Callouts3d$shaderProgram.lineColorTargetUniform,f);this.katamari_Callouts3d_prototype$checkGLError_("draw uniform4fv lineColorTarget");a=this.gl_;a[Hb](34962,this.splinePointBuffer);a.vertexAttribPointer(this.katamari_Callouts3d$shaderProgram.splinePointAttribute,
this.splinePointBuffer.itemSize,5126,m,0,0);a.enableVertexAttribArray(this.katamari_Callouts3d$shaderProgram.splinePointAttribute);this.katamari_Callouts3d_prototype$checkGLError_("bindVertexAttributes");d.drawArrays(5,0,2*this.numDisplaySamples_);d.colorMask(m,m,m,k);d.clear(16384);d.enable(2929);d.colorMask(k,k,k,k)}};Zj[B].katamari_Callouts3d_prototype$createBuffer_=Sj[B].katamari_MeshModel_prototype$createBuffer_;Zj[B].katamari_Callouts3d_prototype$checkGLError_=Sj[B].katamari_MeshModel_prototype$checkGLError_;
function ak(a,b,c,d,e,f){var g=a.metadata_.textPositionOffset,b=[b[0]+g[0],b[1]+g[1]],g=[0,0,c.textDepth?c.textDepth:a.metadata_.defaultTextDepth];Bi(e,g,g);d=[2*(b[0]-d[dc][ic])/d[$b]-1,-2*(b[1]-d[dc][Dc])/d[pc]+1,g[2]];b=wi();Ai(e,b);e=[0,0,0];Bi(b,d,e);d=s[ab](100*c[A]);pa(a,k);a.numDisplaySamples_=s.min(s.max(d,2),200);a.timeScale_=200/(a.numDisplaySamples_-1.5);a.sourcePosition_=new Float32Array(c.modelPosition);a.sourceVelocity_=new Float32Array(c.modelVelocity);a.targetPosition_=new Float32Array(e);
a.targetVelocity_=new Float32Array(c.textVelocity);a.numDashes_=s[ab](c[A]*a.metadata_.dashDensity)+0.5;a.katamari_Callouts3d$alpha_=1;a.hideCallback_=f}function bk(a){pa(a,m);a.hideCallback_&&(a.hideCallback_(),a.hideCallback_=l)}function ck(a,b){(3>a[A]||3>b[A])&&i("Vector lengths too short: "+s.min(a[A],b[A])+" < 3");for(var c=0,d=0;3>d;d++)var e=a[d]-b[d],c=c+e*e;return s[Eb](c)};function dk(a,b,c,d){a[b++]=c;a[b++]=0;a[b++]=d;return b}function ek(){for(var a=new Float32Array(612),b=0,c=0;50>=c;++c)b=dk(a,b,-25+1*c,-25),b=dk(a,b,-25+1*c,25);for(c=0;50>=c;++c)b=dk(a,b,-25,-25+1*c),b=dk(a,b,25,-25+1*c);return a}function fk(){for(var a=new Uint16Array(204),b=0;204>b;++b)a[b]=b;return a};function gk(){}var hk={decodeOffsets:[-4108,-2985,-738,0,0,-511,-511,-511],decodeScales:[2.6E-5,2.6E-5,2.6E-5,9.78E-4,9.78E-4,0.001957,0.001957,0.001957]};
gk[B].decode=function(a,b,c){b=b.utf8_params;b.material=a;for(var a=[b],b=[],d=hk.decodeScales[A],e=hk.decodeOffsets,f=hk.decodeScales,g=a[A],h=0;h<g;h++){for(var p=a[h],r=p.attribRange[1],u=p.attribRange[0],x=new Float32Array(d*r),D=0;D<d;D++){var C=u+r,X=f[D];if(X)for(var J=c,M=C,G=x,Q=D,O=d,da=e[D],Z=0;u<M;u++){var aa=J[qc](u),Z=Z+(aa>>1^-(aa&1));G[Q]=X*(Z+da);Q+=O}u=C}C=3*p.indexRange[1];r=new Uint16Array(C);D=c;J=r;for(Q=G=M=0;Q<C;Q++)O=D[qc](u++),J[M++]=G-O,0==O&&G++;if(D=p.bboxes){u=c;G=D;
D=e;C=f;J=6*p.names[A];p=G+J;J=new Float32Array(J);for(M=0;G<p;G+=6)Q=u[qc](G+0)+D[0],O=u[qc](G+1)+D[1],da=u[qc](G+2)+D[2],X=u[qc](G+3)+1>>1,Z=u[qc](G+4)+1>>1,aa=u[qc](G+5)+1>>1,J[M++]=C[0]*(Q+X),J[M++]=C[1]*(O+Z),J[M++]=C[2]*(da+aa),J[M++]=C[0]*X,J[M++]=C[1]*Z,J[M++]=C[2]*aa}x=this.splitInterleavedData_(x,r);b[t](x)}return b[0]};
gk[B].splitInterleavedData_=function(a,b){for(var c={vertices:[],textureCoords:[],normals:[]},d=0,e=0,f=0,g=0;g<a[A];g+=8){for(var h=0;3>h;h++)c.vertices[d++]=a[g+0+h];for(h=0;2>h;h++)c.textureCoords[e++]=a[g+3+h];for(h=0;3>h;h++)c.normals[f++]=a[g+5+h]}W("Interleaved data: "+a[A]);W("Num vertices = "+a[A]/8);W("--Extracted position data: "+d);W("--Extracted texture coord data: "+e);W("--Extracted normal data: "+f);c.indices=b;return c};function ik(){this.center_=this.maxCoord_=l}P(ik,gk);
ik[B].decode=function(a,b,c){b=c[qc](0);57344<=b&&(b-=2048);b++;W("Num vertices: "+b);for(var a=new Float32Array(8*b),d=1,e=0;8>e;e++){for(var f=0,g=0;g<b;++g){var h=c[qc](g+d),f=f+(h>>1^-(h&1));a[8*g+e]=f}d+=b}f=c[A]-d;b=ma(f);for(e=g=0;e<f;e++)h=c[qc](e+d),b[e]=g-h,0==h&&g++;W("RAW DECODED DATA:");jk(a);if(a!=l){this.center_=[];for(c=0;3>c;c++)this.center_[c]=0;for(c=this.maxCoord_=0;c<a[A];c+=8)for(d=0;3>d;d++)this.center_[d]+=a[c+d],s.abs(a[c+d])>this.maxCoord_&&(this.maxCoord_=s.abs(a[c+d]));
for(c=0;3>c;c++)this.center_[c]/=a[A]/8}for(c=0;3>c;c++)this.center_[c]/=this.maxCoord_;for(c=0;c<a[A];c+=8){for(d=0;3>d;d++)a[c+d]=(a[c+d]-1023)/1023;a[c+3]/=1023;a[c+3+1]/=1023;for(d=e=0;3>d;d++)a[c+5+d]-=128,h=a[c+5+d],e+=h*h;e=s[Eb](e);0>=e&&(e=1);for(d=0;3>d;d++)a[c+5+d]/=e}W("NORMALIZED DATA:");jk(a);return this.splitInterleavedData_(a,b)};
function jk(a){for(var b=0;4>b;++b)W("xyz = "+a[8*b]+", "+a[8*b+1]+", "+a[8*b+2]),W("uv = "+a[8*b+3]+", "+a[8*b+4]),W("normal = "+a[8*b+5]+", "+a[8*b+6]+", "+a[8*b+7])}
ik[B].splitInterleavedData_=function(a,b){for(var c={vertices:[],textureCoords:[],normals:[]},d=0,e=0,f=0,g=0;g<a[A];g+=8){for(var h=0;3>h;h++)c.vertices[d++]=a[g+0+h];for(h=0;2>h;h++)c.textureCoords[e++]=a[g+3+h];for(h=0;3>h;h++)c.normals[f++]=a[g+5+h]}W("Interleaved data: "+a[A]);g=a[A]/8;W("Num vertices = "+g);W("--Extracted position data: "+d);W("--Extracted texture coord data: "+e);W("--Extracted normal data: "+f);W("Num indices = "+b[A]+" (triangles = "+b[A]/3+")");for(d=0;d<b[A];d++)b[d]>=
g&&W("WARNING: face "+d+" contains out of range index: "+b[d]+" (max = "+g+")");c.indices=b;return c};function kk(a,b,c){this.objectName_=a;this.objectDefinition_=b;this.katamari_ModelLoader$loadCallback_=c;this.modelData_=l}
function lk(a){var b="models/"+a.objectDefinition_.geometry,c=1;a.objectDefinition_.version&&(c=a.objectDefinition_.version);W("Loading model: "+b);W("Version: "+c);W("Object name: "+a.objectName_);var d=new XMLHttpRequest;d[Wa]("GET",b);qa(d,function(){if(4==d[xb])if(b[ub](".*utf8")||b[ub](".*txt")||b[ub](".*xml"))W("Loading UTF8..."),a.katamari_ModelLoader$loadCallback_(a.objectName_,(1==c?new ik:new gk).decode(a.objectName_,a.objectDefinition_,d[gb]));else if(b[ub](".*json")){W("Parsing JSON...");
var e=bd(d[gb]);a.modelData_=e;a.modelData_?(W("Loaded model."),a.katamari_ModelLoader$loadCallback_(a.objectName_,a.modelData_)):W("ERROR: unable to load model.")}else W("Unknown model file extension."),i("Unknown model file extension.")});d[wb]()};function mk(a,b){this.gl_=a;this.katamari_TextureLoader$loadCallback_=b;this.texturePath_="textures/";this.textures_={};this.textureRequests_={};this.texturesToLoad_=0}
function nk(a,b){if(b)if(a.textureRequests_[b])W("initTexture: duplicate texture load request: "+b);else{a.textureRequests_[b]=k;var c=a.texturePath_+b;W("Loading texture: "+c);a.texturesToLoad_++;var d=a.gl_.createTexture();Ba(d,b);d.image=new Image;na(d.image,function(){W("texture handler");W("Initializing "+d[z]);var b=a.gl_;b.bindTexture(3553,d);b.pixelStorei(37440,1);b.texImage2D(3553,0,6408,6408,5121,d.image);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9987);b.generateMipmap(3553);
b.bindTexture(3553,l);W("Texture initialized.");a.textures_[d[z]]=d;a.texturesToLoad_-=1;a.katamari_TextureLoader$loadCallback_()});d.image.src=c}else W("initTexture WARNING: no texture name specified")}function ok(a,b){var c=a.textures_[b];return c?c:l};function pk(a,b){this.gl_=a;this.sceneDefinition_=b;this.objects_={};this.materials_={};this.transform_=wi();this.katamari_Scene$shaders_=new Kj(a);this.textureLoader_=new mk(this.gl_,N(this.textureLoaderCallback_,this));this.activeDiffuseTexture_=0;na(this,l)}
function qk(a){Mj(a.katamari_Scene$shaders_,function(){var b=a.sceneDefinition_.materials,c;for(c in b){var d=b[c];if(d.diffuse_map)for(var e=0;e<d.diffuse_map[A];++e)nk(a.textureLoader_,d.diffuse_map[e]);d.normal_map&&nk(a.textureLoader_,d.normal_map);d.ambient_map&&nk(a.textureLoader_,d.ambient_map);d.specularity_map&&nk(a.textureLoader_,d.specularity_map);d.environment_map&&nk(a.textureLoader_,d.environment_map);a.materials_[c]=d}a.objects_={};for(var f in a.sceneDefinition_.objects)lk(new kk(f,
a.sceneDefinition_.objects[f],N(a.modelLoaderCallback_,a))),W("LoadModel: "+f+"\n"+a.sceneDefinition_.objects[f])})}pk[B].setTransform=function(a,b){this.transform_=a;this.rotateEnvironmentMap_=b};
function rk(a){for(var b in a.objects_){var c=a,d=b,e=c.objects_[d];e||i("ERROR getting object model: "+d);var f=sk(c,d);f||i("ERROR getting object material for: "+d);var d=e,e=ok(c.textureLoader_,f.normal_map),g=ok(c.textureLoader_,f.ambient_map),h=ok(c.textureLoader_,f.specularity_map),p=ok(c.textureLoader_,f.environment_map);d.diffuseTexture=ok(c.textureLoader_,f.diffuse_map[c.activeDiffuseTexture_%f.diffuse_map[A]]);d.normalMapTexture=e;d.ambientOccTexture=g;d.specularityMapTexture=h;d.environmentMapTexture=
p}}pk[B].draw=function(){if(0==this.textureLoader_.texturesToLoad_){var a=vi();zi(this.view_,this.transform_,a);for(var b in this.objects_)this.objects_[b].draw(a,this.projection_,this.rotateEnvironmentMap_);this[Qa]&&(a=this[Qa],na(this,l),a&&a())}};pk[B].textureLoaderCallback_=function(){rk(this);this.draw()};
pk[B].modelLoaderCallback_=function(a,b){var c=this.objects_;if(!b.textureCoords||0==b.textureCoords[A])if(!b.colors||0==b.colors[A]){for(var d=b.vertices[A],e=ma(d);0<=--d;)e[d]=0;b.colors=e}d=tk(this,a);(e=sk(this,a))||i("ERROR getting object material for: "+a);var f=3;!e.diffuse_map&&!["material"].diffuse_map[0]&&(f=2);W("CREATING MODEL :"+a);e=new Yj(this.gl_,this.katamari_Scene$shaders_,f,uk(b.vertices),uk(b.colors),uk(b.normals),uk(b.textureCoords),new Uint16Array(b.indices),e.shader_name);
yi(e[Ic]);if(d[Ic]!=j){var g=d[Ic].scale;if(g){W("SCALE :"+g);var f=e[Ic],h=g[0],p=g[1],g=g[2];xi(f,f[0]*h,f[1]*h,f[2]*h,f[3]*h,f[4]*p,f[5]*p,f[6]*p,f[7]*p,f[8]*g,f[9]*g,f[10]*g,f[11]*g,f[12],f[13],f[14],f[15])}if(f=d[Ic][y])W("ROT :"+f.angle+", "+f[zc]),Ei(e[Ic],qf(f.angle),f[zc][0],f[zc][1],f[zc][2]);if(d=d[Ic].translation)W("TRANS :"+d),Di(e[Ic],d[0],d[1],d[2])}c[a]=e;rk(this);this.draw()};function uk(a){return a&&0<a[A]?new Float32Array(a):l}
function tk(a,b){var c=a.sceneDefinition_.objects[b];return!c?(W("ERROR getting object definition: "+b),l):c}function sk(a,b){var c=tk(a,b);if(c&&(c=c.material)){var d=a.materials_[c];if(d)return d;W("ERROR getting object material: "+c)}return l};function vk(a){Vi("WebglUtils","Render Webgl",a)};function wk(a,b,c){Na(this,a);this.calloutLoader_=b;this.overlayElement_=c;this.gl_=l;ra(this,0);Oa(this,0);this.grid=this.scene=this.callouts3d_=this.onchange=this.controller=this.dragHandler=l;this.showGrid=m;a=this[Cc];if(n.WebGLRenderingContext){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=l,d=0;d<b[A];++d){try{c=a.getContext(b[d],j)}catch(e){}if(c)break}(a=c)||vk("Failure - WebGL 2 Context")}else vk("Failure - WebGL 1 Rendering"),a=l;(this.gl_=a)?(this.gl_.enable(2929),
this.gl_.clearColor(1,1,1,1)):W("Error initializing WebGL.");this.view=wi();this.projection=wi();this.animateCameraToPose=l}
function xk(){var a=T.renderer,b=T.scene;ra(a,a[Cc][$a]||ga(a[Cc][F][$a],10));Oa(a,a[Cc][Ec]||ga(a[Cc][F][Ec],10));W("renderer dimensions: "+a[$a]+"x"+a[Ec]);a.controller=new Dj(a.overlayElement_||a[Cc]);a.controller.onchange=function(){a.draw();if(a[Ub])a[Ub]()};a.scene=b;qk(a.scene);a.callouts3d_=new Zj(a.gl_,a.scene.katamari_Scene$shaders_);a.calloutLoader_&&hj(a.calloutLoader_,N(a.animateToPosition,a),N(a.showConnector,a),N(a.hideConnector,a));a.grid=new Yj(a.gl_,a.scene.katamari_Scene$shaders_,
0,ek(),l,l,l,fk(),"wireframe");a.draw()}function yk(a,b,c,d){d=d||Ej;a.dragHandler=b;Fj(a.controller,b,c);Hj(a.controller,d);nj(b,"renderer",function(){a.callouts3d_&&a.callouts3d_[Ua]&&!(a.callouts3d_[Ua]&&0<a.callouts3d_.katamari_Callouts3d$alpha_)&&(bk(a.callouts3d_),a.draw())})}
wk[B].draw=function(){this.gl_.clear(16640);var a=this.controller,b=this[$a]/this[Ec],c=a.cameraNearClip_,d=a.cameraFarClip_,e=qf(a.cameraFOV_)/2,f=d-c,g=s.sin(e);0==f||0==g||0==b||(e=s.cos(e)/g,xi(a.projectionMatrix_,e/b,0,0,0,0,e,0,0,0,0,-(d+c)/f,-1,0,0,-(2*c*d)/f,0));this.projection=a.projectionMatrix_;a=this.controller;b=a.viewMatrix_;c=a.cameraOffsetX_;d=a.cameraOffsetY_*a.pose_[I];f=a.cameraOffsetZ_*a.pose_[I];yi(b);b[12]=c;b[13]=d;b[14]=f;b[15]=1;a.useQuat_?(b=vi(),lj(a.quat_,b),zi(a.viewMatrix_,
b,a.viewMatrix_)):(Ei(a.viewMatrix_,qf(a.pose_[y][0]),-1,0,0),Ei(a.viewMatrix_,qf(a.pose_[y][1]),0,-1,0),Ei(a.viewMatrix_,qf(a.pose_[y][2]),0,0,-1));Di(a.viewMatrix_,a.pose_.translation[0],a.pose_.translation[1],a.pose_.translation[2]);this.view=a.viewMatrix_;a=this.scene;b=this.projection;a.view_=this.view;a.projection_=b;this.scene.draw();this.callouts3d_&&(a=this.callouts3d_,d=this.controller.pose_,a[Ua]&&a.canonicalView_&&(b=ck(d.translation,a.canonicalView_.translation),c=ck(d[y],a.canonicalView_[y]),
f=s.max(d[I],a.canonicalView_[I])/s.min(d[I],a.canonicalView_[I])-1,d=a.metadata_,b=1-b/d.fadeOutTranslation-c/d.fadeOutAngle-f/d.fadeOutZoomFactor,b/=d.fadeOutFraction,a.katamari_Callouts3d$alpha_=s.max(0,s.min(1,b))),this.callouts3d_.draw(this.view,this.projection,[this[$a],this[Ec]]));this.showGrid&&this.grid&&this.grid.draw(this.view,this.projection,1,m)};
wk[B].animateToPosition=function(a,b){if(this.animateCameraToPose){var c=a.d3.targetPose,c={translation:c.translation,rotation:c[y],zoom:c[I]};this.callouts3d_.canonicalView_=c;this.animateCameraToPose(c)}b&&(c=a.d3.splineParams,c={modelPosition:c.modelPosition,modelVelocity:c.modelVelocity,textVelocity:c.textVelocity,textDepth:c.textDepth,length:c[A]},b(c.modelPosition[0],c.modelPosition[1],c))};
wk[B].showConnector=function(a,b,c,d,e){if(this.callouts3d_&&this.calloutLoader_){var f=this.calloutLoader_;if(c=f.calloutData_.metadata)$j(this.callouts3d_,c),ak(this.callouts3d_,[a,b],e,this[Cc],this.projection,function(){gj(f)}),this.draw()}};wk[B].hideConnector=function(){this.callouts3d_&&this.callouts3d_[Ua]&&(bk(this.callouts3d_),this.draw())};function zk(){var a=T.handleLoadSceneDefinition;W("Loading scene: scenes/prime_web.json");var b=new XMLHttpRequest;b[Wa]("GET","scenes/prime_web.json");qa(b,function(){if(4==b[xb]){var c=b[gb][cb](/\/\/.*$/gm,""),c=bd(c);a(c)}});b[wb]()};var $={LIBRARY_FRAGMENT_SOURCE:{},LIBRARY_VERTEX_SOURCE:{},BATTERY_COVER_VERTEX_SOURCE:"attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;c=aTextureCoord;b=(uModelInverseTranspose*vec4(aVertexNormal,0.)).xyz;}"};$.LIBRARY_VERTEX_SOURCE.battery_cover=$.BATTERY_COVER_VERTEX_SOURCE;
$.BATTERY_COVER_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture;uniform vec3 uLightDirection,uLightColor,uAmbientColor,uEyePosition;varying vec3 a,b;varying vec2 c;const float d=.58;const float e=.4;const float f=20.;const float g=.25;const float h=.65;vec3 t(vec3 i,float j){vec3 k,l,m,n,o,p,q;k=normalize(uLightDirection);l=i-vec3(.35,.35,.35);if(length(i)>h){l=vec3(0.,0.,0.);}m=b+g*l;m=normalize(m);n=normalize(uEyePosition-a);o=normalize(-reflect(n,m));p=max(dot(k,m),0.)*i;float r,s;r=pow(max(dot(k,o),0.),j);q=r*uLightColor;s=length(i*i)*2.;return d*p+e*s*q;}void main(){vec3 i,j;i=texture2D(uDiffuseTexture,c).rgb;j=t(i,f);gl_FragColor=vec4(j,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.battery_cover=$.BATTERY_COVER_FRAGMENT_SOURCE;$.CAMERA_BEZEL_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;c=aTextureCoord;b=(uModelInverseTranspose*vec4(aVertexNormal,0.)).xyz;}";$.LIBRARY_VERTEX_SOURCE.camera_bezel=$.CAMERA_BEZEL_VERTEX_SOURCE;
$.CAMERA_BEZEL_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture;uniform vec3 uLightDirection,uLightColor,uAmbientColor,uEyePosition;varying vec3 a,b;varying vec2 c;const float d=.65;const float e=.25;const float f=.15;const float g=25.;vec3 q(vec3 h,float i){vec3 j,k,l,m,n,o;j=normalize(uLightDirection);k=normalize(b+f*h);l=normalize(uEyePosition-a);m=reflect(-l,k);n=max(dot(j,k),0.)*h;float p=pow(max(dot(j,m),0.),i);o=p*uLightColor;return d*n+e*o;}void main(){vec3 h,i;h=texture2D(uDiffuseTexture,c).rgb;i=clamp(q(h,g),0.,1.);gl_FragColor=vec4(i,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.camera_bezel=$.CAMERA_BEZEL_FRAGMENT_SOURCE;$.CAMERA_FLASH_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;uniform vec3 uEyePosition;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;b=(uModelInverseTranspose*vec4(aVertexNormal,1.)).xyz;c=aTextureCoord;}";$.LIBRARY_VERTEX_SOURCE.camera_flash=$.CAMERA_FLASH_VERTEX_SOURCE;
$.CAMERA_FLASH_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture,uEnvironmentMap;uniform vec3 uLightDirection,uLightColor,uEyePosition;varying vec3 a,b;varying vec2 c;const vec3 d=vec3(-1,1,-1);vec3 o(vec3 e,vec3 f,float g){const float h=1./3.14159265359;vec3 i=reflect(-e,f)*d;vec2 j=vec2(.5+(atan(i.x,i.z)+g)*.5*h,.5+asin(i.y)*h);return texture2D(uEnvironmentMap,j,0.).rgb;}void main(){const float e=.2;const float f=.8;const float g=.07;vec3 h,i,j,k,l,m,n;h=texture2D(uDiffuseTexture,c).rgb;i=normalize(b);j=normalize(uEyePosition-a);k=normalize(-uLightDirection);l=o(j,i,g);m=h;n=clamp(f*m+e*l,0.,1.);gl_FragColor=vec4(n,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.camera_flash=$.CAMERA_FLASH_FRAGMENT_SOURCE;$.CAMERA_LENS_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;uniform vec3 uEyePosition;varying vec3 a,b;varying vec2 c;void main(){float d=.5;vec4 e,f;e=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*e;a=(uModel*e).xyz;f=uModelInverseTranspose*vec4(normalize(uEyePosition-aVertexPosition.xyz),1.);vec2 g=-d*f.xy;b=(uModelInverseTranspose*vec4(aVertexNormal,1.)).xyz;c=aTextureCoord+g;}";
$.LIBRARY_VERTEX_SOURCE.camera_lens=$.CAMERA_LENS_VERTEX_SOURCE;$.CAMERA_LENS_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture,uEnvironmentMap;uniform vec3 uLightDirection,uLightColor,uEyePosition;varying vec3 a,b;varying vec2 c;const vec3 d=vec3(-1,1,-1);vec3 p(vec3 e,vec3 f,float g){const float h=1./3.14159265359;vec3 i=reflect(-e,f)*d;vec2 j=vec2(.5+(atan(i.x,i.z)+g)*.5*h,.5+asin(i.y)*h);return texture2D(uEnvironmentMap,j,0.).rgb;}void main(){const float e=.15;const float f=.5;const float g=.07;const float h=30.;vec3 i,j,k,l,m,n,o;i=texture2D(uDiffuseTexture,c).rgb;j=normalize(b);k=normalize(uEyePosition-a);l=normalize(-uLightDirection);m=p(k,j,g);n=i;o=clamp(f*n+e*m,0.,1.);gl_FragColor=vec4(o,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.camera_lens=$.CAMERA_LENS_FRAGMENT_SOURCE;$.CHARGING_PINS_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;c=aTextureCoord;b=(uModelInverseTranspose*vec4(aVertexNormal,0.)).xyz;}";$.LIBRARY_VERTEX_SOURCE.charging_pins=$.CHARGING_PINS_VERTEX_SOURCE;
$.CHARGING_PINS_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture;uniform vec3 uLightColor,uEyePosition;varying vec3 a,b;varying vec2 c;const float d=.683;const float e=.782;const float f=50.533;const vec3 g=vec3(-.641,.132,1.072);const vec3 h=vec3(2.,0.,0.);const vec3 i=vec3(-.641,1.061,-.536);float s(vec3 j,vec3 k){return max(dot(j,k),0.);}float t(vec3 j,vec3 k){return pow(max(dot(j,k),0.),f);}vec3 u(vec3 j){vec3 k,l,m,n,o,p,q,r;k=normalize(b);l=normalize(uEyePosition-a);m=reflect(-l,k);n=normalize(g);o=normalize(h);p=normalize(i);q=j*(.1*s(n,k)+1.*s(o,k)+.1*s(p,k));r=uLightColor*(.1*t(n,m)+1.*t(o,m)+.1*t(p,m));return d*q+e*r;}void main(){vec3 j,k;j=texture2D(uDiffuseTexture,c).rgb;k=clamp(u(j),0.,1.);gl_FragColor=vec4(k,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.charging_pins=$.CHARGING_PINS_FRAGMENT_SOURCE;$.CHROME_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;b=(uModelInverseTranspose*vec4(aVertexNormal,1.)).xyz;c=aTextureCoord;}";$.LIBRARY_VERTEX_SOURCE.chrome=$.CHROME_VERTEX_SOURCE;
$.CHROME_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture,uEnvironmentMap;uniform vec3 uLightDirection,uLightColor,uEyePosition;varying vec3 a,b;varying vec2 c;vec3 m(vec3 d,vec3 e){const float f=1./3.14159265359;vec3 g,h;g=reflect(-d,e);h=g.zyx*vec3(1,1,-1);vec2 i=vec2(asin(h.x),asin(h.y))*f+.5;return texture2D(uEnvironmentMap,i).rgb;}void main(){const float d=.8;const float e=.1;vec3 f,g,h,i,j,k,l;f=texture2D(uDiffuseTexture,c).rgb;g=normalize(b);h=normalize(uEyePosition-a);i=normalize(-uLightDirection);j=m(h,g);k=f;l=clamp(e*k+d*j,0.,1.);gl_FragColor=vec4(l,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.chrome=$.CHROME_FRAGMENT_SOURCE;$.PHONE_GLASS_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;uniform vec3 uEyePosition;varying vec3 a,b,c;varying vec2 d;void main(){vec4 e=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*e;vec3 f,g,h,i;f=(uModel*e).xyz;g=(uModelInverseTranspose*vec4(aVertexNormal,1.)).xyz;h=normalize(uEyePosition-f);i=reflect(-h,g);i.z=-i.z;a=f;b=g;c=i;d=aTextureCoord;}";
$.LIBRARY_VERTEX_SOURCE.phone_glass=$.PHONE_GLASS_VERTEX_SOURCE;$.PHONE_GLASS_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture,uEnvironmentMap;uniform bool uRotateEnvironmentMap;varying vec3 a,b,c;varying vec2 d;vec3 o(float e){const float f=1./3.14159265359;vec3 g=c;vec2 h=vec2(.5+(atan(g.x,g.z)+e)*.5*f,.5+asin(g.y)*f);if(uRotateEnvironmentMap){h=vec2(-h.y,h.x);}return texture2D(uEnvironmentMap,h,0.).rgb;}void main(){const float e=.3;const float f=.726;const float g=.07;const float h=.035;const float i=30.;vec3 j,k,l,m;j=texture2D(uDiffuseTexture,d).rgb;float n=uRotateEnvironmentMap?h:g;k=o(n);l=j;m=clamp(f*l+e*k,0.,1.);gl_FragColor=vec4(m,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.phone_glass=$.PHONE_GLASS_FRAGMENT_SOURCE;$.PLASTIC_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;c=aTextureCoord;b=(uModelInverseTranspose*vec4(aVertexNormal,0.)).xyz;}";$.LIBRARY_VERTEX_SOURCE.plastic=$.PLASTIC_VERTEX_SOURCE;
$.PLASTIC_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture;uniform vec3 uLightColor,uAmbientColor,uEyePosition;varying vec3 a,b;varying vec2 c;const float d=.622;const float e=.352;const float f=6.884;const float g=1.2;const float h=1.2;const float i=1.2;const float j=1.2;const float k=1.;const float l=1.2;const float m=1.;const float n=1.;const vec3 o=vec3(-.641,.132,1.072);const vec3 p=vec3(.875,.132,0.);const vec3 q=vec3(-.641,1.061,-.536);const vec3 r=vec3(-.641,-.796,-.536);float C(vec3 s,vec3 t){return max(dot(s,t),0.);}float D(vec3 s,vec3 t){return pow(max(dot(s,t),0.),f);}vec3 E(vec3 s){vec3 t,u,v,w,x,y,z,A,B;t=normalize(b);u=normalize(uEyePosition-a);v=reflect(-u,t);w=normalize(o);x=normalize(p);y=normalize(q);z=normalize(r);A=s*(g*C(w,t)+h*C(x,t)+i*C(y,t)+j*C(z,t));B=uLightColor*(k*D(w,v)+l*D(x,v)+m*D(y,v)+n*D(z,v));return d*A+e*B;}void main(){vec3 s,t;s=texture2D(uDiffuseTexture,c).rgb;t=clamp(E(s),0.,1.);gl_FragColor=vec4(t,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.plastic=$.PLASTIC_FRAGMENT_SOURCE;$.SCREEN_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;uniform vec3 uEyePosition;varying vec3 a,b,c;varying vec2 d;void main(){float e=.075;vec4 f,g;f=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*f;vec3 h,i,j,k;h=(uModel*f).xyz;g=uModelInverseTranspose*vec4(normalize(uEyePosition-aVertexPosition),1.);vec2 l=e*g.xy*vec2(1,-1);i=(uModelInverseTranspose*vec4(aVertexNormal,1.)).xyz;j=normalize(uEyePosition-h);k=reflect(-j,i);k.z=-k.z;a=h;b=i;c=k;d=aTextureCoord+l;}";
$.LIBRARY_VERTEX_SOURCE.screen=$.SCREEN_VERTEX_SOURCE;$.SCREEN_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture,uEnvironmentMap;uniform bool uRotateEnvironmentMap;varying vec3 a,b,c;varying vec2 d;vec3 q(float e){const float f=1./3.14159265359;vec3 g=c;vec2 h=vec2(.5+(atan(g.x,g.z)+e)*.5*f,.5+asin(g.y)*f);if(uRotateEnvironmentMap){h=vec2(-h.y,h.x);}return texture2D(uEnvironmentMap,h,0.).rgb;}void main(){const float e=.3;const float f=1.;const float g=.07;const float h=.035;const float i=30.;const float j=.01;vec3 k,l,m,n;k=texture2D(uDiffuseTexture,d).rgb;vec2 o=.5-abs(.5-d);o=clamp(o*(vec2(1,2)/j),0.,1.);k*=o.x*o.y;float p=uRotateEnvironmentMap?h:g;l=q(p);m=k;n=clamp(f*m+e*l,0.,1.);gl_FragColor=vec4(n,1.);}";
$.LIBRARY_FRAGMENT_SOURCE.screen=$.SCREEN_FRAGMENT_SOURCE;$.SPEAKER_VERTEX_SOURCE="attribute vec3 aVertexPosition,aVertexNormal;attribute vec2 aTextureCoord;uniform mat4 uWorldViewProj,uModel,uModelInverseTranspose;varying vec3 a,b;varying vec2 c;void main(){vec4 d=vec4(aVertexPosition.xyz,1.);gl_Position=uWorldViewProj*d;a=(uModel*d).xyz;b=(uModelInverseTranspose*vec4(aVertexNormal,1.)).xyz;c=aTextureCoord;}";$.LIBRARY_VERTEX_SOURCE.speaker=$.SPEAKER_VERTEX_SOURCE;$.SPEAKER_FRAGMENT_SOURCE="precision mediump float;uniform sampler2D uDiffuseTexture,uEnvironmentMap;uniform vec3 uLightColor,uEyePosition;varying vec3 a,b;varying vec2 c;const float d=.2;const float e=.4;const float f=40.;const float g=0.;const float h=.4;const float i=.07;const vec3 j=vec3(.286,.0953,-.953);const vec3 k=vec3(-.286,.0953,.953);const vec3 l=vec3(-.7071,-.4243,-.5657);float v(vec3 n,vec3 o){return max(dot(n,o),0.);}float w(vec3 n,vec3 o){return pow(max(dot(n,o),0.),f);}const vec3 m=vec3(-1,1,-1);vec3 x(vec3 n,vec3 o,float p){const float q=1./3.14159265359;vec3 r=reflect(-n,o);vec2 s=vec2(.5+(atan(r.x,r.z)+p)*.5*q,.5+asin(r.y)*q);return texture2D(uEnvironmentMap,s,0.).rgb;}vec3 y(vec3 n,float o){vec3 p,q,r,s,t,u;p=normalize(b);q=normalize(uEyePosition-a);r=reflect(-q,p);s=n*(v(j,p)+v(k,p)+v(l,p));t=uLightColor*(w(j,r)+w(k,r)+w(l,r));u=x(q,p,i);return d*s+e*t+o*u;}void main(){vec3 n,o;n=texture2D(uDiffuseTexture,c).rgb;float p=b.z>0.?g:h;o=y(n,p);gl_FragColor=vec4(clamp(o,0.,1.),1.);}";
$.LIBRARY_FRAGMENT_SOURCE.speaker=$.SPEAKER_FRAGMENT_SOURCE;var T={canvas:l,renderer:l,scene:l,fader:l,slider:l,home:l,mode:"initial",initialized:m,fallbackAnimation:l,fallback:l,FADE_IN_SECS:0.4,FADE_OUT_SECS:0.3,FALLBACK_FADE_OUT_MSEC:500,INTRODUCTION_ANIMATION_MSEC:3E3,INTRODUCTION_ANIMATION_LANDSCAPE_ZOOM:0.1367,FADE_RETURN_SECS:l,MIN_ZOOM:0.1,MAX_ZOOM:0.26,ZOOM_SLIDER_ANIMATION:200,SHORT_ANIMATION:750};
T.initFader=function(){T.fallback=q[hb]("viewerFallback");T.rotateOverlay=q[hb]("webglRotateOverlay");T.fader=new Oi(T.rotateOverlay,T.FADE_IN_SECS,T.FADE_OUT_SECS,T.FADE_RETURN_SECS)};T.signalInteraction=function(){T.fader.signalInteraction();T.xpc[lc]({msg:"onAction"})};T.initHomeButton=function(){T.home={};T[Lb].button=q[hb]("zoomHome");T[Lb][qb]&&(La(T[Lb][qb],T.goHome),T[Lb][qb].ondragstart=Li)};
T.initCalloutAnimator=function(){T.renderer.animateCameraToPose=function(a){Jj(T.director,T.renderer.controller.pose_,a,T.SHORT_ANIMATION,Wi[B].slowInSlowOutEnvelope,l);T.signalInteraction()}};T.fadePlaceholder=function(){T.fallbackAnimation=new Ef(T.fallback,T.FALLBACK_FADE_OUT_MSEC);T.fallbackAnimation[Ib]()};
T.startViewAnimations=function(a,b){function c(){Ti(d,1)}var d=T.fader;n[E](function(){var d=Gd(T.director.renderer.controller.pose_),f=Gd(T.director.renderer.controller.pose_);d[y][1]="landscape"==a?360:-360;f[y][1]=0;b&&Pa(f,b);Jj(T.director,d,f,T.INTRODUCTION_ANIMATION_MSEC,Wi[B].slowInSlowOutEnvelope,c)},T.FALLBACK_FADE_OUT_MSEC)};
T.goHome=function(){T.renderer.hideConnector();Jj(T.director,T.renderer.controller.pose_,T.defaultPose,T.SHORT_ANIMATION,Wi[B].slowInSlowOutEnvelope,l);T.signalInteraction();wj(T.renderer.controller,"Home")};
T.sliderChangeCallback=function(){var a=og(T.slider.rangeModel),b=(a?a:0)/100,c=T.slider.lastValue;T.slider.lastValue=b;var a=T.renderer.controller.maxZoom*(1-b)+T.renderer.controller.minZoom*b,b=s.abs(b-c)*T.ZOOM_SLIDER_ANIMATION,c=T.director,d=T.renderer.controller.pose_[I],e=Wi[B].constantSpeedEnvelope,f=Gd(c.renderer.controller.pose_),g=Gd(c.renderer.controller.pose_);Pa(f,d);Pa(g,a);Jj(c,f,g,b,e,l)};
T.initSlider=function(){var a=q[hb]("zoomControl");if(a){T.zoomContainer=q[hb]("zoomContainer");T.zoomContainer&&Ma(T.zoomContainer[F],"block");T.slider=new Jg;Ig();T.slider.moveToPointEnabled_=k;kg(a);var b=T.renderer.controller.maxZoom,b=100*(b-T.renderer.controller.pose_[I])/s.abs(b-T.renderer.controller.minZoom);T.slider.lastValue=b/100;T.slider.setValue(b);T.slider[Fb]("change",T.sliderChangeCallback);a[Fb]("mouseup",function(){wj(T.renderer.controller,"Slider")},m);(a=q[hb]("zoomIn"))&&La(a,
function(){var a=og(T.slider.rangeModel)+20;T.slider.setValue(pf(a,0,100));T.signalInteraction();wj(T.renderer.controller,"Plus")});(a=q[hb]("zoomOut"))&&La(a,function(){var a=og(T.slider.rangeModel)-20;T.slider.setValue(pf(a,0,100));T.signalInteraction();wj(T.renderer.controller,"Minus")});T.renderer.slider=T.slider;T.initialized=k}};
T.prepareCanvas=function(){T.canvasParent=q[hb]("viewer");T.canvasParent&&(T.canvasParent[F].zIndex=5);T.edgeBlurElem=q[hb]("canvas-edge-blur");T.edgeBlurElem&&(T.edgeBlurElem.ondragstart=Li,T.edgeBlurElem.onselectstart=Li);Na(T,q[hb]("viewer3dCanvas"))};T.prepareRenderer=function(a){T.calloutLoader=T.getCalloutsLoader();T.renderer=new wk(T[Cc],T.calloutLoader,T.edgeBlurElem);T.director=new Ij(T[Cc],T.renderer);T.scene=new pk(T.renderer.gl_,a);a=T.scene.katamari_Scene$shaders_;Lj(a,Y);Lj(a,$)};
T.prepareScene=function(){var a=T.handleSceneOnload;T.defaultZoomLand=ha(T[Cc][oc]("zoomLand"));T.defaultZoomPortrait=ha(T[Cc][oc]("zoomPortrait"));T.defaultPose={translation:[0,0,0],rotation:[0,0,0],zoom:T.defaultZoomLand};xk();T.initCalloutAnimator();na(T.scene,a)};
T.handleSceneOnload=function(){T.initSlider();T.fadePlaceholder();T[Qa]&&T[Qa]("webgl");T.xpc&&T.xpc[lc]({msg:"onLoad",data:"webgl"});var a=T.mode;Vi("InitWebgl","Render Webgl","Complete - "+(a?a[Tb](0,1).toUpperCase()+a[Tb](1).toLowerCase():""))};T.handleLoadSceneDefinition=function(a){T.prepareCanvas();T.prepareRenderer(a);T.prepareScene()};T.getCalloutsLoader=function(){var a=new cj("data/callout_prime.json","calloutMenu");dj(a);return a};T.loadWebglViewer=function(){zk()};
T.setViewStyleClasses_=function(a){T.canvasParent&&Ga(T.canvasParent,"canvas-parent canvas-parent-"+a);T.edgeBlurElem&&Ga(T.edgeBlurElem,"canvas-edge-blur canvas-edge-blur-"+a);T.zoomContainer=q[hb]("zoomContainer");T.zoomContainer&&Ga(T.zoomContainer,"zoom-container zoom-container-"+a);T.zoomContainer&&Ma(T.zoomContainer[F],"block");T.fallback&&Ga(T.fallback,"viewerFallback viewerFallback-"+a);T.rotateOverlay&&Ga(T.rotateOverlay,"webglRotateOverlay webglRotateOverlay-"+a);T.gotoClassicButton&&Ga(T.gotoClassicButton,
"goto-classic goto-classic-"+a)};T.attachViewListeners_=function(a,b){var c=T.renderer;c.animation=l;nj(c.dragHandler,"zoom",function(){var a=T.director;a.slider&&a.slider.setValue(99.9*Gj(c.controller))});pj(c.dragHandler,function(){T.signalInteraction();c.animation=l});Pi(T.fader);T.scene[Qa]||na(T.scene,function(){T.startViewAnimations(a,b)})};
T.showLandscapeViewer=function(){T.mode="landscape";Pa(T.defaultPose,T.defaultZoomLand);T.calloutLoader&&ej(m);if(T.renderer){var a=T.renderer,b=T.defaultPose;yk(a,new Aj(a[Cc][$a],a[Cc][Ec]),k,b);a=a.scene;a.activeDiffuseTexture_=1;rk(a);a.draw()}T.setViewStyleClasses_("land");T.attachViewListeners_("landscape",T.INTRODUCTION_ANIMATION_LANDSCAPE_ZOOM);T.renderer&&T.renderer.draw()};
T.showPortraitViewer=function(){T.mode="portrait";Pa(T.defaultPose,T.defaultZoomPortrait);T.calloutLoader&&ej(k);if(T.renderer){var a=T.renderer,b=T.defaultPose;a.scene.setTransform(wi(),m);yk(a,new yj,m,b);a=a.scene;a.activeDiffuseTexture_=0;rk(a);a.draw()}T.setViewStyleClasses_("portrait");T.attachViewListeners_("portrait",l);T.renderer&&T.renderer.draw()};T.hideViewer=function(){T.mode="hidden";T.calloutLoader&&ej(m);T.fader&&Qi(T.fader)};
T.initXpc=function(){T.xpc=new Ni;T.xpc.initIframeXpc(T.showPortraitViewer,T.showLandscapeViewer,T.hideViewer);La(q[jc],function(){T.xpc[lc]({msg:"onAction"})})};T.initSwitchToClassicButton=function(){T.gotoClassicButton=q[hb]("goto-classic-button");T.gotoClassicButton&&La(T.gotoClassicButton,function(){T.xpc[lc]({msg:"onSwitchToClassic"})})};
T.initPrimeViewer=function(a){Fi=m;if(q[jc])na(T,a),T.initFader(),T.initHomeButton(),T.loadWebglViewer(),T.initSwitchToClassicButton(),q[hb]("embed-viewer")&&T.initXpc();else n[E](function(){T.initPrimeViewer(a)},10);n.katamaridebug=T};ad("katamari.InitWebgl.initPrimeViewer",T.initPrimeViewer);ad("goog.showViewerPortrait",T.showPortraitViewer);ad("goog.showViewerLandscape",T.showLandscapeViewer);ad("goog.initPrimeViewer",T.initPrimeViewer);L["goog.loadScriptCallback"]&&L["goog.loadScriptCallback"]();